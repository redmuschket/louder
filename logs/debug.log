2025-08-28 08:56:17,046 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-28 09:10:00,228 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-28 09:13:57,514 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:13:57,516 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-28 09:13:57,516 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 09:13:57,517 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 09:13:57,518 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:13:57,520 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:13:57,520 - app.services.patent.patent - DEBUG - [patent.py:61 - get_patents()] - No patents found in DB for user
2025-08-28 09:14:24,769 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:14:24,771 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-08-28 09:14:24,772 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-08-28 09:14:24,772 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 09:14:24,776 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 09:14:24,776 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:14:24,777 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:14:24,778 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:14:24,779 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:14:24,780 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-08-28 09:14:24,781 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-08-28 09:14:38,220 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:14:38,222 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 09:14:38,223 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 09:14:38,224 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 09:14:38,225 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 09:14:38,234 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 09:14:38,235 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:14:38,235 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:14:38,236 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:14:38,238 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:14:38,238 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 09:14:42,323 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:14:42,325 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 09:14:42,326 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 09:14:42,327 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 09:14:42,328 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 09:14:42,328 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 09:14:42,329 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:14:42,332 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:14:43,265 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 200 2437
2025-08-28 09:14:43,266 - app.clients.parser_client - DEBUG - [parser_client.py:34 - generate_analog_link()] - The polling process of the parser ended in success
2025-08-28 09:14:43,266 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:14:43,267 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:14:43,270 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:14:43,272 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:14:43,273 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:14:43,276 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:15:33,419 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog HTTP/1.1" 200 40245
2025-08-28 09:15:33,420 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:15:33,420 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:15:33,422 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:15:33,424 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:15:33,425 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:61 - analog_generate()] - The generation of analogues was successful
2025-08-28 09:15:33,425 - app.services.analog.analog - INFO - [analog.py:40 - _creat_analogs_attribute()] - Star creat_analogs_attribute
2025-08-28 09:18:44,393 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-28 09:18:47,255 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:18:47,257 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 09:18:47,258 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 09:18:47,259 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 09:18:47,260 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 09:18:47,270 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 09:18:47,271 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-28 09:18:47,271 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 09:18:47,272 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 09:18:47,272 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:18:47,275 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:19:37,390 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 500 36
2025-08-28 09:25:37,329 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:25:37,332 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 09:25:37,332 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 09:25:37,333 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 09:25:37,334 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 09:25:37,335 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 09:25:37,336 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:25:37,337 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:25:37,338 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:25:37,339 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:25:37,340 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 09:25:40,836 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:25:40,838 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 09:25:40,839 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 09:25:40,839 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 09:25:40,840 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 09:25:40,841 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 09:25:40,841 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:25:40,843 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:25:44,059 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 200 2382
2025-08-28 09:25:44,060 - app.clients.parser_client - DEBUG - [parser_client.py:34 - generate_analog_link()] - The polling process of the parser ended in success
2025-08-28 09:25:44,060 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:25:44,061 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:25:44,062 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:25:44,064 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:25:44,065 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:25:44,066 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:26:34,219 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog HTTP/1.1" 200 98826
2025-08-28 09:26:34,221 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:26:34,221 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:26:34,223 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:26:34,225 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:26:34,225 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:61 - analog_generate()] - The generation of analogues was successful
2025-08-28 09:26:34,226 - app.services.analog.analog - INFO - [analog.py:40 - _creat_analogs_attribute()] - Star creat_analogs_attribute
2025-08-28 09:26:34,227 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 09:26:34,238 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 09:26:34,238 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 09:26:34,246 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 09:26:34,247 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:26:34,250 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:26:34,252 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:26:34,254 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:26:34,255 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:26:34,257 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:26:34,334 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:26:34,335 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2717658C2
2025-08-28 09:26:34,555 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:26:34,557 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2402929C2
2025-08-28 09:26:34,563 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:26:34,564 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2737943C1
2025-08-28 09:26:34,570 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:26:34,571 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent EA0000015351B1
2025-08-28 09:26:34,577 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:26:34,578 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2560426C2
2025-08-28 09:26:34,614 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:26:34,616 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent EA0000036291B1
2025-08-28 09:26:34,617 - app.services.analog.analog - INFO - [analog.py:46 - _creat_analogs_attribute()] - The attribute search was unsuccessful
2025-08-28 09:26:34,618 - app.http.routes.analog - ERROR - [analog.py:27 - search_patent_analogues()] - No analogues found for patent
2025-08-28 09:29:13,560 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:29:13,562 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 09:29:13,563 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 09:29:13,564 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 09:29:13,564 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 09:29:13,565 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 09:29:13,565 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:29:13,567 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:30:03,681 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 500 36
2025-08-28 09:33:26,955 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:33:26,957 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-28 09:33:26,957 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 09:35:35,895 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:35:35,896 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 09:35:35,897 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 09:35:35,898 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 09:35:35,898 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 09:35:35,900 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 09:35:35,901 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:35:35,901 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:35:35,902 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:35:35,904 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:35:35,905 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 09:35:40,109 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:35:40,111 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 09:35:40,112 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 09:35:40,113 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 09:35:40,113 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 09:35:40,114 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 09:35:40,114 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:35:40,117 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:35:43,062 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 200 2341
2025-08-28 09:35:43,063 - app.clients.parser_client - DEBUG - [parser_client.py:34 - generate_analog_link()] - The polling process of the parser ended in success
2025-08-28 09:35:43,064 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:35:43,064 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:35:43,065 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:35:43,067 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:35:43,067 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:35:43,069 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:36:33,243 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog HTTP/1.1" 200 48506
2025-08-28 09:36:33,244 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:36:33,244 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:36:33,246 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:36:33,248 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:36:33,248 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:61 - analog_generate()] - The generation of analogues was successful
2025-08-28 09:36:33,249 - app.services.analog.analog - INFO - [analog.py:40 - _creat_analogs_attribute()] - Star creat_analogs_attribute
2025-08-28 09:36:33,250 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 09:36:33,260 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 09:36:33,261 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 09:36:33,263 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 09:36:33,263 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:36:33,265 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:36:33,267 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:36:33,268 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:36:33,289 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:36:33,290 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU225476U1
2025-08-28 09:36:33,304 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:36:33,306 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2782412C2
2025-08-28 09:36:33,312 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:36:33,313 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU225457U1
2025-08-28 09:36:33,320 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:36:33,321 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2619995C2
2025-08-28 09:36:33,322 - app.services.analog.analog - INFO - [analog.py:46 - _creat_analogs_attribute()] - The attribute search was unsuccessful
2025-08-28 09:36:33,323 - app.http.routes.analog - ERROR - [analog.py:27 - search_patent_analogues()] - No analogues found for patent
2025-08-28 09:38:07,595 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:38:07,597 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 09:38:07,598 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 09:38:07,599 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 09:38:07,599 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 09:38:07,600 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 09:38:07,600 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:38:07,602 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:38:57,728 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 500 36
2025-08-28 09:39:20,916 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:39:20,918 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 09:39:20,918 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 09:39:20,919 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 09:39:20,920 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 09:39:20,921 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 09:39:20,922 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:39:20,923 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:39:20,924 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:39:20,926 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:39:20,926 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 09:39:24,305 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:39:24,306 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 09:39:24,307 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 09:39:24,308 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 09:39:24,309 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 09:39:24,309 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 09:39:24,310 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:39:24,312 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:40:04,403 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 500 36
2025-08-28 09:51:19,228 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:51:19,229 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 09:51:19,230 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 09:51:19,231 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 09:51:19,231 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 09:51:19,233 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 09:51:19,234 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:51:19,234 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:51:19,235 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:51:19,237 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:51:19,237 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 09:51:23,245 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:51:23,247 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 09:51:23,248 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 09:51:23,249 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 09:51:23,249 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 09:51:23,250 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 09:51:23,250 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:51:23,252 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:52:03,393 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 500 36
2025-08-28 09:52:39,748 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:52:39,749 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 09:52:39,750 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 09:52:39,751 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 09:52:39,751 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 09:52:39,753 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 09:52:39,754 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:52:39,754 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:52:39,755 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:52:39,757 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:52:39,758 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 09:52:43,061 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:52:43,062 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 09:52:43,063 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 09:52:43,064 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 09:52:43,065 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 09:52:43,065 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 09:52:43,066 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:52:43,068 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:53:23,174 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 500 36
2025-08-28 09:53:33,012 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:53:33,013 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 09:53:33,014 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 09:53:33,015 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 09:53:33,016 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 09:53:33,016 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 09:53:33,017 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:53:33,019 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:53:34,240 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 200 2187
2025-08-28 09:53:34,241 - app.clients.parser_client - DEBUG - [parser_client.py:34 - generate_analog_link()] - The polling process of the parser ended in success
2025-08-28 09:53:34,242 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:53:34,242 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:53:34,243 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:53:34,245 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:53:34,246 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:53:34,247 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:54:24,383 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog HTTP/1.1" 200 26870
2025-08-28 09:54:24,384 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:54:24,385 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:54:24,386 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:54:24,388 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:54:24,388 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:61 - analog_generate()] - The generation of analogues was successful
2025-08-28 09:54:24,389 - app.services.analog.analog - INFO - [analog.py:40 - _creat_analogs_attribute()] - Star creat_analogs_attribute
2025-08-28 09:54:24,390 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 09:54:24,400 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 09:54:24,401 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 09:54:24,403 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 09:54:24,403 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:54:24,405 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:54:24,406 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:54:24,408 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:54:24,409 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 09:54:24,430 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:54:24,432 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2818384C1
2025-08-28 09:54:24,445 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:54:24,446 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU101063U1
2025-08-28 09:54:24,452 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:54:24,454 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2739876C1
2025-08-28 09:54:24,460 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:54:24,461 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU43224U1
2025-08-28 09:54:24,467 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 09:54:24,468 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU187753U1
2025-08-28 09:54:24,469 - app.services.analog.analog - INFO - [analog.py:46 - _creat_analogs_attribute()] - The attribute search was unsuccessful
2025-08-28 09:54:24,470 - app.http.routes.analog - ERROR - [analog.py:27 - search_patent_analogues()] - No analogues found for patent
2025-08-28 09:59:22,668 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 09:59:22,669 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 09:59:22,670 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 09:59:22,671 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 09:59:22,672 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 09:59:22,672 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 09:59:22,673 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:59:22,675 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 09:59:23,857 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 200 2187
2025-08-28 09:59:23,858 - app.clients.parser_client - DEBUG - [parser_client.py:34 - generate_analog_link()] - The polling process of the parser ended in success
2025-08-28 09:59:23,858 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 09:59:23,859 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 09:59:23,860 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 09:59:23,862 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 09:59:23,862 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 09:59:23,864 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 10:00:13,999 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog HTTP/1.1" 200 31864
2025-08-28 10:00:14,000 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:00:14,001 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:00:14,002 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:00:14,004 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:00:14,004 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:61 - analog_generate()] - The generation of analogues was successful
2025-08-28 10:00:14,005 - app.services.analog.analog - INFO - [analog.py:40 - _creat_analogs_attribute()] - Star creat_analogs_attribute
2025-08-28 10:00:14,006 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:00:14,016 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:00:14,017 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:00:14,018 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:00:14,019 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:00:14,021 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:00:14,022 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:00:14,024 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:00:14,025 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:00:14,047 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:00:14,048 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU99514U1
2025-08-28 10:00:14,061 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:00:14,062 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2674451C1
2025-08-28 10:00:14,076 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:00:14,077 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2818384C1
2025-08-28 10:00:14,084 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:00:14,085 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent WO2022010373A1
2025-08-28 10:00:14,091 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:00:14,092 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2739876C1
2025-08-28 10:00:14,094 - app.services.analog.analog - INFO - [analog.py:46 - _creat_analogs_attribute()] - The attribute search was unsuccessful
2025-08-28 10:00:14,094 - app.http.routes.analog - ERROR - [analog.py:27 - search_patent_analogues()] - No analogues found for patent
2025-08-28 10:02:37,286 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:02:37,287 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:02:37,288 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 10:02:37,289 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:02:37,290 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 10:02:37,290 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 10:02:37,291 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 10:02:37,293 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 10:03:17,389 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 500 36
2025-08-28 10:03:57,597 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:03:57,599 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 10:03:57,599 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 10:03:57,600 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 10:03:57,601 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:03:57,602 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:03:57,603 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:03:57,604 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:03:57,605 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:03:57,606 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:03:57,607 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 10:04:00,941 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:04:00,942 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:04:00,943 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 10:04:00,944 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:04:00,944 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 10:04:00,945 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 10:04:00,946 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 10:04:00,947 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 10:04:02,261 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 200 3062
2025-08-28 10:04:02,262 - app.clients.parser_client - DEBUG - [parser_client.py:34 - generate_analog_link()] - The polling process of the parser ended in success
2025-08-28 10:04:02,263 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:04:02,263 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:04:02,264 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:04:02,266 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:04:02,267 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 10:04:02,268 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 10:04:52,415 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog HTTP/1.1" 200 47464
2025-08-28 10:04:52,416 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:04:52,417 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:04:52,418 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:04:52,420 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:04:52,421 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:61 - analog_generate()] - The generation of analogues was successful
2025-08-28 10:04:52,421 - app.services.analog.analog - INFO - [analog.py:40 - _creat_analogs_attribute()] - Star creat_analogs_attribute
2025-08-28 10:04:52,422 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:04:52,432 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:04:52,433 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:04:52,434 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:04:52,435 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:04:52,437 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:04:52,438 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:04:52,440 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:04:52,441 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:04:52,443 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:04:52,465 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:04:52,466 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU175406U1
2025-08-28 10:04:52,480 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:04:52,481 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU71501U1
2025-08-28 10:04:52,488 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:04:52,489 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2156546C2
2025-08-28 10:04:52,496 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:04:52,498 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2842002C1
2025-08-28 10:04:52,504 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:04:52,505 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU233439U1
2025-08-28 10:04:52,512 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:04:52,513 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2667360C1
2025-08-28 10:04:52,514 - app.services.analog.analog - INFO - [analog.py:46 - _creat_analogs_attribute()] - The attribute search was unsuccessful
2025-08-28 10:04:52,515 - app.http.routes.analog - ERROR - [analog.py:27 - search_patent_analogues()] - No analogues found for patent
2025-08-28 10:07:18,623 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:07:18,625 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:07:18,626 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 10:07:18,627 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:07:18,627 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 10:07:18,628 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 10:07:18,628 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 10:07:18,631 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 10:07:19,855 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 200 3062
2025-08-28 10:07:19,856 - app.clients.parser_client - DEBUG - [parser_client.py:34 - generate_analog_link()] - The polling process of the parser ended in success
2025-08-28 10:07:19,857 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:07:19,857 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:07:19,858 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:07:19,860 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:07:19,861 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 10:07:19,863 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 10:08:10,003 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog HTTP/1.1" 200 54925
2025-08-28 10:08:10,004 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:08:10,004 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:08:10,006 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:08:10,008 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:08:10,008 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:61 - analog_generate()] - The generation of analogues was successful
2025-08-28 10:08:10,009 - app.services.analog.analog - INFO - [analog.py:40 - _creat_analogs_attribute()] - Star creat_analogs_attribute
2025-08-28 10:08:10,010 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:08:10,020 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:08:10,021 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:08:10,022 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:08:10,023 - app.services.analog.attribute_tool - DEBUG - [attribute_tool.py:256 - iter_analog_data()] - Skipping empty patent EA0201391218A1
2025-08-28 10:08:10,024 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:08:10,026 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:08:10,027 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:08:10,029 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:08:10,049 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:08:10,050 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2249261C2
2025-08-28 10:08:10,064 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:08:10,065 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU71501U1
2025-08-28 10:08:10,071 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:08:10,072 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2833170C1
2025-08-28 10:08:10,078 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 500
2025-08-28 10:08:10,079 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2256946C2
2025-08-28 10:08:10,080 - app.services.analog.analog - INFO - [analog.py:46 - _creat_analogs_attribute()] - The attribute search was unsuccessful
2025-08-28 10:08:10,081 - app.http.routes.analog - ERROR - [analog.py:27 - search_patent_analogues()] - No analogues found for patent
2025-08-28 10:10:32,060 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:10:32,061 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:10:32,062 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 10:10:32,063 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:10:32,064 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 10:10:32,064 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 10:10:32,065 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 10:10:32,067 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 10:10:33,327 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 200 3062
2025-08-28 10:10:33,328 - app.clients.parser_client - DEBUG - [parser_client.py:34 - generate_analog_link()] - The polling process of the parser ended in success
2025-08-28 10:10:33,329 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:10:33,329 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:10:33,330 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:10:33,332 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:10:33,333 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 10:10:33,335 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 10:11:23,476 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog HTTP/1.1" 200 67861
2025-08-28 10:11:23,477 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:11:23,478 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:11:23,479 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:11:23,481 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:11:23,482 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:61 - analog_generate()] - The generation of analogues was successful
2025-08-28 10:11:23,482 - app.services.analog.analog - INFO - [analog.py:40 - _creat_analogs_attribute()] - Star creat_analogs_attribute
2025-08-28 10:11:23,483 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:11:23,493 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:11:23,494 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:11:23,496 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:11:23,497 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:11:23,498 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:11:23,500 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:11:23,501 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:11:24,725 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:11:24,727 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2156546C2
2025-08-28 10:11:24,736 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:11:24,738 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2833170C1
2025-08-28 10:11:24,829 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:11:24,831 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2667360C1
2025-08-28 10:11:25,336 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:11:25,338 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2249261C2
2025-08-28 10:11:25,338 - app.services.analog.analog - INFO - [analog.py:46 - _creat_analogs_attribute()] - The attribute search was unsuccessful
2025-08-28 10:11:25,339 - app.http.routes.analog - ERROR - [analog.py:27 - search_patent_analogues()] - No analogues found for patent
2025-08-28 10:13:23,215 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:13:23,216 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:13:23,217 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 10:13:23,218 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:13:23,219 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 10:13:23,220 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 10:13:23,220 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 10:13:23,222 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 10:13:24,928 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 200 3062
2025-08-28 10:13:24,929 - app.clients.parser_client - DEBUG - [parser_client.py:34 - generate_analog_link()] - The polling process of the parser ended in success
2025-08-28 10:13:24,929 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:13:24,930 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:13:24,931 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:13:24,933 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:13:24,933 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 10:13:24,935 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 10:14:15,071 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog HTTP/1.1" 200 40034
2025-08-28 10:14:15,072 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:14:15,073 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:14:15,074 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:14:15,076 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:14:15,076 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:61 - analog_generate()] - The generation of analogues was successful
2025-08-28 10:14:15,077 - app.services.analog.analog - INFO - [analog.py:40 - _creat_analogs_attribute()] - Star creat_analogs_attribute
2025-08-28 10:14:15,078 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:14:15,088 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:14:15,089 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:14:15,090 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:14:15,091 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:14:15,093 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:14:15,094 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:14:15,095 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:14:15,097 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:14:16,154 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:14:16,155 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU71501U1
2025-08-28 10:14:16,156 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:14:16,157 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2833170C1
2025-08-28 10:14:16,204 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:14:16,205 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2256946C2
2025-08-28 10:14:16,580 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:14:16,581 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU175406U1
2025-08-28 10:14:55,514 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:14:55,515 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:14:55,517 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:14:55,519 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:14:55,519 - app.services.analog.analog - INFO - [analog.py:43 - _creat_analogs_attribute()] - The attribute search was successful
2025-08-28 10:14:55,520 - app.http.routes.analog - INFO - [analog.py:20 - search_patent_analogues()] - Request to receive analogues successful
2025-08-28 10:15:58,573 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:15:58,574 - app.http.routes.analog - INFO - [analog.py:84 - get_analogues_xlsx()] - Request to receive analogues table xlsx
2025-08-28 10:15:58,575 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:15:58,576 - app.services.analog.analog - INFO - [analog.py:98 - get_analogues_xlsx()] - Star get_analog_xlsx
2025-08-28 10:15:58,577 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:15:58,578 - app.services.analog.table_generator - INFO - [table_generator.py:75 - generate_analogs_xlsx()] - Star generate_analogs_csv
2025-08-28 10:15:58,578 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:15:58,579 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:15:58,581 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:15:58,582 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:15:58,584 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:15:58,585 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:15:58,595 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:15:58,632 - app.http.routes.analog - INFO - [analog.py:88 - get_analogues_xlsx()] - Request to receive analogues successful
2025-08-28 10:16:29,381 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:16:29,383 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-08-28 10:16:29,384 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-08-28 10:16:29,385 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:16:29,386 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:16:29,387 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:16:29,388 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:16:29,389 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:16:29,390 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:16:29,391 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-08-28 10:16:29,391 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-08-28 10:17:03,206 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:17:03,207 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 10:17:03,208 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 10:17:03,209 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 10:17:03,209 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:17:03,211 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:17:03,212 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:17:03,212 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:17:03,213 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:17:03,215 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:17:03,215 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 10:17:07,139 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:17:07,141 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:17:07,142 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 10:17:07,143 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:17:07,143 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 10:17:07,144 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 10:17:07,144 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 10:17:07,146 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 10:17:07,969 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 200 1127
2025-08-28 10:17:07,970 - app.clients.parser_client - DEBUG - [parser_client.py:34 - generate_analog_link()] - The polling process of the parser ended in success
2025-08-28 10:17:07,971 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:17:07,971 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:17:07,992 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:17:07,994 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:17:07,995 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 10:17:07,996 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 10:17:58,119 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog HTTP/1.1" 200 15668
2025-08-28 10:17:58,120 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:17:58,121 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:17:58,123 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:17:58,124 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:17:58,125 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:61 - analog_generate()] - The generation of analogues was successful
2025-08-28 10:17:58,125 - app.services.analog.analog - INFO - [analog.py:40 - _creat_analogs_attribute()] - Star creat_analogs_attribute
2025-08-28 10:17:58,127 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:17:58,136 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:17:58,137 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:17:58,139 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:17:58,140 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:17:58,141 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:17:58,143 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:17:58,144 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:17:59,304 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:17:59,305 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU195243U1
2025-08-28 10:17:59,344 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:17:59,345 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:41 - process_one()] - LLM request failed for patent RU2268840C2
2025-08-28 10:18:20,455 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:18:20,456 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:18:20,457 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:18:20,459 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:18:35,830 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:18:35,830 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:18:35,832 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:18:35,833 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:18:35,834 - app.services.analog.analog - INFO - [analog.py:43 - _creat_analogs_attribute()] - The attribute search was successful
2025-08-28 10:18:35,835 - app.http.routes.analog - INFO - [analog.py:20 - search_patent_analogues()] - Request to receive analogues successful
2025-08-28 10:21:03,841 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:21:03,842 - app.http.routes.analog - INFO - [analog.py:66 - get_analogues_csv()] - Request to receive analogues table xlsx
2025-08-28 10:21:03,843 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:21:03,844 - app.services.analog.analog - INFO - [analog.py:91 - get_analogues_csv()] - Star get_analog_csv
2025-08-28 10:21:03,845 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:21:03,846 - app.services.analog.table_generator - INFO - [table_generator.py:22 - generate_analogs_csv()] - Star generate_analogs_csv
2025-08-28 10:21:03,847 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:21:03,847 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:21:03,849 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:21:03,850 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:21:03,852 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:21:03,852 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:21:03,854 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:21:03,855 - app.http.routes.analog - INFO - [analog.py:70 - get_analogues_csv()] - Request to receive analogues successful
2025-08-28 10:21:33,470 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:21:33,472 - app.http.routes.analog - INFO - [analog.py:84 - get_analogues_xlsx()] - Request to receive analogues table xlsx
2025-08-28 10:21:33,473 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:21:33,474 - app.services.analog.analog - INFO - [analog.py:98 - get_analogues_xlsx()] - Star get_analog_xlsx
2025-08-28 10:21:33,475 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:21:33,475 - app.services.analog.table_generator - INFO - [table_generator.py:75 - generate_analogs_xlsx()] - Star generate_analogs_csv
2025-08-28 10:21:33,476 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:21:33,477 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:21:33,478 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:21:33,479 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:21:33,481 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:21:33,482 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:21:33,483 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:21:33,501 - app.http.routes.analog - INFO - [analog.py:88 - get_analogues_xlsx()] - Request to receive analogues successful
2025-08-28 10:22:31,060 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:22:31,061 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 10:22:31,062 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 10:22:31,063 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 10:22:31,063 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:22:31,065 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:22:31,066 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:22:31,066 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:22:31,067 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:22:31,069 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:22:31,069 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 10:23:38,949 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:23:38,951 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 10:23:38,951 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 10:23:38,952 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 10:23:38,953 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:23:38,954 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:23:38,955 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:23:38,956 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:23:38,957 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:23:38,958 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:23:38,959 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 10:24:09,628 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:24:09,629 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 10:24:09,630 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 10:24:09,631 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 10:24:09,632 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:24:09,633 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:24:09,634 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:24:09,635 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:24:09,636 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:24:09,637 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:24:09,638 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 10:24:26,232 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:24:26,233 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 10:24:26,234 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 10:24:26,235 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 10:24:26,235 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:24:26,237 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:24:26,238 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:24:26,238 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:24:26,239 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:24:26,241 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:24:26,241 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 10:24:53,210 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:24:53,212 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 10:24:53,212 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 10:24:53,213 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 10:24:53,214 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:24:53,216 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:24:53,216 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:24:53,217 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:24:53,218 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:24:53,220 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:24:53,220 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 10:25:57,689 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:25:57,691 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 10:25:57,691 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 10:25:57,692 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 10:25:57,693 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:25:57,695 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:25:57,695 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:25:57,696 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:25:57,697 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:25:57,699 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:25:57,699 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 10:26:25,548 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:26:25,549 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 10:26:25,550 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 10:26:25,551 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 10:26:25,551 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:26:25,553 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:26:25,554 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:26:25,554 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:26:25,555 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:26:25,557 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:26:25,557 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 10:26:36,016 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:26:36,018 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 10:26:36,018 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 10:26:36,019 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 10:26:36,020 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:26:36,029 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:26:36,030 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:26:36,031 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:26:36,032 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:26:36,033 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:26:36,034 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 10:26:49,492 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:26:49,494 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:26:49,495 - app.services.analog.analog - INFO - [analog.py:51 - matching_attributes()] - Star matching_attributes
2025-08-28 10:26:49,496 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:26:49,497 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:26:49,499 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:26:49,499 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:26:49,509 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:26:49,510 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:27:23,297 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:27:23,298 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:27:23,299 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:27:23,301 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:27:23,302 - app.services.analog.analog - INFO - [analog.py:55 - matching_attributes()] - The attribute matching was successful
2025-08-28 10:27:23,303 - app.http.routes.analog - INFO - [analog.py:36 - matching_attributes()] - Request to receive analogues successful
2025-08-28 10:34:41,350 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:34:41,352 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 10:34:41,353 - app.services.patent.patent - INFO - [patent.py:130 - matching_attributes()] - Star matching_attributes
2025-08-28 10:34:41,354 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:34:41,355 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:34:41,365 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:34:41,366 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:34:41,374 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:34:41,375 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:35:17,334 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:35:17,334 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:35:17,336 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:35:17,338 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:35:17,338 - app.services.patent.patent - INFO - [patent.py:134 - matching_attributes()] - The attribute matching was successful
2025-08-28 10:35:17,339 - app.http.routes.patent - INFO - [patent.py:84 - matching_attributes()] - Request to receive analogues successful
2025-08-28 10:36:22,497 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:36:22,498 - app.http.routes.patent - INFO - [patent.py:116 - get_analogues_xlsx()] - Request to receive atter table xlsx
2025-08-28 10:36:22,499 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 10:36:22,500 - app.services.patent.patent - DEBUG - [patent.py:160 - get_attribute_xlsx()] - Start get_atter_xlsx
2025-08-28 10:36:22,500 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:36:22,501 - app.services.patent.patent - DEBUG - [patent.py:178 - get_attribute_xlsx()] - 
🔍 Поиск CSV файла:
User ID: 0198ef18-ce23-7538-809c-c6154521c2b0
Patent ID: 0198ef1b-2149-7e3e-9c5a-e3871310fced
Full path analog attributes: storage\user_data\0198ef18-ce23-7538-809c-c6154521c2b0\0198ef1b-2149-7e3e-9c5a-e3871310fced\patent_analogs\attributes_matcher_analog.json
Full path patent attributes: storage\user_data\0198ef18-ce23-7538-809c-c6154521c2b0\0198ef1b-2149-7e3e-9c5a-e3871310fced\patent_analogs\attributes_matcher_patent.json
2025-08-28 10:36:22,502 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:36:22,504 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:36:22,505 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:36:22,515 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:36:22,535 - app.http.routes.patent - INFO - [patent.py:120 - get_analogues_xlsx()] - Request to receive analogues successful
2025-08-28 10:37:03,624 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:37:03,625 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:37:03,626 - app.services.analog.analog - INFO - [analog.py:66 - generate_statistics()] - Star generate_statistics
2025-08-28 10:37:03,627 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:37:03,628 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:37:03,629 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:37:03,630 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:37:03,632 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:37:03,633 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:37:03,634 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:37:03,635 - app.services.analog.attribute_tool - DEBUG - [attribute_tool.py:115 - _generate_analog_patent_attributes()] - Response from get_analog_patent_attributes_data success: True
2025-08-28 10:37:03,636 - app.services.analog.attribute_tool - DEBUG - [attribute_tool.py:116 - _generate_analog_patent_attributes()] - Response from get_analog_patent_attributes_data data: {'attribute_matcher_prompt_template': 'Ты — патентный семантический аналитик. Твоя задача — создать единый список уникальных технических признаков из признаков патентов-аналогов, объединяя семантически эквивалентные формулировки.\n\n**Исходные данные:**\n- Словарь патентов с их признаками:\n\n{patents_dict}\n\n**Инструкции по выполнению:**\n\n1. **Нормализация формулировок**\n   - Для каждого признака:\n     * Приведи к базовой терминологии:\n       - "вертикальные стойки" → "ножки"\n       - "опорные элементы" → "ножки"\n       - "сидячая поверхность" → "сиденье"\n       - "спинная опора" → "спинка"\n     * Разделяй составные признаки:\n       "ножки с резиновыми накладками" → ["ножки", "противоскользящие элементы"]\n     * Удали субъективные оценки ("прочные", "удобные")\n\n2. **Семантическое объединение**\n   - Группируй признаки по смыслу:\n     * "ножки" = "опорные стойки" = "вертикальные опоры"\n     * "шарнир" = "поворотный узел" = "соединение с вращением"\n   - Для каждой группы создай ОДНУ каноническую формулировку:\n     * Выбирай наиболее четкую и полную форму\n     * Пример: ["металлические стойки", "алюминиевые ножки"] → "ножки из металла"\n\n3. **Проверка качества**\n   - **Полнота:** Все исходные признаки должны быть представлены\n   - **Ясность:** Каждая формулировка должна быть однозначной\n   - **Устранение дубликатов:** Повторяющиеся смыслы объединяются\n   - **Техническая точность:** Сохранение функциональных характеристик\n\n4. **Форматирование вывода**\n   - Только нумерованный список\n   - Каждый пункт — одна уникальная каноническая формулировка\n   - Без группировок и подзаголовков\n   - Без дополнительных пояснений\n\n**Пример вывода:**\n1. Ножки из металла\n2. Сиденье из деревянных ламелей\n3. Спинка с регулируемым углом наклона\n4. Шарнирное соединение спинки и сиденья\n5. Фиксатор угла наклона\n\n**Твоя цель:** Создать максимально компактный список, где каждый технический признак представлен единственной четкой формулировкой, объединяющей все семантически эквивалентные варианты из исходных данных.', 'attributes_of_patent_in_db': {'1': 'Понтон катамаранного типа.', '2': 'Одноковшовый экскаватор с обратной лопатой, установленный на понтоне.', '3': 'Обратная лопата, ориентированная в сторону движения траншеекопателя.', '4': 'Две боковые качалки, прикрепленные к понтону.', '5': 'Гидроцилиндры для привода качалок.', '6': 'Самоустанавливающиеся опорные башмаки на боковых качалках.', '7': 'Шарнирное соединение качалок с верхней стенкой понтона.', '8': 'Защитная качалка, расположенная на понтоне.', '9': 'Две щеки на защитной качалке для боковой защиты трубопровода.', '10': 'Две пары направляющих штырей с регулировкой высоты.', '11': 'Передвижной указатель глубины.', '12': 'Механизм опускания опорных башмаков на бровки траншеи.', '13': 'Система послойного снятия грунта экскаватором над трубопроводом.', '14': 'Механизм фиксации защитной качалки по бокам трубопровода.', '15': 'Система разработки грунта ковшом по обе стороны от трубопровода до уровня его оси.', '16': 'Механизм подъема защитной и опорных качалок после завершения участка.', '17': 'Устройство перемещения понтона путем зацепления ковшом за неразработанный грунт.', '18': 'Циклический алгоритм работы с последовательным вскрытием участков трубопровода.'}, 'attributes_of_analog_in_db': {'RU2239027C1': {'1': 'Траншеекопатель содержит понтон.', '2': 'На понтоне установлен рабочий агрегат в виде одноковшового экскаватора с обратной лопатой или его рабочего оборудования.', '3': 'Понтон выполнен в виде катамарана.', '4': 'К понтону прикреплены две качалки.', '5': 'Качалки приводятся в движение силовыми цилиндрами.', '6': 'Качалки несут самоустанавливающиеся опорные башмаки.', '7': 'Обратная лопата обращена в сторону движения траншеекопателя.', '8': 'Шарниры качалок самоустанавливающихся опорных башмаков прикреплены к верхней стенке понтона.', '9': 'Самоустанавливающиеся башмаки сконфигурированы для контакта с бровкой траншеи во время опускания качалок вниз.', '10': 'На передней части понтона установлена качалка для защиты трубопровода.', '11': 'Качалка для защиты трубопровода снабжена двумя щеками.', '12': 'Щеки качалки расположены по обе стороны трубопровода при ее опущенном состоянии.', '13': 'В понтоне размещены две пары направляющих штырей.', '14': 'Направляющие штыри расположены по обе стороны трубопровода.', '15': 'Направляющие штыри имеют возможность регулирования по высоте.'}, 'RU2654879C1': {'1': 'Оболочка, заполненная несущим газом.', '2': 'Гондола.', '3': 'Двигатели.', '4': 'Горизонтальное оперение.', '5': 'Вертикальное оперение.', '6': 'Лебедки с тросами.', '7': 'Балластная платформа, прикрепленная к концам тросов.', '8': 'Бак(и) для жидкого балласта с краном(кранами) на балластной платформе.', '9': 'Насос(ы) на балластной платформе.', '10': 'Шланг(и) на балластной платформе.', '11': 'Кузов(а) для твердого балласта на балластной платформе.', '12': 'Люк(и) в нижней части кузова(ов) для твердого балласта.', '13': 'Устройства для автоматического и/или ручного сбора твердых материалов с поверхности или из-под поверхности земли в месте посадки платформы.', '14': 'Двигатели с изменяемым вектором тяги.', '15': 'Буровые агрегаты на балластной платформе (для п. 2 формулы).', '16': 'Буры буровых агрегатов, фиксирующие платформу при посадке на грунт/песок/снег (для п. 2 формулы).', '17': 'Грузовой(ые) или/и пассажирский(ие) отсек(и) на балластной платформе (для п. 3 формулы). **Признаки изобретения "Способ причаливания дирижабля" (по п. 4 формулы):**', '18': 'Опускание балластной платформы до касания с поверхностью земли или водоема.', '19': 'Наклон вектора тяги двигателей вниз минимум до набора балласта, удерживающего дирижабль от подъема.', '20': 'Накачивание воды в бак(и) для жидкого балласта из аэродромного бака, посадочной площадки или водоема.', '21': 'Наполнение кузова(ов) для твердого балласта материалами с поверхности или из-под поверхности земли.', '22': 'Набор массы балласта, превышающей массу разгружаемых грузов/пассажиров и компенсирующей увеличение архимедовой силы.', '23': 'Притягивание дирижабля к платформе с помощью лебедок и тросов, с возможным использованием наклона вектора тяги.', '24': 'Фиксация оболочки строп-растяжками при длительной стоянке или сильном ветре.'}}}
2025-08-28 10:37:03,637 - app.services.analog.attribute_tool - DEBUG - [attribute_tool.py:126 - _generate_analog_patent_attributes()] - The resulting promt:
Ты — патентный семантический аналитик. Твоя задача — создать единый список уникальных технических признаков из признаков патентов-аналогов, объединяя семантически эквивалентные формулировки.

**Исходные данные:**
- Словарь патентов с их признаками:

{'patent': {'1': 'Понтон катамаранного типа.', '2': 'Одноковшовый экскаватор с обратной лопатой, установленный на понтоне.', '3': 'Обратная лопата, ориентированная в сторону движения траншеекопателя.', '4': 'Две боковые качалки, прикрепленные к понтону.', '5': 'Гидроцилиндры для привода качалок.', '6': 'Самоустанавливающиеся опорные башмаки на боковых качалках.', '7': 'Шарнирное соединение качалок с верхней стенкой понтона.', '8': 'Защитная качалка, расположенная на понтоне.', '9': 'Две щеки на защитной качалке для боковой защиты трубопровода.', '10': 'Две пары направляющих штырей с регулировкой высоты.', '11': 'Передвижной указатель глубины.', '12': 'Механизм опускания опорных башмаков на бровки траншеи.', '13': 'Система послойного снятия грунта экскаватором над трубопроводом.', '14': 'Механизм фиксации защитной качалки по бокам трубопровода.', '15': 'Система разработки грунта ковшом по обе стороны от трубопровода до уровня его оси.', '16': 'Механизм подъема защитной и опорных качалок после завершения участка.', '17': 'Устройство перемещения понтона путем зацепления ковшом за неразработанный грунт.', '18': 'Циклический алгоритм работы с последовательным вскрытием участков трубопровода.'}, 'analog': {'RU2239027C1': {'1': 'Траншеекопатель содержит понтон.', '2': 'На понтоне установлен рабочий агрегат в виде одноковшового экскаватора с обратной лопатой или его рабочего оборудования.', '3': 'Понтон выполнен в виде катамарана.', '4': 'К понтону прикреплены две качалки.', '5': 'Качалки приводятся в движение силовыми цилиндрами.', '6': 'Качалки несут самоустанавливающиеся опорные башмаки.', '7': 'Обратная лопата обращена в сторону движения траншеекопателя.', '8': 'Шарниры качалок самоустанавливающихся опорных башмаков прикреплены к верхней стенке понтона.', '9': 'Самоустанавливающиеся башмаки сконфигурированы для контакта с бровкой траншеи во время опускания качалок вниз.', '10': 'На передней части понтона установлена качалка для защиты трубопровода.', '11': 'Качалка для защиты трубопровода снабжена двумя щеками.', '12': 'Щеки качалки расположены по обе стороны трубопровода при ее опущенном состоянии.', '13': 'В понтоне размещены две пары направляющих штырей.', '14': 'Направляющие штыри расположены по обе стороны трубопровода.', '15': 'Направляющие штыри имеют возможность регулирования по высоте.'}, 'RU2654879C1': {'1': 'Оболочка, заполненная несущим газом.', '2': 'Гондола.', '3': 'Двигатели.', '4': 'Горизонтальное оперение.', '5': 'Вертикальное оперение.', '6': 'Лебедки с тросами.', '7': 'Балластная платформа, прикрепленная к концам тросов.', '8': 'Бак(и) для жидкого балласта с краном(кранами) на балластной платформе.', '9': 'Насос(ы) на балластной платформе.', '10': 'Шланг(и) на балластной платформе.', '11': 'Кузов(а) для твердого балласта на балластной платформе.', '12': 'Люк(и) в нижней части кузова(ов) для твердого балласта.', '13': 'Устройства для автоматического и/или ручного сбора твердых материалов с поверхности или из-под поверхности земли в месте посадки платформы.', '14': 'Двигатели с изменяемым вектором тяги.', '15': 'Буровые агрегаты на балластной платформе (для п. 2 формулы).', '16': 'Буры буровых агрегатов, фиксирующие платформу при посадке на грунт/песок/снег (для п. 2 формулы).', '17': 'Грузовой(ые) или/и пассажирский(ие) отсек(и) на балластной платформе (для п. 3 формулы). **Признаки изобретения "Способ причаливания дирижабля" (по п. 4 формулы):**', '18': 'Опускание балластной платформы до касания с поверхностью земли или водоема.', '19': 'Наклон вектора тяги двигателей вниз минимум до набора балласта, удерживающего дирижабль от подъема.', '20': 'Накачивание воды в бак(и) для жидкого балласта из аэродромного бака, посадочной площадки или водоема.', '21': 'Наполнение кузова(ов) для твердого балласта материалами с поверхности или из-под поверхности земли.', '22': 'Набор массы балласта, превышающей массу разгружаемых грузов/пассажиров и компенсирующей увеличение архимедовой силы.', '23': 'Притягивание дирижабля к платформе с помощью лебедок и тросов, с возможным использованием наклона вектора тяги.', '24': 'Фиксация оболочки строп-растяжками при длительной стоянке или сильном ветре.'}}}

**Инструкции по выполнению:**

1. **Нормализация формулировок**
   - Для каждого признака:
     * Приведи к базовой терминологии:
       - "вертикальные стойки" → "ножки"
       - "опорные элементы" → "ножки"
       - "сидячая поверхность" → "сиденье"
       - "спинная опора" → "спинка"
     * Разделяй составные признаки:
       "ножки с резиновыми накладками" → ["ножки", "противоскользящие элементы"]
     * Удали субъективные оценки ("прочные", "удобные")

2. **Семантическое объединение**
   - Группируй признаки по смыслу:
     * "ножки" = "опорные стойки" = "вертикальные опоры"
     * "шарнир" = "поворотный узел" = "соединение с вращением"
   - Для каждой группы создай ОДНУ каноническую формулировку:
     * Выбирай наиболее четкую и полную форму
     * Пример: ["металлические стойки", "алюминиевые ножки"] → "ножки из металла"

3. **Проверка качества**
   - **Полнота:** Все исходные признаки должны быть представлены
   - **Ясность:** Каждая формулировка должна быть однозначной
   - **Устранение дубликатов:** Повторяющиеся смыслы объединяются
   - **Техническая точность:** Сохранение функциональных характеристик

4. **Форматирование вывода**
   - Только нумерованный список
   - Каждый пункт — одна уникальная каноническая формулировка
   - Без группировок и подзаголовков
   - Без дополнительных пояснений

**Пример вывода:**
1. Ножки из металла
2. Сиденье из деревянных ламелей
3. Спинка с регулируемым углом наклона
4. Шарнирное соединение спинки и сиденья
5. Фиксатор угла наклона

**Твоя цель:** Создать максимально компактный список, где каждый технический признак представлен единственной четкой формулировкой, объединяющей все семантически эквивалентные варианты из исходных данных.
2025-08-28 10:37:03,639 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:37:37,848 - app.services.analog.attribute_tool - DEBUG - [attribute_tool.py:130 - _generate_analog_patent_attributes()] - The resulting:
{1: 'Понтон катамаранного типа.', 2: 'Одноковшовый экскаватор с обратной лопатой.', 3: 'Обратная лопата, ориентированная в сторону движения траншеекопателя.', 4: 'Две боковые качалки, прикрепленные к понтону.', 5: 'Гидроцилиндры для привода качалок.', 6: 'Самоустанавливающиеся опорные башмаки на качалках.', 7: 'Шарнирное соединение качалок с верхней стенкой понтона.', 8: 'Защитная качалка с двумя щеками для боковой защиты трубопровода.', 9: 'Две пары направляющих штырей с регулировкой высоты.', 10: 'Передвижной указатель глубины.', 11: 'Механизм опускания опорных башмаков на бровки траншеи.', 12: 'Система послойного снятия грунта экскаватором над трубопроводом.', 13: 'Механизм фиксации защитной качалки по бокам трубопровода.', 14: 'Система разработки грунта ковшом по обе стороны от трубопровода до уровня его оси.', 15: 'Механизм подъема защитной и опорных качалок.', 16: 'Устройство перемещения понтона зацеплением ковша за грунт.', 17: 'Циклический алгоритм работы с последовательным вскрытием участков трубопровода.', 18: 'Балластная платформа с баками для жидкого балласта, насосами и шлангами.', 19: 'Кузов для твердого балласта с разгрузочными люками.', 20: 'Лебедки с тросами для фиксации платформы.', 21: 'Двигатели с изменяемым вектором тяги.', 22: 'Буровые агрегаты для фиксации платформы на грунте.', 23: 'Грузовые/пассажирские отсеки на балластной платформе.', 24: 'Система набора балласта, превышающего массу разгружаемых грузов.', 25: 'Устройство притягивания дирижабля к платформе лебедками и тросами.', 26: 'Строп-растяжки для фиксации оболочки дирижабля. **Примечание:** Признаки 18-26 относятся к патентам на дирижабли (RU2654879C1) и технически не пересекаются с остальными, поэтому оставлены как уникальные.'}
2025-08-28 10:37:37,849 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:37:37,850 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:37:37,852 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:37:37,853 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:37:37,854 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:37:37,856 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:37:37,857 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:37:37,866 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:37:37,867 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:37:37,874 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:37:37,875 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:37:37,876 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:37:37,877 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:37:37,879 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:37:38,788 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:37:38,789 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:184 - process_one()] - LLM request failed for analog: RU2654879C1
2025-08-28 10:37:38,814 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:37:38,815 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:184 - process_one()] - LLM request failed for analog: RU195243U1
2025-08-28 10:37:38,858 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:37:38,859 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:184 - process_one()] - LLM request failed for analog: RU2239027C1
2025-08-28 10:37:39,222 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:37:39,223 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:184 - process_one()] - LLM request failed for analog: RU2268840C2
2025-08-28 10:37:39,224 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:37:39,225 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:37:39,226 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:37:39,228 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:37:39,229 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:37:39,230 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:37:39,231 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:37:39,245 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:37:39,246 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:37:39,955 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:37:39,956 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:37:39,956 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:37:39,958 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:37:39,959 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:37:39,960 - app.services.analog.analog - INFO - [analog.py:70 - generate_statistics()] - The attribute matching was successful
2025-08-28 10:37:39,961 - app.http.routes.analog - INFO - [analog.py:52 - generate_statistics_for_analogues()] - Request to receive analogues successful
2025-08-28 10:37:57,482 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:37:57,484 - app.http.routes.analog - INFO - [analog.py:120 - get_statistics_analog_xlsx()] - Request to receive statistics table
2025-08-28 10:37:57,485 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:37:57,486 - app.services.analog.analog - INFO - [analog.py:114 - get_statistics_xlsx()] - Star get_statistics_xlsx
2025-08-28 10:37:57,487 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:37:57,487 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:37:57,489 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:37:57,490 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:37:57,499 - app.services.db - WARNING - [db.py:27 - get_from_db_json()] - Json file does not contain a dictionary
2025-08-28 10:37:57,500 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:37:57,502 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:37:57,502 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:37:57,503 - app.services.analog.table_generator - INFO - [table_generator.py:183 - generate_statistics_xlsx()] - Star generate_statistics_xlsx
2025-08-28 10:37:57,505 - app.services.analog.table_generator - ERROR - [table_generator.py:233 - generate_statistics_xlsx()] - division by zero
2025-08-28 10:37:57,506 - app.http.routes.analog - ERROR - [analog.py:131 - get_statistics_analog_xlsx()] - No statistics found for patent
2025-08-28 10:38:05,811 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:38:05,812 - app.http.routes.analog - INFO - [analog.py:120 - get_statistics_analog_xlsx()] - Request to receive statistics table
2025-08-28 10:38:05,813 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:38:05,814 - app.services.analog.analog - INFO - [analog.py:114 - get_statistics_xlsx()] - Star get_statistics_xlsx
2025-08-28 10:38:05,815 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:38:05,816 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:38:05,817 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:38:05,818 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:38:05,820 - app.services.db - WARNING - [db.py:27 - get_from_db_json()] - Json file does not contain a dictionary
2025-08-28 10:38:05,821 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:38:05,822 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:38:05,823 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:38:05,824 - app.services.analog.table_generator - INFO - [table_generator.py:183 - generate_statistics_xlsx()] - Star generate_statistics_xlsx
2025-08-28 10:38:05,826 - app.services.analog.table_generator - ERROR - [table_generator.py:233 - generate_statistics_xlsx()] - division by zero
2025-08-28 10:38:05,826 - app.http.routes.analog - ERROR - [analog.py:131 - get_statistics_analog_xlsx()] - No statistics found for patent
2025-08-28 10:38:09,839 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:38:09,840 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:38:09,841 - app.services.analog.analog - INFO - [analog.py:66 - generate_statistics()] - Star generate_statistics
2025-08-28 10:38:09,842 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:38:09,843 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:38:09,844 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:38:09,845 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:38:09,847 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:38:09,847 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:38:09,849 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:38:09,849 - app.services.analog.attribute_tool - DEBUG - [attribute_tool.py:115 - _generate_analog_patent_attributes()] - Response from get_analog_patent_attributes_data success: True
2025-08-28 10:38:09,850 - app.services.analog.attribute_tool - DEBUG - [attribute_tool.py:116 - _generate_analog_patent_attributes()] - Response from get_analog_patent_attributes_data data: {'attribute_matcher_prompt_template': 'Ты — патентный семантический аналитик. Твоя задача — создать единый список уникальных технических признаков из признаков патентов-аналогов, объединяя семантически эквивалентные формулировки.\n\n**Исходные данные:**\n- Словарь патентов с их признаками:\n\n{patents_dict}\n\n**Инструкции по выполнению:**\n\n1. **Нормализация формулировок**\n   - Для каждого признака:\n     * Приведи к базовой терминологии:\n       - "вертикальные стойки" → "ножки"\n       - "опорные элементы" → "ножки"\n       - "сидячая поверхность" → "сиденье"\n       - "спинная опора" → "спинка"\n     * Разделяй составные признаки:\n       "ножки с резиновыми накладками" → ["ножки", "противоскользящие элементы"]\n     * Удали субъективные оценки ("прочные", "удобные")\n\n2. **Семантическое объединение**\n   - Группируй признаки по смыслу:\n     * "ножки" = "опорные стойки" = "вертикальные опоры"\n     * "шарнир" = "поворотный узел" = "соединение с вращением"\n   - Для каждой группы создай ОДНУ каноническую формулировку:\n     * Выбирай наиболее четкую и полную форму\n     * Пример: ["металлические стойки", "алюминиевые ножки"] → "ножки из металла"\n\n3. **Проверка качества**\n   - **Полнота:** Все исходные признаки должны быть представлены\n   - **Ясность:** Каждая формулировка должна быть однозначной\n   - **Устранение дубликатов:** Повторяющиеся смыслы объединяются\n   - **Техническая точность:** Сохранение функциональных характеристик\n\n4. **Форматирование вывода**\n   - Только нумерованный список\n   - Каждый пункт — одна уникальная каноническая формулировка\n   - Без группировок и подзаголовков\n   - Без дополнительных пояснений\n\n**Пример вывода:**\n1. Ножки из металла\n2. Сиденье из деревянных ламелей\n3. Спинка с регулируемым углом наклона\n4. Шарнирное соединение спинки и сиденья\n5. Фиксатор угла наклона\n\n**Твоя цель:** Создать максимально компактный список, где каждый технический признак представлен единственной четкой формулировкой, объединяющей все семантически эквивалентные варианты из исходных данных.', 'attributes_of_patent_in_db': {'1': 'Понтон катамаранного типа.', '2': 'Одноковшовый экскаватор с обратной лопатой, установленный на понтоне.', '3': 'Обратная лопата, ориентированная в сторону движения траншеекопателя.', '4': 'Две боковые качалки, прикрепленные к понтону.', '5': 'Гидроцилиндры для привода качалок.', '6': 'Самоустанавливающиеся опорные башмаки на боковых качалках.', '7': 'Шарнирное соединение качалок с верхней стенкой понтона.', '8': 'Защитная качалка, расположенная на понтоне.', '9': 'Две щеки на защитной качалке для боковой защиты трубопровода.', '10': 'Две пары направляющих штырей с регулировкой высоты.', '11': 'Передвижной указатель глубины.', '12': 'Механизм опускания опорных башмаков на бровки траншеи.', '13': 'Система послойного снятия грунта экскаватором над трубопроводом.', '14': 'Механизм фиксации защитной качалки по бокам трубопровода.', '15': 'Система разработки грунта ковшом по обе стороны от трубопровода до уровня его оси.', '16': 'Механизм подъема защитной и опорных качалок после завершения участка.', '17': 'Устройство перемещения понтона путем зацепления ковшом за неразработанный грунт.', '18': 'Циклический алгоритм работы с последовательным вскрытием участков трубопровода.'}, 'attributes_of_analog_in_db': {'RU2239027C1': {'1': 'Траншеекопатель содержит понтон.', '2': 'На понтоне установлен рабочий агрегат в виде одноковшового экскаватора с обратной лопатой или его рабочего оборудования.', '3': 'Понтон выполнен в виде катамарана.', '4': 'К понтону прикреплены две качалки.', '5': 'Качалки приводятся в движение силовыми цилиндрами.', '6': 'Качалки несут самоустанавливающиеся опорные башмаки.', '7': 'Обратная лопата обращена в сторону движения траншеекопателя.', '8': 'Шарниры качалок самоустанавливающихся опорных башмаков прикреплены к верхней стенке понтона.', '9': 'Самоустанавливающиеся башмаки сконфигурированы для контакта с бровкой траншеи во время опускания качалок вниз.', '10': 'На передней части понтона установлена качалка для защиты трубопровода.', '11': 'Качалка для защиты трубопровода снабжена двумя щеками.', '12': 'Щеки качалки расположены по обе стороны трубопровода при ее опущенном состоянии.', '13': 'В понтоне размещены две пары направляющих штырей.', '14': 'Направляющие штыри расположены по обе стороны трубопровода.', '15': 'Направляющие штыри имеют возможность регулирования по высоте.'}, 'RU2654879C1': {'1': 'Оболочка, заполненная несущим газом.', '2': 'Гондола.', '3': 'Двигатели.', '4': 'Горизонтальное оперение.', '5': 'Вертикальное оперение.', '6': 'Лебедки с тросами.', '7': 'Балластная платформа, прикрепленная к концам тросов.', '8': 'Бак(и) для жидкого балласта с краном(кранами) на балластной платформе.', '9': 'Насос(ы) на балластной платформе.', '10': 'Шланг(и) на балластной платформе.', '11': 'Кузов(а) для твердого балласта на балластной платформе.', '12': 'Люк(и) в нижней части кузова(ов) для твердого балласта.', '13': 'Устройства для автоматического и/или ручного сбора твердых материалов с поверхности или из-под поверхности земли в месте посадки платформы.', '14': 'Двигатели с изменяемым вектором тяги.', '15': 'Буровые агрегаты на балластной платформе (для п. 2 формулы).', '16': 'Буры буровых агрегатов, фиксирующие платформу при посадке на грунт/песок/снег (для п. 2 формулы).', '17': 'Грузовой(ые) или/и пассажирский(ие) отсек(и) на балластной платформе (для п. 3 формулы). **Признаки изобретения "Способ причаливания дирижабля" (по п. 4 формулы):**', '18': 'Опускание балластной платформы до касания с поверхностью земли или водоема.', '19': 'Наклон вектора тяги двигателей вниз минимум до набора балласта, удерживающего дирижабль от подъема.', '20': 'Накачивание воды в бак(и) для жидкого балласта из аэродромного бака, посадочной площадки или водоема.', '21': 'Наполнение кузова(ов) для твердого балласта материалами с поверхности или из-под поверхности земли.', '22': 'Набор массы балласта, превышающей массу разгружаемых грузов/пассажиров и компенсирующей увеличение архимедовой силы.', '23': 'Притягивание дирижабля к платформе с помощью лебедок и тросов, с возможным использованием наклона вектора тяги.', '24': 'Фиксация оболочки строп-растяжками при длительной стоянке или сильном ветре.'}}}
2025-08-28 10:38:09,852 - app.services.analog.attribute_tool - DEBUG - [attribute_tool.py:126 - _generate_analog_patent_attributes()] - The resulting promt:
Ты — патентный семантический аналитик. Твоя задача — создать единый список уникальных технических признаков из признаков патентов-аналогов, объединяя семантически эквивалентные формулировки.

**Исходные данные:**
- Словарь патентов с их признаками:

{'patent': {'1': 'Понтон катамаранного типа.', '2': 'Одноковшовый экскаватор с обратной лопатой, установленный на понтоне.', '3': 'Обратная лопата, ориентированная в сторону движения траншеекопателя.', '4': 'Две боковые качалки, прикрепленные к понтону.', '5': 'Гидроцилиндры для привода качалок.', '6': 'Самоустанавливающиеся опорные башмаки на боковых качалках.', '7': 'Шарнирное соединение качалок с верхней стенкой понтона.', '8': 'Защитная качалка, расположенная на понтоне.', '9': 'Две щеки на защитной качалке для боковой защиты трубопровода.', '10': 'Две пары направляющих штырей с регулировкой высоты.', '11': 'Передвижной указатель глубины.', '12': 'Механизм опускания опорных башмаков на бровки траншеи.', '13': 'Система послойного снятия грунта экскаватором над трубопроводом.', '14': 'Механизм фиксации защитной качалки по бокам трубопровода.', '15': 'Система разработки грунта ковшом по обе стороны от трубопровода до уровня его оси.', '16': 'Механизм подъема защитной и опорных качалок после завершения участка.', '17': 'Устройство перемещения понтона путем зацепления ковшом за неразработанный грунт.', '18': 'Циклический алгоритм работы с последовательным вскрытием участков трубопровода.'}, 'analog': {'RU2239027C1': {'1': 'Траншеекопатель содержит понтон.', '2': 'На понтоне установлен рабочий агрегат в виде одноковшового экскаватора с обратной лопатой или его рабочего оборудования.', '3': 'Понтон выполнен в виде катамарана.', '4': 'К понтону прикреплены две качалки.', '5': 'Качалки приводятся в движение силовыми цилиндрами.', '6': 'Качалки несут самоустанавливающиеся опорные башмаки.', '7': 'Обратная лопата обращена в сторону движения траншеекопателя.', '8': 'Шарниры качалок самоустанавливающихся опорных башмаков прикреплены к верхней стенке понтона.', '9': 'Самоустанавливающиеся башмаки сконфигурированы для контакта с бровкой траншеи во время опускания качалок вниз.', '10': 'На передней части понтона установлена качалка для защиты трубопровода.', '11': 'Качалка для защиты трубопровода снабжена двумя щеками.', '12': 'Щеки качалки расположены по обе стороны трубопровода при ее опущенном состоянии.', '13': 'В понтоне размещены две пары направляющих штырей.', '14': 'Направляющие штыри расположены по обе стороны трубопровода.', '15': 'Направляющие штыри имеют возможность регулирования по высоте.'}, 'RU2654879C1': {'1': 'Оболочка, заполненная несущим газом.', '2': 'Гондола.', '3': 'Двигатели.', '4': 'Горизонтальное оперение.', '5': 'Вертикальное оперение.', '6': 'Лебедки с тросами.', '7': 'Балластная платформа, прикрепленная к концам тросов.', '8': 'Бак(и) для жидкого балласта с краном(кранами) на балластной платформе.', '9': 'Насос(ы) на балластной платформе.', '10': 'Шланг(и) на балластной платформе.', '11': 'Кузов(а) для твердого балласта на балластной платформе.', '12': 'Люк(и) в нижней части кузова(ов) для твердого балласта.', '13': 'Устройства для автоматического и/или ручного сбора твердых материалов с поверхности или из-под поверхности земли в месте посадки платформы.', '14': 'Двигатели с изменяемым вектором тяги.', '15': 'Буровые агрегаты на балластной платформе (для п. 2 формулы).', '16': 'Буры буровых агрегатов, фиксирующие платформу при посадке на грунт/песок/снег (для п. 2 формулы).', '17': 'Грузовой(ые) или/и пассажирский(ие) отсек(и) на балластной платформе (для п. 3 формулы). **Признаки изобретения "Способ причаливания дирижабля" (по п. 4 формулы):**', '18': 'Опускание балластной платформы до касания с поверхностью земли или водоема.', '19': 'Наклон вектора тяги двигателей вниз минимум до набора балласта, удерживающего дирижабль от подъема.', '20': 'Накачивание воды в бак(и) для жидкого балласта из аэродромного бака, посадочной площадки или водоема.', '21': 'Наполнение кузова(ов) для твердого балласта материалами с поверхности или из-под поверхности земли.', '22': 'Набор массы балласта, превышающей массу разгружаемых грузов/пассажиров и компенсирующей увеличение архимедовой силы.', '23': 'Притягивание дирижабля к платформе с помощью лебедок и тросов, с возможным использованием наклона вектора тяги.', '24': 'Фиксация оболочки строп-растяжками при длительной стоянке или сильном ветре.'}}}

**Инструкции по выполнению:**

1. **Нормализация формулировок**
   - Для каждого признака:
     * Приведи к базовой терминологии:
       - "вертикальные стойки" → "ножки"
       - "опорные элементы" → "ножки"
       - "сидячая поверхность" → "сиденье"
       - "спинная опора" → "спинка"
     * Разделяй составные признаки:
       "ножки с резиновыми накладками" → ["ножки", "противоскользящие элементы"]
     * Удали субъективные оценки ("прочные", "удобные")

2. **Семантическое объединение**
   - Группируй признаки по смыслу:
     * "ножки" = "опорные стойки" = "вертикальные опоры"
     * "шарнир" = "поворотный узел" = "соединение с вращением"
   - Для каждой группы создай ОДНУ каноническую формулировку:
     * Выбирай наиболее четкую и полную форму
     * Пример: ["металлические стойки", "алюминиевые ножки"] → "ножки из металла"

3. **Проверка качества**
   - **Полнота:** Все исходные признаки должны быть представлены
   - **Ясность:** Каждая формулировка должна быть однозначной
   - **Устранение дубликатов:** Повторяющиеся смыслы объединяются
   - **Техническая точность:** Сохранение функциональных характеристик

4. **Форматирование вывода**
   - Только нумерованный список
   - Каждый пункт — одна уникальная каноническая формулировка
   - Без группировок и подзаголовков
   - Без дополнительных пояснений

**Пример вывода:**
1. Ножки из металла
2. Сиденье из деревянных ламелей
3. Спинка с регулируемым углом наклона
4. Шарнирное соединение спинки и сиденья
5. Фиксатор угла наклона

**Твоя цель:** Создать максимально компактный список, где каждый технический признак представлен единственной четкой формулировкой, объединяющей все семантически эквивалентные варианты из исходных данных.
2025-08-28 10:38:09,854 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:38:45,993 - app.services.analog.attribute_tool - DEBUG - [attribute_tool.py:130 - _generate_analog_patent_attributes()] - The resulting:
{1: 'Понтон катамаранного типа.', 2: 'Одноковшовый экскаватор с обратной лопатой, установленный на понтоне.', 3: 'Обратная лопата, ориентированная в сторону движения траншеекопателя.', 4: 'Две боковые качалки, прикрепленные к понтону.', 5: 'Гидроцилиндры для привода качалок.', 6: 'Самоустанавливающиеся опорные башмаки на боковых качалках, контактирующие с бровкой траншеи при опускании.', 7: 'Шарнирное соединение качалок с верхней стенкой понтона.', 8: 'Защитная качалка на понтоне с двумя щеками для боковой защиты трубопровода.', 9: 'Две пары регулируемых по высоте направляющих штырей.', 10: 'Передвижной указатель глубины.', 11: 'Механизм опускания опорных башмаков на бровки траншеи.', 12: 'Система послойного снятия грунта экскаватором над трубопроводом.', 13: 'Механизм фиксации защитной качалки по бокам трубопровода.', 14: 'Система разработки грунта ковшом по обе стороны от трубопровода до уровня его оси.', 15: 'Механизм подъема защитной и опорных качалок после завершения работ.', 16: 'Устройство перемещения понтона за счет зацепления ковшом за неразработанный грунт.', 17: 'Циклический алгоритм работы с последовательным вскрытием участков трубопровода.', 18: 'Балластная платформа с баками для жидкого балласта, кузовами для твердого балласта и лебедками с тросами.', 19: 'Двигатели с изменяемым вектором тяги на балластной платформе.', 20: 'Буровые агрегаты с фиксирующими грунт бурами на платформе.', 21: 'Грузовые/пассажирские отсеки на балластной платформе.', 22: 'Оболочка, заполненная несущим газом, с гондолой, горизонтальным и вертикальным оперением.', 23: 'Система набора балласта, включая забор воды и твердых материалов, для компенсации архимедовой силы.', 24: 'Устройство притягивания дирижабля к платформе с помощью лебедок и тросов.', 25: 'Строп-растяжки для фиксации оболочки при стоянке или ветре.'}
2025-08-28 10:38:45,994 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:38:45,995 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:38:45,996 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:38:45,997 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:38:45,998 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:38:46,000 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:38:46,001 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:38:46,010 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:38:46,011 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:38:46,013 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:38:46,014 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:38:46,015 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:38:46,017 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:38:46,018 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:38:46,990 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:38:46,991 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:184 - process_one()] - LLM request failed for analog: RU2239027C1
2025-08-28 10:38:47,023 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:38:47,024 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:184 - process_one()] - LLM request failed for analog: RU2268840C2
2025-08-28 10:38:47,083 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:38:47,084 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:184 - process_one()] - LLM request failed for analog: RU195243U1
2025-08-28 10:38:47,119 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:38:47,120 - app.services.analog.attribute_tool - ERROR - [attribute_tool.py:184 - process_one()] - LLM request failed for analog: RU2654879C1
2025-08-28 10:38:47,121 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:38:47,122 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:38:47,123 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:38:47,124 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:38:47,125 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:38:47,127 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:38:47,127 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:38:47,129 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:38:47,130 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:38:47,883 - app.clients.client_llm_client - ERROR - [client_llm_client.py:47 - ask()] - Request error 502
2025-08-28 10:38:47,884 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 10:38:47,884 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 10:38:47,885 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 10:38:47,887 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 10:38:47,888 - app.services.analog.analog - INFO - [analog.py:70 - generate_statistics()] - The attribute matching was successful
2025-08-28 10:38:47,889 - app.http.routes.analog - INFO - [analog.py:52 - generate_statistics_for_analogues()] - Request to receive analogues successful
2025-08-28 10:45:15,203 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-28 10:47:26,133 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-28 10:53:14,370 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-28 10:53:42,637 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-28 10:56:02,626 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:56:02,628 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-28 10:56:02,628 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:56:02,629 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:56:02,632 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:56:02,633 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-28 10:56:13,301 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:56:13,303 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:56:13,304 - app.services.analog.analog - INFO - [analog.py:51 - matching_attributes()] - Star matching_attributes
2025-08-28 10:56:13,305 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:56:13,305 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:56:13,307 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:56:13,308 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:56:13,309 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:56:13,310 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:56:13,313 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 10:56:14,372 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 502 36
2025-08-28 10:56:58,975 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:56:58,977 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:56:58,978 - app.services.analog.analog - INFO - [analog.py:51 - matching_attributes()] - Star matching_attributes
2025-08-28 10:56:58,978 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:56:58,979 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:56:58,981 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:56:58,982 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:56:58,983 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:56:58,984 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:56:58,986 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 10:57:00,544 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 502 36
2025-08-28 10:57:33,585 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 10:57:33,587 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 10:57:33,588 - app.services.analog.analog - INFO - [analog.py:51 - matching_attributes()] - Star matching_attributes
2025-08-28 10:57:33,589 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 10:57:33,590 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 10:57:33,591 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 10:57:33,592 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 10:57:33,594 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 10:57:33,595 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 10:57:33,596 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 10:57:34,624 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 502 36
2025-08-28 11:08:02,713 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:08:02,715 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:08:02,716 - app.services.analog.analog - INFO - [analog.py:51 - matching_attributes()] - Star matching_attributes
2025-08-28 11:08:02,717 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:08:02,718 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:08:02,719 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:08:02,720 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 11:08:02,722 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 11:08:02,723 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 11:08:02,725 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 11:08:04,028 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 502 36
2025-08-28 11:11:15,167 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:11:15,168 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:11:15,170 - app.services.analog.analog - INFO - [analog.py:51 - matching_attributes()] - Star matching_attributes
2025-08-28 11:11:15,171 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:11:15,171 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:11:15,173 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:11:15,174 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 11:11:15,176 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 11:11:15,177 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 11:11:15,179 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 11:11:16,515 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 502 36
2025-08-28 11:12:57,167 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-28 11:13:20,670 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:13:20,672 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-28 11:13:20,673 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:13:20,673 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:13:20,685 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:13:20,686 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-28 11:13:27,585 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:13:27,586 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:13:27,587 - app.services.analog.analog - INFO - [analog.py:51 - matching_attributes()] - Star matching_attributes
2025-08-28 11:13:27,588 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:13:27,589 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:13:27,599 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:13:27,600 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 11:13:27,608 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 11:13:27,609 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 11:13:27,612 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 11:13:28,588 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 502 36
2025-08-28 11:15:03,571 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-28 11:15:38,598 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:15:38,599 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-28 11:15:38,600 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:15:38,601 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:15:38,604 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:15:38,604 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-28 11:15:46,463 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:15:46,465 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:15:46,465 - app.services.analog.analog - INFO - [analog.py:51 - matching_attributes()] - Star matching_attributes
2025-08-28 11:15:46,466 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:15:46,467 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:15:46,469 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:15:46,469 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 11:15:46,471 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 11:15:46,472 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 11:15:46,474 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 11:16:16,600 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 3847
2025-08-28 11:16:16,601 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-28 11:16:16,602 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 11:16:16,602 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:16:16,603 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:16:16,605 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 11:16:16,606 - app.services.analog.analog - INFO - [analog.py:55 - matching_attributes()] - The attribute matching was successful
2025-08-28 11:16:16,607 - app.http.routes.analog - INFO - [analog.py:36 - matching_attributes()] - Request to receive analogues successful
2025-08-28 11:22:36,386 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:22:36,387 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-08-28 11:22:36,388 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-08-28 11:22:36,389 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:22:36,390 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:22:36,391 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 11:22:36,392 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:22:36,393 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:22:36,394 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 11:22:36,395 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-08-28 11:22:36,395 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-08-28 11:23:08,349 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:23:08,351 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 11:23:08,352 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 11:23:08,353 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 11:23:08,353 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:23:08,355 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:23:08,356 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 11:23:08,356 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:23:08,357 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:23:08,359 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 11:23:08,359 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 11:23:14,336 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:23:14,338 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:23:14,339 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 11:23:14,340 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:23:14,340 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 11:23:14,341 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 11:23:14,341 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 11:23:14,345 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 11:24:05,105 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 500 36
2025-08-28 11:24:13,729 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:24:13,730 - app.http.routes.analog - INFO - [analog.py:84 - get_analogues_xlsx()] - Request to receive analogues table xlsx
2025-08-28 11:24:13,731 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:24:13,732 - app.services.analog.analog - INFO - [analog.py:98 - get_analogues_xlsx()] - Star get_analog_xlsx
2025-08-28 11:24:13,733 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:24:13,733 - app.services.analog.table_generator - INFO - [table_generator.py:75 - generate_analogs_xlsx()] - Star generate_analogs_csv
2025-08-28 11:24:13,734 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:24:13,735 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:24:13,736 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:24:13,738 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:24:13,738 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:24:13,739 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:24:13,741 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:24:13,742 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:24:13,742 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:24:13,744 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:24:13,744 - app.http.routes.analog - ERROR - [analog.py:95 - get_analogues_xlsx()] - No analogues found for patent
2025-08-28 11:24:56,922 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:24:56,924 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:24:56,925 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 11:24:56,926 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:24:56,926 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 11:24:56,927 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 11:24:56,927 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 11:24:56,929 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 11:24:58,713 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 200 1127
2025-08-28 11:24:58,714 - app.clients.parser_client - DEBUG - [parser_client.py:34 - generate_analog_link()] - The polling process of the parser ended in success
2025-08-28 11:24:58,715 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 11:24:58,715 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:24:58,716 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:24:58,718 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 11:24:58,719 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 11:24:58,721 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 11:28:07,280 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:28:07,282 - app.http.routes.analog - INFO - [analog.py:84 - get_analogues_xlsx()] - Request to receive analogues table xlsx
2025-08-28 11:28:07,283 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:28:07,284 - app.services.analog.analog - INFO - [analog.py:98 - get_analogues_xlsx()] - Star get_analog_xlsx
2025-08-28 11:28:07,285 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:28:07,285 - app.services.analog.table_generator - INFO - [table_generator.py:75 - generate_analogs_xlsx()] - Star generate_analogs_csv
2025-08-28 11:28:07,286 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:28:07,287 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:28:07,288 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:28:07,289 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:28:07,292 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:28:07,293 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:28:07,294 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:28:07,295 - app.http.routes.analog - ERROR - [analog.py:95 - get_analogues_xlsx()] - No analogues found for patent
2025-08-28 11:29:01,989 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:29:01,990 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-28 11:29:01,991 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:29:01,991 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:29:01,993 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:29:01,994 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-28 11:31:11,419 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:31:11,420 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:31:11,421 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 11:31:11,422 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:31:11,423 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 11:31:11,423 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 11:31:11,424 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 11:31:11,426 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 11:32:01,939 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 500 36
2025-08-28 11:32:07,987 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:32:07,989 - app.http.routes.analog - INFO - [analog.py:84 - get_analogues_xlsx()] - Request to receive analogues table xlsx
2025-08-28 11:32:07,990 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:32:07,991 - app.services.analog.analog - INFO - [analog.py:98 - get_analogues_xlsx()] - Star get_analog_xlsx
2025-08-28 11:32:07,992 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:32:07,992 - app.services.analog.table_generator - INFO - [table_generator.py:75 - generate_analogs_xlsx()] - Star generate_analogs_csv
2025-08-28 11:32:07,993 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:32:07,994 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:32:07,995 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:32:07,996 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:32:07,998 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:32:07,999 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:32:08,000 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:32:08,001 - app.http.routes.analog - ERROR - [analog.py:95 - get_analogues_xlsx()] - No analogues found for patent
2025-08-28 11:32:50,594 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:32:50,595 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-08-28 11:32:50,596 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-08-28 11:32:50,596 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:32:50,598 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:32:50,599 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 11:32:50,599 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:32:50,600 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:32:50,602 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 11:32:50,602 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-08-28 11:32:50,603 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-08-28 11:33:50,285 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:33:50,287 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 11:33:50,287 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 11:33:50,288 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 11:33:50,289 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:33:50,291 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:33:50,291 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 11:33:50,292 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:33:50,293 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:33:50,295 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 11:33:50,295 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 11:33:55,021 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:33:55,023 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:33:55,024 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 11:33:55,024 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:33:55,025 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 11:33:55,026 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 11:33:55,026 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 11:33:55,028 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 11:34:45,541 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 500 36
2025-08-28 11:34:57,614 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:34:57,615 - app.http.routes.analog - INFO - [analog.py:84 - get_analogues_xlsx()] - Request to receive analogues table xlsx
2025-08-28 11:34:57,616 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:34:57,617 - app.services.analog.analog - INFO - [analog.py:98 - get_analogues_xlsx()] - Star get_analog_xlsx
2025-08-28 11:34:57,618 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:34:57,618 - app.services.analog.table_generator - INFO - [table_generator.py:75 - generate_analogs_xlsx()] - Star generate_analogs_csv
2025-08-28 11:34:57,619 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:34:57,620 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:34:57,621 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:34:57,623 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:34:57,623 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:34:57,624 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:34:57,625 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:34:57,626 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:34:57,627 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:34:57,628 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:34:57,629 - app.http.routes.analog - ERROR - [analog.py:95 - get_analogues_xlsx()] - No analogues found for patent
2025-08-28 11:35:26,789 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:35:26,790 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-28 11:35:26,791 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-28 11:35:26,792 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-28 11:35:26,792 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:35:26,794 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:35:26,795 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 11:35:26,795 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:35:26,796 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:35:26,798 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 11:35:26,798 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-28 11:35:32,360 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:35:32,361 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:35:32,362 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Star search_patent_analogues
2025-08-28 11:35:32,363 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:35:32,363 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - analog_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-28 11:35:32,364 - app.clients.parser_client - DEBUG - [parser_client.py:19 - generate_analog_link()] - The polling process of the parser has started
2025-08-28 11:35:32,364 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-28 11:35:32,366 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-28 11:36:22,895 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8009 "POST /parser/invention/analog/link HTTP/1.1" 500 36
2025-08-28 11:43:27,326 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:43:27,328 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:43:27,329 - app.services.analog.analog - INFO - [analog.py:66 - generate_statistics()] - Star generate_statistics
2025-08-28 11:43:27,330 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:43:27,331 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:43:27,333 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:43:27,334 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:43:27,336 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:43:27,337 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 11:43:27,338 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 11:43:27,339 - app.services.analog.attribute_tool - DEBUG - [attribute_tool.py:99 - _generate_analog_patent_attributes()] - Response from get_analog_patent_attributes_data success: True
2025-08-28 11:43:27,340 - app.services.analog.attribute_tool - DEBUG - [attribute_tool.py:100 - _generate_analog_patent_attributes()] - Response from get_analog_patent_attributes_data data: {'attribute_matcher_prompt_template': 'Ты — патентный семантический аналитик. Твоя задача — создать единый список уникальных технических признаков из признаков патентов-аналогов, объединяя семантически эквивалентные формулировки.\n\n**Исходные данные:**\n- Словарь патентов с их признаками:\n\n{patents_dict}\n\n**Инструкции по выполнению:**\n\n1. **Нормализация формулировок**\n   - Для каждого признака:\n     * Приведи к базовой терминологии:\n       - "вертикальные стойки" → "ножки"\n       - "опорные элементы" → "ножки"\n       - "сидячая поверхность" → "сиденье"\n       - "спинная опора" → "спинка"\n     * Разделяй составные признаки:\n       "ножки с резиновыми накладками" → ["ножки", "противоскользящие элементы"]\n     * Удали субъективные оценки ("прочные", "удобные")\n\n2. **Семантическое объединение**\n   - Группируй признаки по смыслу:\n     * "ножки" = "опорные стойки" = "вертикальные опоры"\n     * "шарнир" = "поворотный узел" = "соединение с вращением"\n   - Для каждой группы создай ОДНУ каноническую формулировку:\n     * Выбирай наиболее четкую и полную форму\n     * Пример: ["металлические стойки", "алюминиевые ножки"] → "ножки из металла"\n\n3. **Проверка качества**\n   - **Полнота:** Все исходные признаки должны быть представлены\n   - **Ясность:** Каждая формулировка должна быть однозначной\n   - **Устранение дубликатов:** Повторяющиеся смыслы объединяются\n   - **Техническая точность:** Сохранение функциональных характеристик\n\n4. **Форматирование вывода**\n   - Только нумерованный список\n   - Каждый пункт — одна уникальная каноническая формулировка\n   - Без группировок и подзаголовков\n   - Без дополнительных пояснений\n\n**Пример вывода:**\n1. Ножки из металла\n2. Сиденье из деревянных ламелей\n3. Спинка с регулируемым углом наклона\n4. Шарнирное соединение спинки и сиденья\n5. Фиксатор угла наклона\n\n**Твоя цель:** Создать максимально компактный список, где каждый технический признак представлен единственной четкой формулировкой, объединяющей все семантически эквивалентные варианты из исходных данных.', 'attributes_of_patent_in_db': {'1': 'Понтон катамаранного типа.', '2': 'Одноковшовый экскаватор с обратной лопатой, установленный на понтоне.', '3': 'Обратная лопата, ориентированная в сторону движения траншеекопателя.', '4': 'Две боковые качалки, прикрепленные к понтону.', '5': 'Гидроцилиндры для привода качалок.', '6': 'Самоустанавливающиеся опорные башмаки на боковых качалках.', '7': 'Шарнирное соединение качалок с верхней стенкой понтона.', '8': 'Защитная качалка, расположенная на понтоне.', '9': 'Две щеки на защитной качалке для боковой защиты трубопровода.', '10': 'Две пары направляющих штырей с регулировкой высоты.', '11': 'Передвижной указатель глубины.', '12': 'Механизм опускания опорных башмаков на бровки траншеи.', '13': 'Система послойного снятия грунта экскаватором над трубопроводом.', '14': 'Механизм фиксации защитной качалки по бокам трубопровода.', '15': 'Система разработки грунта ковшом по обе стороны от трубопровода до уровня его оси.', '16': 'Механизм подъема защитной и опорных качалок после завершения участка.', '17': 'Устройство перемещения понтона путем зацепления ковшом за неразработанный грунт.', '18': 'Циклический алгоритм работы с последовательным вскрытием участков трубопровода.'}, 'attributes_of_analog_in_db': {'RU2239027C1': {'1': 'Траншеекопатель содержит понтон.', '2': 'На понтоне установлен рабочий агрегат в виде одноковшового экскаватора с обратной лопатой или его рабочего оборудования.', '3': 'Понтон выполнен в виде катамарана.', '4': 'К понтону прикреплены две качалки.', '5': 'Качалки приводятся в движение силовыми цилиндрами.', '6': 'Качалки несут самоустанавливающиеся опорные башмаки.', '7': 'Обратная лопата обращена в сторону движения траншеекопателя.', '8': 'Шарниры качалок самоустанавливающихся опорных башмаков прикреплены к верхней стенке понтона.', '9': 'Самоустанавливающиеся башмаки сконфигурированы для контакта с бровкой траншеи во время опускания качалок вниз.', '10': 'На передней части понтона установлена качалка для защиты трубопровода.', '11': 'Качалка для защиты трубопровода снабжена двумя щеками.', '12': 'Щеки качалки расположены по обе стороны трубопровода при ее опущенном состоянии.', '13': 'В понтоне размещены две пары направляющих штырей.', '14': 'Направляющие штыри расположены по обе стороны трубопровода.', '15': 'Направляющие штыри имеют возможность регулирования по высоте.'}, 'RU2654879C1': {'1': 'Оболочка, заполненная несущим газом.', '2': 'Гондола.', '3': 'Двигатели.', '4': 'Горизонтальное оперение.', '5': 'Вертикальное оперение.', '6': 'Лебедки с тросами.', '7': 'Балластная платформа, прикрепленная к концам тросов.', '8': 'Бак(и) для жидкого балласта с краном(кранами) на балластной платформе.', '9': 'Насос(ы) на балластной платформе.', '10': 'Шланг(и) на балластной платформе.', '11': 'Кузов(а) для твердого балласта на балластной платформе.', '12': 'Люк(и) в нижней части кузова(ов) для твердого балласта.', '13': 'Устройства для автоматического и/или ручного сбора твердых материалов с поверхности или из-под поверхности земли в месте посадки платформы.', '14': 'Двигатели с изменяемым вектором тяги.', '15': 'Буровые агрегаты на балластной платформе (для п. 2 формулы).', '16': 'Буры буровых агрегатов, фиксирующие платформу при посадке на грунт/песок/снег (для п. 2 формулы).', '17': 'Грузовой(ые) или/и пассажирский(ие) отсек(и) на балластной платформе (для п. 3 формулы). **Признаки изобретения "Способ причаливания дирижабля" (по п. 4 формулы):**', '18': 'Опускание балластной платформы до касания с поверхностью земли или водоема.', '19': 'Наклон вектора тяги двигателей вниз минимум до набора балласта, удерживающего дирижабль от подъема.', '20': 'Накачивание воды в бак(и) для жидкого балласта из аэродромного бака, посадочной площадки или водоема.', '21': 'Наполнение кузова(ов) для твердого балласта материалами с поверхности или из-под поверхности земли.', '22': 'Набор массы балласта, превышающей массу разгружаемых грузов/пассажиров и компенсирующей увеличение архимедовой силы.', '23': 'Притягивание дирижабля к платформе с помощью лебедок и тросов, с возможным использованием наклона вектора тяги.', '24': 'Фиксация оболочки строп-растяжками при длительной стоянке или сильном ветре.'}}}
2025-08-28 11:43:27,342 - app.services.analog.attribute_tool - DEBUG - [attribute_tool.py:110 - _generate_analog_patent_attributes()] - The resulting promt:
Ты — патентный семантический аналитик. Твоя задача — создать единый список уникальных технических признаков из признаков патентов-аналогов, объединяя семантически эквивалентные формулировки.

**Исходные данные:**
- Словарь патентов с их признаками:

{'patent': {'1': 'Понтон катамаранного типа.', '2': 'Одноковшовый экскаватор с обратной лопатой, установленный на понтоне.', '3': 'Обратная лопата, ориентированная в сторону движения траншеекопателя.', '4': 'Две боковые качалки, прикрепленные к понтону.', '5': 'Гидроцилиндры для привода качалок.', '6': 'Самоустанавливающиеся опорные башмаки на боковых качалках.', '7': 'Шарнирное соединение качалок с верхней стенкой понтона.', '8': 'Защитная качалка, расположенная на понтоне.', '9': 'Две щеки на защитной качалке для боковой защиты трубопровода.', '10': 'Две пары направляющих штырей с регулировкой высоты.', '11': 'Передвижной указатель глубины.', '12': 'Механизм опускания опорных башмаков на бровки траншеи.', '13': 'Система послойного снятия грунта экскаватором над трубопроводом.', '14': 'Механизм фиксации защитной качалки по бокам трубопровода.', '15': 'Система разработки грунта ковшом по обе стороны от трубопровода до уровня его оси.', '16': 'Механизм подъема защитной и опорных качалок после завершения участка.', '17': 'Устройство перемещения понтона путем зацепления ковшом за неразработанный грунт.', '18': 'Циклический алгоритм работы с последовательным вскрытием участков трубопровода.'}, 'analog': {'RU2239027C1': {'1': 'Траншеекопатель содержит понтон.', '2': 'На понтоне установлен рабочий агрегат в виде одноковшового экскаватора с обратной лопатой или его рабочего оборудования.', '3': 'Понтон выполнен в виде катамарана.', '4': 'К понтону прикреплены две качалки.', '5': 'Качалки приводятся в движение силовыми цилиндрами.', '6': 'Качалки несут самоустанавливающиеся опорные башмаки.', '7': 'Обратная лопата обращена в сторону движения траншеекопателя.', '8': 'Шарниры качалок самоустанавливающихся опорных башмаков прикреплены к верхней стенке понтона.', '9': 'Самоустанавливающиеся башмаки сконфигурированы для контакта с бровкой траншеи во время опускания качалок вниз.', '10': 'На передней части понтона установлена качалка для защиты трубопровода.', '11': 'Качалка для защиты трубопровода снабжена двумя щеками.', '12': 'Щеки качалки расположены по обе стороны трубопровода при ее опущенном состоянии.', '13': 'В понтоне размещены две пары направляющих штырей.', '14': 'Направляющие штыри расположены по обе стороны трубопровода.', '15': 'Направляющие штыри имеют возможность регулирования по высоте.'}, 'RU2654879C1': {'1': 'Оболочка, заполненная несущим газом.', '2': 'Гондола.', '3': 'Двигатели.', '4': 'Горизонтальное оперение.', '5': 'Вертикальное оперение.', '6': 'Лебедки с тросами.', '7': 'Балластная платформа, прикрепленная к концам тросов.', '8': 'Бак(и) для жидкого балласта с краном(кранами) на балластной платформе.', '9': 'Насос(ы) на балластной платформе.', '10': 'Шланг(и) на балластной платформе.', '11': 'Кузов(а) для твердого балласта на балластной платформе.', '12': 'Люк(и) в нижней части кузова(ов) для твердого балласта.', '13': 'Устройства для автоматического и/или ручного сбора твердых материалов с поверхности или из-под поверхности земли в месте посадки платформы.', '14': 'Двигатели с изменяемым вектором тяги.', '15': 'Буровые агрегаты на балластной платформе (для п. 2 формулы).', '16': 'Буры буровых агрегатов, фиксирующие платформу при посадке на грунт/песок/снег (для п. 2 формулы).', '17': 'Грузовой(ые) или/и пассажирский(ие) отсек(и) на балластной платформе (для п. 3 формулы). **Признаки изобретения "Способ причаливания дирижабля" (по п. 4 формулы):**', '18': 'Опускание балластной платформы до касания с поверхностью земли или водоема.', '19': 'Наклон вектора тяги двигателей вниз минимум до набора балласта, удерживающего дирижабль от подъема.', '20': 'Накачивание воды в бак(и) для жидкого балласта из аэродромного бака, посадочной площадки или водоема.', '21': 'Наполнение кузова(ов) для твердого балласта материалами с поверхности или из-под поверхности земли.', '22': 'Набор массы балласта, превышающей массу разгружаемых грузов/пассажиров и компенсирующей увеличение архимедовой силы.', '23': 'Притягивание дирижабля к платформе с помощью лебедок и тросов, с возможным использованием наклона вектора тяги.', '24': 'Фиксация оболочки строп-растяжками при длительной стоянке или сильном ветре.'}}}

**Инструкции по выполнению:**

1. **Нормализация формулировок**
   - Для каждого признака:
     * Приведи к базовой терминологии:
       - "вертикальные стойки" → "ножки"
       - "опорные элементы" → "ножки"
       - "сидячая поверхность" → "сиденье"
       - "спинная опора" → "спинка"
     * Разделяй составные признаки:
       "ножки с резиновыми накладками" → ["ножки", "противоскользящие элементы"]
     * Удали субъективные оценки ("прочные", "удобные")

2. **Семантическое объединение**
   - Группируй признаки по смыслу:
     * "ножки" = "опорные стойки" = "вертикальные опоры"
     * "шарнир" = "поворотный узел" = "соединение с вращением"
   - Для каждой группы создай ОДНУ каноническую формулировку:
     * Выбирай наиболее четкую и полную форму
     * Пример: ["металлические стойки", "алюминиевые ножки"] → "ножки из металла"

3. **Проверка качества**
   - **Полнота:** Все исходные признаки должны быть представлены
   - **Ясность:** Каждая формулировка должна быть однозначной
   - **Устранение дубликатов:** Повторяющиеся смыслы объединяются
   - **Техническая точность:** Сохранение функциональных характеристик

4. **Форматирование вывода**
   - Только нумерованный список
   - Каждый пункт — одна уникальная каноническая формулировка
   - Без группировок и подзаголовков
   - Без дополнительных пояснений

**Пример вывода:**
1. Ножки из металла
2. Сиденье из деревянных ламелей
3. Спинка с регулируемым углом наклона
4. Шарнирное соединение спинки и сиденья
5. Фиксатор угла наклона

**Твоя цель:** Создать максимально компактный список, где каждый технический признак представлен единственной четкой формулировкой, объединяющей все семантически эквивалентные варианты из исходных данных.
2025-08-28 11:43:27,344 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 11:43:27,346 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 11:44:01,413 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 4752
2025-08-28 11:44:01,414 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-28 11:44:01,415 - app.services.analog.attribute_tool - DEBUG - [attribute_tool.py:114 - _generate_analog_patent_attributes()] - The resulting:
{1: 'Понтон катамаранного типа.', 2: 'Одноковшовый экскаватор с обратной лопатой.', 3: 'Обратная лопата, ориентированная в сторону движения траншеекопателя.', 4: 'Две боковые качалки, прикрепленные к понтону.', 5: 'Гидроцилиндры для привода качалок.', 6: 'Самоустанавливающиеся опорные башмаки на качалках.', 7: 'Шарнирное соединение качалок с верхней стенкой понтона.', 8: 'Защитная качалка, расположенная на понтоне.', 9: 'Две щеки на защитной качалке для боковой защиты трубопровода.', 10: 'Две пары направляющих штырей с регулировкой высоты.', 11: 'Передвижной указатель глубины.', 12: 'Механизм опускания опорных башмаков на бровки траншеи.', 13: 'Система послойного снятия грунта экскаватором над трубопроводом.', 14: 'Механизм фиксации защитной качалки по бокам трубопровода.', 15: 'Система разработки грунта ковшом по обе стороны от трубопровода до уровня его оси.', 16: 'Механизм подъема защитной и опорных качалок после завершения участка.', 17: 'Устройство перемещения понтона путем зацепления ковшом за неразработанный грунт.', 18: 'Циклический алгоритм работы с последовательным вскрытием участков трубопровода.', 19: 'Оболочка, заполненная несущим газом.', 20: 'Гондола.', 21: 'Двигатели.', 22: 'Горизонтальное оперение.', 23: 'Вертикальное оперение.', 24: 'Лебедки с тросами.', 25: 'Балластная платформа, прикрепленная к концам тросов.', 26: 'Бак(и) для жидкого балласта с краном(кранами) на балластной платформе.', 27: 'Насос(ы) на балластной платформе.', 28: 'Шланг(и) на балластной платформе.', 29: 'Кузов(а) для твердого балласта на балластной платформе.', 30: 'Люк(и) в нижней части кузова(ов) для твердого балласта.', 31: 'Устройства для автоматического и/или ручного сбора твердых материалов с поверхности или из-под поверхности земли.', 32: 'Двигатели с изменяемым вектором тяги.', 33: 'Буровые агрегаты на балластной платформе.', 34: 'Буры буровых агрегатов, фиксирующие платформу при посадке на грунт/песок/снег.', 35: 'Грузовой(ые) или/и пассажирский(ие) отсек(и) на балластной платформе.', 36: 'Опускание балластной платформы до касания с поверхностью земли или водоема.', 37: 'Наклон вектора тяги двигателей вниз минимум до набора балласта, удерживающего дирижабль от подъема.', 38: 'Накачивание воды в бак(и) для жидкого балласта из аэродромного бака, посадочной площадки или водоема.', 39: 'Наполнение кузова(ов) для твердого балласта материалами с поверхности или из-под поверхности земли.', 40: 'Набор массы балласта, превышающей массу разгружаемых грузов/пассажиров и компенсирующей увеличение архимедовой силы.', 41: 'Притягивание дирижабля к платформе с помощью лебедок и тросов.', 42: 'Фиксация оболочки строп-растяжками при длительной стоянке или сильном ветре.'}
2025-08-28 11:44:01,416 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 11:44:01,416 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:44:01,417 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:44:01,419 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 11:44:01,420 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:44:01,428 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:44:01,429 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:44:01,438 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:44:01,439 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 11:44:01,446 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 11:44:01,447 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 11:44:01,449 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 11:44:35,414 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 4719
2025-08-28 11:44:35,415 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-28 11:44:35,416 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 11:44:35,418 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 11:45:25,397 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 4719
2025-08-28 11:45:25,398 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-28 11:45:25,399 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 11:45:25,402 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 11:46:13,090 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 4719
2025-08-28 11:46:13,091 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-28 11:46:13,092 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 11:46:13,094 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 11:46:53,170 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 4719
2025-08-28 11:46:53,171 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-28 11:46:53,171 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 11:46:53,172 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:46:53,173 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:46:53,175 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 11:46:53,176 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:46:53,177 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:46:53,178 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 11:46:53,186 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 11:46:53,187 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 11:46:53,189 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 11:47:26,415 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 4677
2025-08-28 11:47:26,416 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-28 11:47:26,417 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 11:47:26,417 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:47:26,419 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:47:26,420 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 11:47:26,421 - app.services.analog.analog - INFO - [analog.py:70 - generate_statistics()] - The attribute matching was successful
2025-08-28 11:47:26,422 - app.http.routes.analog - INFO - [analog.py:52 - generate_statistics_for_analogues()] - Request to receive analogues successful
2025-08-28 11:47:30,151 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:47:30,152 - app.http.routes.analog - INFO - [analog.py:120 - get_statistics_analog_xlsx()] - Request to receive statistics table
2025-08-28 11:47:30,153 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:47:30,154 - app.services.analog.analog - INFO - [analog.py:114 - get_statistics_xlsx()] - Star get_statistics_xlsx
2025-08-28 11:47:30,155 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:47:30,156 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:47:30,157 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:47:30,158 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:47:30,169 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:47:30,169 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:47:30,177 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:47:30,178 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:47:30,178 - app.services.analog.table_generator - INFO - [table_generator.py:183 - generate_statistics_xlsx()] - Star generate_statistics_xlsx
2025-08-28 11:47:30,181 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Понтон катамаранного типа.', '-', '+', '+', '-', '50', '+', '-', '+', '+', '-']
2025-08-28 11:47:30,181 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Одноковшовый экскаватор с обратной лопатой.', '-', '+', '-', '-', '25', '+', '-', '+', '-', '-']
2025-08-28 11:47:30,182 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Обратная лопата, ориентированная в сторону движения траншеекопателя.', '-', '+', '-', '-', '25', '-', '+', '-', '+', '+']
2025-08-28 11:47:30,183 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Две боковые качалки, прикрепленные к понтону.', '-', '+', '-', '-', '25', '+', '-', '+', '-', '-']
2025-08-28 11:47:30,183 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Гидроцилиндры для привода качалок.', '-', '+', '-', '-', '25', '+', '-', '+', '-', '-']
2025-08-28 11:47:30,184 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Самоустанавливающиеся опорные башмаки на качалках.', '-', '+', '-', '-', '25', '+', '-', '+', '-', '-']
2025-08-28 11:47:30,185 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Шарнирное соединение качалок с верхней стенкой понтона.', '-', '+', '-', '-', '25', '-', '+', '-', '+', '+']
2025-08-28 11:47:30,185 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Защитная качалка, расположенная на понтоне.', '-', '+', '-', '-', '25', '+', '-', '+', '-', '-']
2025-08-28 11:47:30,186 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Две щеки на защитной качалке для боковой защиты трубопровода.', '-', '+', '-', '-', '25', '+', '-', '+', '-', '-']
2025-08-28 11:47:30,187 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Две пары направляющих штырей с регулировкой высоты.', '-', '+', '-', '-', '25', '+', '-', '+', '-', '-']
2025-08-28 11:47:30,187 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Передвижной указатель глубины.', '-', '-', '-', '-', '0', '+', '-', '-', '-', '-']
2025-08-28 11:47:30,188 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Механизм опускания опорных башмаков на бровки траншеи.', '-', '+', '-', '-', '25', '+', '-', '+', '-', '-']
2025-08-28 11:47:30,188 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Система послойного снятия грунта экскаватором над трубопроводом.', '-', '-', '-', '-', '0', '+', '-', '-', '-', '-']
2025-08-28 11:47:30,189 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Механизм фиксации защитной качалки по бокам трубопровода.', '-', '-', '-', '-', '0', '+', '-', '-', '-', '-']
2025-08-28 11:47:30,189 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Система разработки грунта ковшом по обе стороны от трубопровода до уровня его оси.', '-', '-', '-', '-', '0', '+', '-', '-', '-', '-']
2025-08-28 11:47:30,190 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Механизм подъема защитной и опорных качалок после завершения участка.', '-', '-', '-', '-', '0', '+', '-', '-', '-', '-']
2025-08-28 11:47:30,191 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Устройство перемещения понтона путем зацепления ковшом за неразработанный грунт.', '-', '-', '-', '-', '0', '+', '-', '-', '-', '-']
2025-08-28 11:47:30,191 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Циклический алгоритм работы с последовательным вскрытием участков трубопровода.', '-', '-', '-', '-', '0', '+', '-', '-', '-', '-']
2025-08-28 11:47:30,192 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Оболочка, заполненная несущим газом.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,193 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Гондола.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,193 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Двигатели.', '+', '-', '-', '+', '50', '-', '-', '+', '+', '-']
2025-08-28 11:47:30,194 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Горизонтальное оперение.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,194 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Вертикальное оперение.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,195 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Лебедки с тросами.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,196 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Балластная платформа, прикрепленная к концам тросов.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,196 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Бак(и) для жидкого балласта с краном(кранами) на балластной платформе.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,197 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Насос(ы) на балластной платформе.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,197 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Шланг(и) на балластной платформе.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,198 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Кузов(а) для твердого балласта на балластной платформе.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,199 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Люк(и) в нижней части кузова(ов) для твердого балласта.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,199 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Устройства для автоматического и/или ручного сбора твердых материалов с поверхности или из-под поверхности земли.', '+', '-', '-', '+', '50', '-', '-', '+', '+', '-']
2025-08-28 11:47:30,200 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Двигатели с изменяемым вектором тяги.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,201 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Буровые агрегаты на балластной платформе.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,201 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Буры буровых агрегатов, фиксирующие платформу при посадке на грунт/песок/снег.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,202 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Грузовой(ые) или/и пассажирский(ие) отсек(и) на балластной платформе.', '+', '-', '-', '+', '50', '-', '-', '+', '+', '-']
2025-08-28 11:47:30,202 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Опускание балластной платформы до касания с поверхностью земли или водоема.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,203 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Наклон вектора тяги двигателей вниз минимум до набора балласта, удерживающего дирижабль от подъема.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,204 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Накачивание воды в бак(и) для жидкого балласта из аэродромного бака, посадочной площадки или водоема.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,204 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Наполнение кузова(ов) для твердого балласта материалами с поверхности или из-под поверхности земли.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,205 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Набор массы балласта, превышающей массу разгружаемых грузов/пассажиров и компенсирующей увеличение архимедовой силы.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,206 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Притягивание дирижабля к платформе с помощью лебедок и тросов.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,206 - app.services.analog.table_generator - DEBUG - [table_generator.py:218 - generate_statistics_xlsx()] - result_row:['Фиксация оболочки строп-растяжками при длительной стоянке или сильном ветре.', '-', '-', '-', '+', '25', '-', '+', '+', '+', '-']
2025-08-28 11:47:30,231 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 11:47:30,232 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:47:30,233 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:47:30,235 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 11:47:30,236 - app.http.routes.analog - INFO - [analog.py:124 - get_statistics_analog_xlsx()] - Request to receive statistics successful
2025-08-28 11:48:00,470 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-28 11:48:00,472 - app.http.routes.analog - INFO - [analog.py:198 - create_upidp()] - Request to receive analogues
2025-08-28 11:48:00,473 - app.services.analog.analog - INFO - [analog.py:81 - identify_analog()] - Star identify_analog
2025-08-28 11:48:00,474 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-28 11:48:00,474 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-28 11:48:00,476 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-28 11:48:00,477 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 11:48:00,487 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 11:48:00,488 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 11:48:00,489 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 11:48:00,490 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-28 11:48:00,539 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-28 11:48:00,540 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-28 11:48:00,542 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-28 11:49:24,863 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 9677
2025-08-28 11:49:24,864 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-28 11:49:24,865 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-28 11:49:24,865 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-28 11:49:24,889 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-28 11:49:24,891 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-28 11:49:24,891 - app.http.routes.analog - INFO - [analog.py:141 - search_patent_analogues()] - Request analog successful
2025-08-29 00:58:05,802 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 00:58:19,608 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 00:58:19,621 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 00:58:19,622 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 00:58:19,622 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 00:58:19,650 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 00:58:19,651 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 01:19:55,935 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 01:35:55,269 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 01:42:04,719 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 01:42:52,805 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 01:44:04,510 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 01:48:50,855 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 05:50:46,858 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 05:59:07,832 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 05:59:07,844 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 05:59:07,845 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 05:59:07,845 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 05:59:07,865 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 05:59:07,866 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 06:05:53,602 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:05:53,603 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 06:05:53,604 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:07:19,188 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:07:19,189 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 06:07:19,190 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:07:30,659 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:07:30,661 - app.http.routes.analog - INFO - [analog.py:202 - create_upidp()] - Request to receive analogues
2025-08-29 06:07:30,662 - app.http.routes.analog - INFO - [analog.py:26 - search_patent_analogues()] - Search for analogues started successfully
2025-08-29 06:08:53,159 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 06:09:27,544 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:09:27,546 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 06:09:27,547 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:09:27,547 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 06:09:27,550 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 06:09:27,551 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 06:09:36,416 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:09:36,418 - app.http.routes.analog - INFO - [analog.py:203 - create_upidp()] - Request to receive analogues
2025-08-29 06:09:36,419 - app.http.routes.analog - INFO - [analog.py:27 - search_patent_analogues()] - Search for analogues started successfully
2025-08-29 06:13:54,363 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:13:54,365 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 06:13:54,366 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:14:01,980 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:14:01,982 - app.http.routes.analog - INFO - [analog.py:203 - create_upidp()] - Request to receive analogues
2025-08-29 06:14:01,983 - app.http.routes.analog - INFO - [analog.py:27 - search_patent_analogues()] - Search for analogues started successfully
2025-08-29 06:32:46,532 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 06:32:51,063 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:32:51,065 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 06:32:51,065 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:32:51,066 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 06:32:51,069 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 06:32:51,070 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 06:33:02,072 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:33:02,074 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 06:33:02,075 - app.services.analog.analog - INFO - [analog.py:22 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 06:34:07,993 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 06:34:50,424 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:34:50,426 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 06:34:50,426 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:34:50,427 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 06:34:50,430 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 06:34:50,431 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 06:34:57,554 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:34:57,555 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 06:34:57,557 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 06:34:57,558 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:34:57,559 - app.services.analog.analog - ERROR - [analog.py:79 - search_patent_analogues()] - Error in search_patent_analogues: name 'websocket_manager' is not defined
2025-08-29 06:38:05,760 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 06:38:45,435 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:38:45,436 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 06:38:45,437 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:38:45,438 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 06:38:45,441 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 06:38:45,441 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 06:38:52,163 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:38:52,164 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 06:38:52,166 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 06:38:52,167 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:38:52,167 - app.services.analog.analog - ERROR - [analog.py:78 - search_patent_analogues()] - Error in search_patent_analogues: 'coroutine' object has no attribute 'analog_link_generate'
2025-08-29 06:39:56,553 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 06:40:20,299 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:40:20,301 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 06:40:20,302 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:40:20,302 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 06:40:20,305 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 06:40:20,306 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 06:40:30,257 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:40:30,259 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 06:40:30,260 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 06:40:30,261 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:40:30,262 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:79 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 06:40:30,262 - app.clients.parser_client - DEBUG - [parser_client.py:25 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 06:40:30,263 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 06:40:30,264 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:148 - analog_link_generate()] - Error in analog_generate: name 'websockets' is not defined
2025-08-29 06:47:45,672 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 06:48:16,095 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:48:16,097 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 06:48:16,098 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:48:16,099 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 06:48:16,102 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 06:48:16,103 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 06:48:22,761 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:48:22,762 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 06:48:22,764 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 06:48:22,765 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:48:22,766 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:91 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 06:48:22,767 - app.clients.parser_client - DEBUG - [parser_client.py:26 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 06:48:22,767 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 06:48:22,779 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 06:48:22,780 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 06:48:22,780 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 06:48:22,781 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 06:48:22,781 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 06:48:22,782 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: eOwIQ1c8i4xn48hPrUhTxw==
2025-08-29 06:48:22,782 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 06:48:22,783 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 06:48:22,784 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 06:48:22,786 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 404 Not Found
2025-08-29 06:48:22,786 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 01:48:22 GMT
2025-08-29 06:48:22,787 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 06:48:22,787 - websockets.client - DEBUG - [client.py:320 - parse()] - < content-length: 22
2025-08-29 06:48:22,788 - websockets.client - DEBUG - [client.py:320 - parse()] - < content-type: application/json
2025-08-29 06:48:22,788 - websockets.client - DEBUG - [client.py:322 - parse()] - < [body] (22 bytes)
2025-08-29 06:48:22,789 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 06:48:22,789 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 06:48:22,790 - app.clients.parser_client - ERROR - [parser_client.py:73 - generate_analog_link_ws()] - WebSocket error: server rejected WebSocket connection: HTTP 404
2025-08-29 06:48:22,791 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 06:48:22,792 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 06:48:55,546 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:48:55,547 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 06:48:55,549 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 06:48:55,550 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:48:55,551 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:91 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 06:48:55,551 - app.clients.parser_client - DEBUG - [parser_client.py:26 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 06:48:55,552 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 06:48:55,554 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 06:48:55,555 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 06:48:55,555 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 06:48:55,556 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 06:48:55,556 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 06:48:55,557 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: PRhOH8YdZTvxxSq77upkIA==
2025-08-29 06:48:55,557 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 06:48:55,558 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 06:48:55,558 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 06:48:55,560 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 404 Not Found
2025-08-29 06:48:55,561 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 01:48:55 GMT
2025-08-29 06:48:55,561 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 06:48:55,562 - websockets.client - DEBUG - [client.py:320 - parse()] - < content-length: 22
2025-08-29 06:48:55,562 - websockets.client - DEBUG - [client.py:320 - parse()] - < content-type: application/json
2025-08-29 06:48:55,563 - websockets.client - DEBUG - [client.py:322 - parse()] - < [body] (22 bytes)
2025-08-29 06:48:55,564 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 06:48:55,564 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 06:48:55,565 - app.clients.parser_client - ERROR - [parser_client.py:73 - generate_analog_link_ws()] - WebSocket error: server rejected WebSocket connection: HTTP 404
2025-08-29 06:48:55,566 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 06:48:55,566 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 06:49:14,342 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:49:14,343 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 06:49:14,345 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 06:49:14,346 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:49:14,346 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:91 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 06:49:14,347 - app.clients.parser_client - DEBUG - [parser_client.py:26 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 06:49:14,347 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 06:49:14,349 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 06:49:14,350 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 06:49:14,351 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 06:49:14,351 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 06:49:14,352 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 06:49:14,352 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: pi18DtIG3MWLokyisFjXUw==
2025-08-29 06:49:14,353 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 06:49:14,354 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 06:49:14,354 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 06:49:14,356 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 404 Not Found
2025-08-29 06:49:14,357 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 01:49:13 GMT
2025-08-29 06:49:14,357 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 06:49:14,358 - websockets.client - DEBUG - [client.py:320 - parse()] - < content-length: 22
2025-08-29 06:49:14,358 - websockets.client - DEBUG - [client.py:320 - parse()] - < content-type: application/json
2025-08-29 06:49:14,359 - websockets.client - DEBUG - [client.py:322 - parse()] - < [body] (22 bytes)
2025-08-29 06:49:14,360 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 06:49:14,360 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 06:49:14,361 - app.clients.parser_client - ERROR - [parser_client.py:73 - generate_analog_link_ws()] - WebSocket error: server rejected WebSocket connection: HTTP 404
2025-08-29 06:49:14,362 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 06:49:14,362 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 06:54:05,652 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:54:05,653 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 06:54:05,655 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 06:54:05,656 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:54:05,656 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:91 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 06:54:05,657 - app.clients.parser_client - DEBUG - [parser_client.py:26 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 06:54:05,657 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 06:54:07,697 - app.clients.parser_client - ERROR - [parser_client.py:73 - generate_analog_link_ws()] - WebSocket error: [Errno 10061] Connect call failed ('127.0.0.1', 8009)
2025-08-29 06:54:17,299 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:54:17,300 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 06:54:17,302 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 06:54:17,303 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:54:17,303 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:91 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 06:54:17,304 - app.clients.parser_client - DEBUG - [parser_client.py:26 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 06:54:17,304 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 06:54:17,306 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 06:54:17,307 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 06:54:17,307 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 06:54:17,308 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 06:54:17,308 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 06:54:17,309 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: /KLJ6PzPFlD+GtrFRf+/vg==
2025-08-29 06:54:17,309 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 06:54:17,310 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 06:54:17,311 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 06:54:17,312 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 404 Not Found
2025-08-29 06:54:17,313 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 01:54:17 GMT
2025-08-29 06:54:17,314 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 06:54:17,314 - websockets.client - DEBUG - [client.py:320 - parse()] - < content-length: 22
2025-08-29 06:54:17,315 - websockets.client - DEBUG - [client.py:320 - parse()] - < content-type: application/json
2025-08-29 06:54:17,315 - websockets.client - DEBUG - [client.py:322 - parse()] - < [body] (22 bytes)
2025-08-29 06:54:17,316 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 06:54:17,316 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 06:54:17,317 - app.clients.parser_client - ERROR - [parser_client.py:73 - generate_analog_link_ws()] - WebSocket error: server rejected WebSocket connection: HTTP 404
2025-08-29 06:54:17,318 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 06:54:17,318 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 06:55:00,970 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:55:00,972 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 06:55:00,973 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 06:55:00,974 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:55:00,975 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:91 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 06:55:00,975 - app.clients.parser_client - DEBUG - [parser_client.py:26 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 06:55:00,976 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 06:55:00,977 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 06:55:00,978 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 06:55:00,979 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 06:55:00,979 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 06:55:00,980 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 06:55:00,980 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: Jzh+YRPJ/mB1FJ4LwoPFmQ==
2025-08-29 06:55:00,981 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 06:55:00,981 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 06:55:00,982 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 06:55:00,984 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 403 Forbidden
2025-08-29 06:55:00,985 - websockets.client - DEBUG - [client.py:320 - parse()] - < Date: Fri, 29 Aug 2025 01:55:00 GMT
2025-08-29 06:55:00,985 - websockets.client - DEBUG - [client.py:320 - parse()] - < Content-Length: 0
2025-08-29 06:55:00,986 - websockets.client - DEBUG - [client.py:320 - parse()] - < Content-Type: text/plain
2025-08-29 06:55:00,986 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: close
2025-08-29 06:55:00,987 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 06:55:00,988 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 06:55:00,988 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 06:55:00,989 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 06:55:00,989 - app.clients.parser_client - ERROR - [parser_client.py:73 - generate_analog_link_ws()] - WebSocket error: server rejected WebSocket connection: HTTP 403
2025-08-29 06:59:09,946 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:59:09,982 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 06:59:09,983 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 06:59:09,984 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 06:59:09,984 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 06:59:09,986 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 06:59:09,987 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 06:59:09,988 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 06:59:09,989 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 06:59:09,990 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 06:59:09,991 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 06:59:13,441 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 06:59:13,442 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 06:59:13,444 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 06:59:13,445 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 06:59:13,445 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:91 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 06:59:13,446 - app.clients.parser_client - DEBUG - [parser_client.py:26 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 06:59:13,446 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 06:59:13,448 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 06:59:13,449 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 06:59:13,450 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 06:59:13,450 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 06:59:13,451 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 06:59:13,451 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: JgH3Qw7C/g8gzeWY2JmKZQ==
2025-08-29 06:59:13,452 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 06:59:13,452 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 06:59:13,453 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 06:59:13,456 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 06:59:13,456 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 06:59:13,457 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 06:59:13,458 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: acxy9eCPfO302woGjR4dbffgOW8=
2025-08-29 06:59:13,458 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 06:59:13,459 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 01:59:13 GMT
2025-08-29 06:59:13,459 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 06:59:13,460 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 06:59:13,460 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 06:59:13,461 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 06:59:13,462 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 06:59:13,463 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 06:59:13,463 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 06:59:13,464 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 06:59:13,464 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 06:59:13,465 - app.clients.parser_client - ERROR - [parser_client.py:73 - generate_analog_link_ws()] - WebSocket error: name 'json' is not defined
2025-08-29 07:01:21,412 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 07:01:43,142 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:01:43,144 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 07:01:43,144 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:01:43,145 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 07:01:43,148 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 07:01:43,149 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 07:01:54,479 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:01:54,481 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:01:54,482 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:01:54,483 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:01:54,484 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:91 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:01:54,484 - app.clients.parser_client - DEBUG - [parser_client.py:27 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:01:54,485 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:01:54,496 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:01:54,497 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:01:54,498 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:01:54,498 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:01:54,499 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:01:54,499 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: HhxIz/Svo8GGhOEBH9UK9A==
2025-08-29 07:01:54,500 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:01:54,500 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:01:54,501 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:01:54,504 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:01:54,505 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:01:54,505 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:01:54,506 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: 47Li0JVfH2KrHk5POnR0TkHLpDo=
2025-08-29 07:01:54,507 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:01:54,507 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:01:53 GMT
2025-08-29 07:01:54,508 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:01:54,508 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:01:54,509 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "auth", "token": "dfge"}' [33 bytes]
2025-08-29 07:01:54,510 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:01:54,511 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:01:54,511 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Unknown message type"}' [49 bytes]
2025-08-29 07:01:54,512 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:01:54,513 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:01:54,513 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:01:54,514 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:01:54,514 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 07:01:54,515 - app.clients.parser_client - ERROR - [parser_client.py:74 - generate_analog_link_ws()] - WebSocket error: name 'asyncio' is not defined
2025-08-29 07:03:19,695 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 07:03:39,346 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:03:39,348 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 07:03:39,348 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:03:39,349 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 07:03:39,352 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 07:03:39,353 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 07:03:47,111 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:03:47,113 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:03:47,114 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:03:47,115 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:03:47,116 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:91 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:03:47,117 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:03:47,117 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:03:47,128 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:03:47,129 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:03:47,130 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:03:47,130 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:03:47,131 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:03:47,131 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: p0cnQwP2icoevH3/jBe0Fw==
2025-08-29 07:03:47,132 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:03:47,133 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:03:47,133 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:03:47,136 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:03:47,137 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:03:47,138 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:03:47,138 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: M7cdTsdj7x7FbwL1cuKKhnsALA4=
2025-08-29 07:03:47,139 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:03:47,139 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:03:46 GMT
2025-08-29 07:03:47,140 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:03:47,141 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:03:47,141 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "auth", "token": "dfge"}' [33 bytes]
2025-08-29 07:03:47,142 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:03:47,143 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:03:47,144 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Unknown message type"}' [49 bytes]
2025-08-29 07:03:47,144 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:03:47,145 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:03:47,145 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:03:47,146 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:03:47,147 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 07:03:47,147 - app.clients.parser_client - ERROR - [parser_client.py:75 - generate_analog_link_ws()] - WebSocket error: Object of type UUID is not JSON serializable
2025-08-29 07:07:24,567 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 07:07:36,785 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:07:36,786 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 07:07:36,787 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:07:36,787 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 07:07:36,791 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 07:07:36,791 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 07:07:43,709 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:07:43,710 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:07:43,712 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:07:43,713 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:07:43,713 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:91 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:07:43,714 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:07:43,715 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:07:43,726 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:07:43,727 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:07:43,728 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:07:43,728 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:07:43,729 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:07:43,729 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: KzjLCW3kGxpNy0+mRu0usw==
2025-08-29 07:07:43,730 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:07:43,730 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:07:43,731 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:07:43,734 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:07:43,735 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:07:43,735 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:07:43,736 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: LW0Oe1U7S+6QsntK38RlAcGgYD8=
2025-08-29 07:07:43,736 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:07:43,737 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:07:43 GMT
2025-08-29 07:07:43,737 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:07:43,738 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:07:43,739 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "auth", "token": "dfge"}' [33 bytes]
2025-08-29 07:07:43,740 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...-01db9092e346_39759.5"}' [332 bytes]
2025-08-29 07:07:43,741 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Unknown message type"}' [49 bytes]
2025-08-29 07:07:43,741 - app.clients.parser_client - ERROR - [parser_client.py:66 - generate_analog_link_ws()] - Parser error: Unknown message type
2025-08-29 07:07:43,743 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:07:43,743 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:07:43,762 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:07:43,762 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:07:43,763 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:07:43,764 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:07:43,764 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 07:17:16,491 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 07:17:44,361 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:17:44,362 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 07:17:44,363 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:17:44,364 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 07:17:44,367 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 07:17:44,368 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 07:17:50,186 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:17:50,187 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:17:50,189 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:17:50,190 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:17:50,190 - app.services.analog.analog - ERROR - [analog.py:78 - search_patent_analogues()] - Error in search_patent_analogues: name 'get_connection_manager' is not defined
2025-08-29 07:21:07,269 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 07:21:28,011 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:21:28,013 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 07:21:28,014 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:21:28,014 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 07:21:28,017 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 07:21:28,018 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 07:21:35,491 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:21:35,493 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:21:35,494 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:21:35,495 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:21:35,496 - app.services.analog.analog - ERROR - [analog.py:78 - search_patent_analogues()] - Error in search_patent_analogues: name 'get_connection_manager' is not defined
2025-08-29 07:24:02,754 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 07:24:19,034 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:24:19,036 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 07:24:19,037 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:24:19,038 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 07:24:19,041 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 07:24:19,042 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 07:24:25,975 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:24:25,976 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:24:25,978 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:24:25,979 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:24:25,979 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:24:25,980 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:24:25,981 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:24:25,992 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:24:25,993 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:24:25,993 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:24:25,994 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:24:25,994 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:24:25,995 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: PBBzyF8QYZPMxa+ukwdehQ==
2025-08-29 07:24:25,995 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:24:25,996 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:24:25,996 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:24:26,000 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:24:26,000 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:24:26,001 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:24:26,001 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: 4Es1YYlljhdi2pM/4wiCHNNgpPw=
2025-08-29 07:24:26,002 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:24:26,002 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:24:25 GMT
2025-08-29 07:24:26,003 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:24:26,003 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:24:26,004 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "auth", "token": "dfge"}' [33 bytes]
2025-08-29 07:24:26,005 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_40761.765"}' [334 bytes]
2025-08-29 07:24:26,006 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Unknown message type"}' [49 bytes]
2025-08-29 07:24:26,006 - app.clients.parser_client - ERROR - [parser_client.py:66 - generate_analog_link_ws()] - Parser error: Unknown message type
2025-08-29 07:24:26,008 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:24:26,008 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:24:26,013 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:24:26,013 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:24:26,014 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:24:26,014 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:24:26,015 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 07:25:29,527 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:25:29,528 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:25:29,530 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:25:29,531 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:25:29,531 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:25:29,532 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:25:29,533 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:25:29,534 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:25:29,535 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:25:29,536 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:25:29,536 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:25:29,537 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:25:29,537 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: jGa2qtZbTlHR03zpIhPdYA==
2025-08-29 07:25:29,538 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:25:29,538 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:25:29,539 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:25:29,542 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:25:29,542 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:25:29,543 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:25:29,543 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: xmfblMQuZY8znxR02xFX8gUHBw0=
2025-08-29 07:25:29,544 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:25:29,544 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:25:29 GMT
2025-08-29 07:25:29,545 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:25:29,546 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:25:29,546 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "auth", "token": "dfge"}' [33 bytes]
2025-08-29 07:25:29,547 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_40825.296"}' [334 bytes]
2025-08-29 07:25:29,548 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Unknown message type"}' [49 bytes]
2025-08-29 07:25:29,548 - app.clients.parser_client - ERROR - [parser_client.py:66 - generate_analog_link_ws()] - Parser error: Unknown message type
2025-08-29 07:25:29,549 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:25:29,550 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:25:29,551 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 07:25:29,552 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Internal server erro...able coroutine object"}' [95 bytes]
2025-08-29 07:25:29,553 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:25:29,554 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:25:29,554 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:25:29,555 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:25:29,555 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 07:26:02,825 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:26:02,827 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:26:02,828 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:26:02,829 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:26:02,830 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:26:02,830 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:26:02,831 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:26:02,833 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:26:02,834 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:26:02,835 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:26:02,835 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:26:02,836 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:26:02,836 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: W4kzWRLxBWQLQJa17a2t7g==
2025-08-29 07:26:02,837 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:26:02,838 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:26:02,838 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:26:03,926 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:26:03,926 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:26:03,927 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:26:03,927 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: +JWnEA2EeDInt6NSpwE+8zsGvYE=
2025-08-29 07:26:03,928 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:26:03,928 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:26:03 GMT
2025-08-29 07:26:03,929 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:26:03,929 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:26:03,930 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "auth", "token": "dfge"}' [33 bytes]
2025-08-29 07:26:03,931 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_40859.687"}' [334 bytes]
2025-08-29 07:26:03,932 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Unknown message type"}' [49 bytes]
2025-08-29 07:26:03,932 - app.clients.parser_client - ERROR - [parser_client.py:66 - generate_analog_link_ws()] - Parser error: Unknown message type
2025-08-29 07:26:03,933 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:26:03,934 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:26:03,935 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 07:26:03,935 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 07:26:03,953 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 07:26:03,954 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 07:26:03,956 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:26:03,957 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:26:03,957 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:26:03,958 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:26:03,958 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 07:30:03,109 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:30:03,110 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:30:03,112 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:30:03,113 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:30:03,113 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:30:03,114 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:30:03,114 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:30:03,116 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:30:03,117 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:30:03,118 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:30:03,118 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:30:03,119 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:30:03,120 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: qtDwUVXizcpfDzMEHtYJrw==
2025-08-29 07:30:03,120 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:30:03,121 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:30:03,121 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:30:03,124 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:30:03,125 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:30:03,125 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:30:03,126 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: l2tsQ9pMmB/CSZj8qY9Lfj+bwXQ=
2025-08-29 07:30:03,127 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:30:03,128 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:30:02 GMT
2025-08-29 07:30:03,128 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:30:03,129 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:30:03,129 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "auth", "token": "dfge"}' [33 bytes]
2025-08-29 07:30:03,130 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...01db9092e346_41098.89"}' [333 bytes]
2025-08-29 07:30:03,131 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Unknown message type"}' [49 bytes]
2025-08-29 07:30:03,132 - app.clients.parser_client - ERROR - [parser_client.py:66 - generate_analog_link_ws()] - Parser error: Unknown message type
2025-08-29 07:30:03,133 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:30:03,133 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:30:03,134 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 07:30:03,135 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 07:30:03,135 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 07:30:03,136 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 07:30:03,137 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:30:03,137 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:30:03,138 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:30:03,139 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:30:03,139 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 07:31:49,536 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:31:49,537 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:31:49,539 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:31:49,540 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:31:49,540 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:31:49,541 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:31:49,541 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:31:49,543 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:31:49,544 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:31:49,545 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:31:49,545 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:31:49,546 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:31:49,546 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: tltW6YsrOpmwDxD5Y7/tRQ==
2025-08-29 07:31:49,547 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:31:49,547 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:31:49,548 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:31:49,551 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:31:49,551 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:31:49,552 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:31:49,552 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: ThnUV+S0Qnbf9Y1HKHzt2QHoxn4=
2025-08-29 07:31:49,553 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:31:49,554 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:31:49 GMT
2025-08-29 07:31:49,554 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:31:49,555 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:31:49,555 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "auth", "token": "dfge"}' [33 bytes]
2025-08-29 07:31:49,556 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_41205.312"}' [334 bytes]
2025-08-29 07:31:49,557 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Unknown message type"}' [49 bytes]
2025-08-29 07:31:49,557 - app.clients.parser_client - ERROR - [parser_client.py:66 - generate_analog_link_ws()] - Parser error: Unknown message type
2025-08-29 07:31:49,558 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:31:49,559 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:31:49,560 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 07:31:49,560 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 07:31:49,561 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 07:31:49,561 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 07:31:49,562 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:31:49,563 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:31:49,563 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:31:49,564 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:31:49,564 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 07:42:14,880 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:42:14,882 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:42:14,884 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:42:14,885 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:42:14,885 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:42:14,886 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:42:14,886 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:42:14,888 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:42:14,889 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:42:14,889 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:42:14,890 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:42:14,890 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:42:14,891 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: ntm3BvmqO6VPX2dv1Kw3Mg==
2025-08-29 07:42:14,892 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:42:14,892 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:42:14,893 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:42:14,896 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:42:14,896 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:42:14,897 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:42:14,897 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: YGL1nO97O72gDsIRj3pzJW7mDK4=
2025-08-29 07:42:14,898 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:42:14,898 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:42:14 GMT
2025-08-29 07:42:14,899 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:42:14,900 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:42:14,900 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "auth", "token": "dfge"}' [33 bytes]
2025-08-29 07:42:14,901 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_41830.656"}' [334 bytes]
2025-08-29 07:42:14,902 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Unknown message type"}' [49 bytes]
2025-08-29 07:42:14,902 - app.clients.parser_client - ERROR - [parser_client.py:66 - generate_analog_link_ws()] - Parser error: Unknown message type
2025-08-29 07:42:14,903 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:42:14,904 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:42:14,904 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 07:42:14,905 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 07:42:14,906 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 07:42:14,906 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 07:42:14,907 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:42:14,908 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:42:14,908 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:42:14,909 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:42:14,909 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 07:43:45,884 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:43:45,885 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:43:45,887 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:43:45,888 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:43:45,888 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:43:45,889 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:43:45,889 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:43:45,891 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:43:45,892 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:43:45,893 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:43:45,893 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:43:45,894 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:43:45,894 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: FXyhAeTqNmQt64Y0042yvw==
2025-08-29 07:43:45,895 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:43:45,895 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:43:45,896 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:43:45,899 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:43:45,899 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:43:45,900 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:43:45,900 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: 0eg/Y6rJjieK5Ld1FenmXq+is2g=
2025-08-29 07:43:45,901 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:43:45,902 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:43:45 GMT
2025-08-29 07:43:45,902 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:43:45,903 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:43:45,903 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "auth", "token": "dfge"}' [33 bytes]
2025-08-29 07:43:45,904 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_41921.656"}' [334 bytes]
2025-08-29 07:43:45,905 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Unknown message type"}' [49 bytes]
2025-08-29 07:43:45,905 - app.clients.parser_client - ERROR - [parser_client.py:66 - generate_analog_link_ws()] - Parser error: Unknown message type
2025-08-29 07:43:45,907 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:43:45,907 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:43:45,908 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 07:43:45,908 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 07:43:45,909 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 07:43:45,910 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 07:43:45,910 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:43:45,911 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:43:45,912 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:43:45,912 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:43:45,913 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 07:51:15,859 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 07:52:12,099 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:52:12,101 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 07:52:12,102 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:52:12,102 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 07:52:12,106 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 07:52:12,107 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 07:52:20,234 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:52:20,236 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:52:20,237 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:52:20,238 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:52:20,239 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:52:20,239 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:52:20,240 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:52:20,251 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:52:20,252 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:52:20,252 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:52:20,253 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:52:20,254 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:52:20,254 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: PAsFhJ0B9JDiITpKQvPerA==
2025-08-29 07:52:20,255 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:52:20,255 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:52:20,256 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:52:20,258 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:52:20,259 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:52:20,260 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:52:20,260 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: 4dUIeazD0ZLukcUIJtmMzPHe+js=
2025-08-29 07:52:20,261 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:52:20,261 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:52:19 GMT
2025-08-29 07:52:20,262 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:52:20,263 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:52:20,263 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_42436.015"}' [334 bytes]
2025-08-29 07:52:20,265 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 07:52:20,266 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 07:52:20,267 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 07:52:20,268 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 07:52:31,252 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Таймаут запроса"}' [91 bytes]
2025-08-29 07:52:31,254 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 07:52:31,254 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 07:52:31,255 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 07:52:31,256 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:52:31,257 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:52:31,258 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:52:31,258 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:52:31,259 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:52:31,259 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:52:31,260 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 07:53:05,030 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:53:05,031 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:53:05,033 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:53:05,034 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:53:05,034 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:53:05,035 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:53:05,035 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:53:05,037 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:53:05,038 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:53:05,039 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:53:05,039 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:53:05,040 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:53:05,041 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 2ZkN3HWwCE+dDZ5oNIrVjw==
2025-08-29 07:53:05,041 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:53:05,042 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:53:05,042 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:53:05,045 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:53:05,045 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:53:05,046 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:53:05,047 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: bWWWSOlTmnbF+q8XeMw4pZavFwY=
2025-08-29 07:53:05,047 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:53:05,048 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:53:04 GMT
2025-08-29 07:53:05,048 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:53:05,049 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:53:05,050 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_42480.812"}' [334 bytes]
2025-08-29 07:53:05,051 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 07:53:05,052 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 07:53:05,053 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 07:53:05,054 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 07:53:15,260 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Таймаут запроса"}' [91 bytes]
2025-08-29 07:53:15,261 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 07:53:15,262 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 07:53:15,263 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 07:53:15,264 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:53:15,264 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:53:15,265 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:53:15,266 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:53:15,266 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:53:15,267 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:53:15,267 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 07:54:00,471 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:54:00,473 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 07:54:00,473 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 07:54:00,474 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 07:54:00,475 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 07:54:00,477 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 07:54:00,477 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 07:54:00,478 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 07:54:00,479 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 07:54:00,481 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 07:54:00,481 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 07:54:05,418 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:54:05,420 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:54:05,421 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:54:05,422 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:54:05,423 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:54:05,423 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:54:05,424 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:54:05,425 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:54:05,426 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:54:05,427 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:54:05,427 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:54:05,428 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:54:05,428 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: pilazvllobw2j0DUljCrbg==
2025-08-29 07:54:05,429 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:54:05,430 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:54:05,430 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:54:05,432 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:54:05,433 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:54:05,434 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:54:05,434 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: L6K1EZE2TOdEWNEnqEwrKxHV29w=
2025-08-29 07:54:05,435 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:54:05,435 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:54:04 GMT
2025-08-29 07:54:05,436 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:54:05,436 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:54:05,437 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_42541.187"}' [334 bytes]
2025-08-29 07:54:05,439 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 07:54:05,440 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 07:54:05,441 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 07:54:05,441 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 07:54:16,252 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Таймаут запроса"}' [91 bytes]
2025-08-29 07:54:16,253 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 07:54:16,254 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 07:54:16,255 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 07:54:16,256 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:54:16,256 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:54:16,257 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:54:16,258 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:54:16,258 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:54:16,259 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:54:16,259 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 07:54:35,029 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 07:54:35,031 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 07:54:35,032 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 07:54:35,033 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 07:54:35,034 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 07:54:35,034 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 07:54:35,035 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 07:54:35,037 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 07:54:35,037 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 07:54:35,038 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 07:54:35,039 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 07:54:35,039 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 07:54:35,040 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: v/0XauMPyeUQg4kkW83ZSA==
2025-08-29 07:54:35,040 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 07:54:35,041 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 07:54:35,041 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 07:54:35,044 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 07:54:35,045 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 07:54:35,045 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 07:54:35,046 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: iVea+Og0jSccqPjWRk4yAWgFV3Q=
2025-08-29 07:54:35,046 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 07:54:35,047 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 02:54:34 GMT
2025-08-29 07:54:35,047 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 07:54:35,048 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 07:54:35,049 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_42570.812"}' [334 bytes]
2025-08-29 07:54:35,050 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 07:54:35,051 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 07:54:35,052 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 07:54:35,053 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 07:54:55,037 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 00 a1 d4 0f [binary, 4 bytes]
2025-08-29 07:54:55,038 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 00 a1 d4 0f [binary, 4 bytes]
2025-08-29 07:54:55,068 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 99 89 98 72 [binary, 4 bytes]
2025-08-29 07:54:55,068 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 07:54:55,069 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 99 89 98 72 [binary, 4 bytes]
2025-08-29 07:54:55,070 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 07:55:15,061 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING e3 8d 23 d1 [binary, 4 bytes]
2025-08-29 07:55:15,061 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG e3 8d 23 d1 [binary, 4 bytes]
2025-08-29 07:55:15,092 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 7b d4 2c 3e [binary, 4 bytes]
2025-08-29 07:55:15,092 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 07:55:15,093 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 7b d4 2c 3e [binary, 4 bytes]
2025-08-29 07:55:15,094 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 07:55:25,561 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 07:55:25,561 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...tsearch/v0.2/search\'"}' [185 bytes]
2025-08-29 07:55:25,562 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 07:55:25,563 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 07:55:25,564 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 07:55:25,565 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:55:25,565 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 07:55:25,566 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 07:55:25,567 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 07:55:25,567 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 07:55:25,568 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 07:55:25,568 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 08:12:39,598 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:12:39,600 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 08:12:39,601 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 08:12:39,602 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:12:39,603 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 08:12:39,603 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 08:12:39,604 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 08:12:39,606 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 08:12:39,607 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 08:12:39,607 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 08:12:39,608 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 08:12:39,608 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 08:12:39,609 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 79XK6g7Kho6zchuS+7ZoYg==
2025-08-29 08:12:39,609 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 08:12:39,610 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 08:12:39,610 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 08:12:39,613 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 08:12:39,614 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 08:12:39,614 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 08:12:39,615 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: chPJZLUWncPHfQI7tJ+qSwqSFk0=
2025-08-29 08:12:39,615 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 08:12:39,616 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 03:12:38 GMT
2025-08-29 08:12:39,617 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 08:12:39,617 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 08:12:39,618 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_43655.375"}' [334 bytes]
2025-08-29 08:12:39,619 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 08:12:39,620 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 08:12:39,621 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 08:12:39,622 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 08:12:59,637 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING df e5 83 99 [binary, 4 bytes]
2025-08-29 08:12:59,638 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:12:59,638 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 1d 02 0e b0 [binary, 4 bytes]
2025-08-29 08:12:59,639 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 1d 02 0e b0 [binary, 4 bytes]
2025-08-29 08:12:59,639 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG df e5 83 99 [binary, 4 bytes]
2025-08-29 08:12:59,640 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:13:19,633 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 28 0a 17 da [binary, 4 bytes]
2025-08-29 08:13:19,633 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:13:19,634 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 28 0a 17 da [binary, 4 bytes]
2025-08-29 08:13:19,635 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 9c 61 04 75 [binary, 4 bytes]
2025-08-29 08:13:19,635 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 9c 61 04 75 [binary, 4 bytes]
2025-08-29 08:13:19,636 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:13:39,646 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 41 48 00 ec [binary, 4 bytes]
2025-08-29 08:13:39,647 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:13:39,647 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 7f da c6 66 [binary, 4 bytes]
2025-08-29 08:13:39,648 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 7f da c6 66 [binary, 4 bytes]
2025-08-29 08:13:39,648 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 41 48 00 ec [binary, 4 bytes]
2025-08-29 08:13:39,649 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:13:59,672 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING d2 a8 e7 05 [binary, 4 bytes]
2025-08-29 08:13:59,672 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:13:59,673 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING a6 69 51 41 [binary, 4 bytes]
2025-08-29 08:13:59,674 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG a6 69 51 41 [binary, 4 bytes]
2025-08-29 08:13:59,674 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG d2 a8 e7 05 [binary, 4 bytes]
2025-08-29 08:13:59,675 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:14:19,649 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 05 10 dc 55 [binary, 4 bytes]
2025-08-29 08:14:19,650 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:14:19,650 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 05 10 dc 55 [binary, 4 bytes]
2025-08-29 08:14:19,651 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:14:19,696 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 66 d7 d6 19 [binary, 4 bytes]
2025-08-29 08:14:19,696 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 66 d7 d6 19 [binary, 4 bytes]
2025-08-29 08:14:31,057 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 08:14:31,058 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...onse\' is not defined"}' [106 bytes]
2025-08-29 08:14:31,059 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 08:14:31,059 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 08:14:31,060 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 08:14:31,061 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:14:31,062 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 08:14:31,062 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:14:31,063 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 08:14:31,064 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 08:14:31,064 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 08:14:31,065 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 08:17:06,049 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 08:17:07,193 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:17:07,195 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 08:17:07,196 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:17:07,196 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 08:17:07,200 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 08:17:07,201 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 08:17:14,487 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:17:14,488 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 08:17:14,490 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 08:17:14,491 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:17:14,492 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 08:17:14,492 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 08:17:14,493 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 08:17:14,504 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 08:17:14,505 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 08:17:14,506 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 08:17:14,506 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 08:17:14,507 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 08:17:14,507 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: ivG0qaMq9c3bETCz/gt3/w==
2025-08-29 08:17:14,508 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 08:17:14,509 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 08:17:14,509 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 08:17:14,512 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 08:17:14,513 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 08:17:14,514 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 08:17:14,514 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: dfjcsqV0GHeuIwYHP7OeUz2ygnI=
2025-08-29 08:17:14,515 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 08:17:14,515 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 03:17:14 GMT
2025-08-29 08:17:14,516 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 08:17:14,516 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 08:17:14,517 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_43930.281"}' [334 bytes]
2025-08-29 08:17:14,519 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 08:17:14,520 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 08:17:14,521 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 08:17:14,522 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 08:17:15,576 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 08:17:15,577 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed... attribute \'status\'"}' [115 bytes]
2025-08-29 08:17:15,577 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 08:17:15,578 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 08:17:15,579 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 08:17:15,580 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:17:15,581 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 08:17:15,582 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:17:15,583 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 08:17:15,583 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 08:17:15,584 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 08:17:15,584 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 08:17:49,839 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:17:49,840 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 08:17:49,841 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:17:55,909 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:17:55,910 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 08:17:55,912 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 08:17:55,913 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:17:55,913 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 08:17:55,914 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 08:17:55,914 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 08:17:55,916 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 08:17:55,917 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 08:17:55,918 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 08:17:55,918 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 08:17:55,919 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 08:17:55,919 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: ZFXqoYXAcrwadqdOoQSvfg==
2025-08-29 08:17:55,920 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 08:17:55,920 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 08:17:55,921 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 08:17:55,923 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 08:17:55,924 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 08:17:55,925 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 08:17:55,925 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: 6W5LUZ1IZCP3Lu/pBoQm95pMl+Q=
2025-08-29 08:17:55,926 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 08:17:55,926 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 03:17:55 GMT
2025-08-29 08:17:55,927 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 08:17:55,927 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 08:17:55,928 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_43971.687"}' [334 bytes]
2025-08-29 08:17:55,930 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 08:17:55,930 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 08:17:55,931 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 08:17:55,932 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 08:18:15,943 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING f4 ce e3 40 [binary, 4 bytes]
2025-08-29 08:18:15,943 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:18:15,944 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING b6 14 82 15 [binary, 4 bytes]
2025-08-29 08:18:15,945 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG b6 14 82 15 [binary, 4 bytes]
2025-08-29 08:18:15,945 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG f4 ce e3 40 [binary, 4 bytes]
2025-08-29 08:18:15,946 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:18:35,957 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 23 98 a2 2b [binary, 4 bytes]
2025-08-29 08:18:35,958 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:18:35,958 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 13 8b 65 17 [binary, 4 bytes]
2025-08-29 08:18:35,959 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 13 8b 65 17 [binary, 4 bytes]
2025-08-29 08:18:35,959 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 23 98 a2 2b [binary, 4 bytes]
2025-08-29 08:18:35,960 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:18:49,756 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 08:18:49,757 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed... attribute \'status\'"}' [115 bytes]
2025-08-29 08:18:49,757 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 08:18:49,758 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 08:18:49,759 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 08:18:49,760 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:18:49,760 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 08:18:49,761 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:18:49,762 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 08:18:49,762 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 08:18:49,763 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 08:18:49,763 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 08:23:36,372 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 08:24:13,002 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:24:13,004 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 08:24:13,004 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:24:13,005 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 08:24:13,008 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 08:24:13,009 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 08:24:19,106 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:24:19,107 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 08:24:19,108 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 08:24:19,109 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:24:19,110 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 08:24:19,110 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 08:24:19,111 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 08:24:19,122 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 08:24:19,123 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 08:24:19,124 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 08:24:19,125 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 08:24:19,125 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 08:24:19,126 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: qL4eRniOdhF7sQwltNdeWA==
2025-08-29 08:24:19,126 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 08:24:19,127 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 08:24:19,127 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 08:24:19,131 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 08:24:19,132 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 08:24:19,132 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 08:24:19,133 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: S/sNkEHjPaQZkDio6z9dW3qDnJY=
2025-08-29 08:24:19,133 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 08:24:19,134 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 03:24:18 GMT
2025-08-29 08:24:19,134 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 08:24:19,135 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 08:24:19,136 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...01db9092e346_44354.89"}' [333 bytes]
2025-08-29 08:24:19,138 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 08:24:19,138 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 08:24:19,140 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 08:24:19,140 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 08:24:39,129 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 5a 9e d2 2d [binary, 4 bytes]
2025-08-29 08:24:39,130 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 5a 9e d2 2d [binary, 4 bytes]
2025-08-29 08:24:39,130 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 7a 2b c1 7d [binary, 4 bytes]
2025-08-29 08:24:39,131 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:24:39,132 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 7a 2b c1 7d [binary, 4 bytes]
2025-08-29 08:24:39,132 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:24:59,111 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING e3 48 94 d0 [binary, 4 bytes]
2025-08-29 08:24:59,112 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG e3 48 94 d0 [binary, 4 bytes]
2025-08-29 08:24:59,112 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 41 d4 6d 27 [binary, 4 bytes]
2025-08-29 08:24:59,113 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:24:59,114 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 41 d4 6d 27 [binary, 4 bytes]
2025-08-29 08:24:59,114 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:25:09,641 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 08:25:09,642 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...tsearch/v0.2/search\'"}' [176 bytes]
2025-08-29 08:25:09,643 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 08:25:09,644 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 08:25:09,644 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 08:25:09,645 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:25:09,646 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 08:25:09,647 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:25:09,648 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 08:25:09,648 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 08:25:09,649 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 08:25:09,649 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 08:33:32,468 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:33:32,470 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 08:33:32,471 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 08:33:32,472 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 08:33:32,472 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 08:33:32,474 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 08:33:32,475 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 08:33:32,476 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 08:33:32,477 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 08:33:32,478 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 08:33:32,479 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 08:33:35,896 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:33:35,897 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 08:33:35,899 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 08:33:35,900 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:33:35,901 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 08:33:35,901 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 08:33:35,902 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 08:33:35,904 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 08:33:35,905 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 08:33:35,905 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 08:33:35,906 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 08:33:35,906 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 08:33:35,907 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: qOHrD7RisDpbX2sHP2ThOw==
2025-08-29 08:33:35,907 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 08:33:35,908 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 08:33:35,909 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 08:33:35,911 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 08:33:35,912 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 08:33:35,913 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 08:33:35,913 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: L8edjpkcBjh8ZDg6VYnbXfSr0lw=
2025-08-29 08:33:35,914 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 08:33:35,915 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 03:33:35 GMT
2025-08-29 08:33:35,915 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 08:33:35,916 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 08:33:35,916 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_44911.671"}' [457 bytes]
2025-08-29 08:33:35,918 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 08:33:35,919 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 08:33:35,920 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 08:33:35,921 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 08:33:55,930 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 0c 57 3f ca [binary, 4 bytes]
2025-08-29 08:33:55,930 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:33:55,931 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 0b 7a 5c e0 [binary, 4 bytes]
2025-08-29 08:33:55,932 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 0b 7a 5c e0 [binary, 4 bytes]
2025-08-29 08:33:55,932 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 0c 57 3f ca [binary, 4 bytes]
2025-08-29 08:33:55,933 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:34:15,940 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING ea 78 44 56 [binary, 4 bytes]
2025-08-29 08:34:15,940 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:34:15,941 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 88 a7 53 7d [binary, 4 bytes]
2025-08-29 08:34:15,942 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 88 a7 53 7d [binary, 4 bytes]
2025-08-29 08:34:15,942 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG ea 78 44 56 [binary, 4 bytes]
2025-08-29 08:34:15,943 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:34:26,612 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 08:34:26,613 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...tsearch/v0.2/search\'"}' [176 bytes]
2025-08-29 08:34:26,614 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 08:34:26,614 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 08:34:26,615 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 08:34:26,616 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:34:26,617 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 08:34:26,618 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:34:26,618 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 08:34:26,619 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 08:34:26,619 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 08:34:26,620 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 08:40:47,767 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 08:42:08,847 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:42:08,849 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 08:42:08,849 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:42:08,850 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 08:42:08,854 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 08:42:08,854 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 08:42:15,562 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:42:15,563 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 08:42:15,565 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 08:42:15,566 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:42:15,566 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 08:42:15,567 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 08:42:15,568 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 08:42:15,580 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 08:42:15,581 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 08:42:15,581 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 08:42:15,582 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 08:42:15,582 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 08:42:15,583 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: KIWMCkYxes3/HyJ/V141cA==
2025-08-29 08:42:15,583 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 08:42:15,584 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 08:42:15,584 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 08:42:15,587 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 08:42:15,588 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 08:42:15,589 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 08:42:15,589 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: /tpsLX3GoMujwvDh9AFqVju39I4=
2025-08-29 08:42:15,590 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 08:42:15,590 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 03:42:15 GMT
2025-08-29 08:42:15,591 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 08:42:15,591 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 08:42:15,592 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_45431.343"}' [457 bytes]
2025-08-29 08:42:15,593 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 08:42:15,593 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 08:42:15,595 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 08:42:15,595 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 08:42:35,580 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 69 ba ae a5 [binary, 4 bytes]
2025-08-29 08:42:35,581 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:42:35,581 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 69 ba ae a5 [binary, 4 bytes]
2025-08-29 08:42:35,582 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 56 de f6 49 [binary, 4 bytes]
2025-08-29 08:42:35,582 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 56 de f6 49 [binary, 4 bytes]
2025-08-29 08:42:35,583 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:42:55,599 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 'x3in' [text, 4 bytes]
2025-08-29 08:42:55,599 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:42:55,600 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 31 f4 15 6b [binary, 4 bytes]
2025-08-29 08:42:55,601 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 31 f4 15 6b [binary, 4 bytes]
2025-08-29 08:42:55,601 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 'x3in' [text, 4 bytes]
2025-08-29 08:42:55,602 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:43:06,108 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 08:43:06,109 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...tsearch/v0.2/search\'"}' [176 bytes]
2025-08-29 08:43:06,110 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 08:43:06,111 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 08:43:06,111 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 08:43:06,113 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:43:06,113 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 08:43:06,114 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:43:06,115 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 08:43:06,115 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 08:43:06,116 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 08:43:06,116 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 08:50:03,650 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 08:50:23,375 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:50:23,377 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 08:50:23,377 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:50:23,378 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 08:50:23,381 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 08:50:23,382 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 08:50:36,819 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:50:36,821 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 08:50:36,822 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 08:50:36,823 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:50:36,824 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 08:50:36,825 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 08:50:36,825 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 08:50:36,837 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 08:50:36,839 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 08:50:36,840 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 08:50:36,840 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 08:50:36,841 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 08:50:36,841 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 08KcmNUr0ywFbOlcWt/lYg==
2025-08-29 08:50:36,842 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 08:50:36,842 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 08:50:36,843 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 08:50:36,846 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 08:50:36,847 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 08:50:36,847 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 08:50:36,848 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: v+NPfE7rh6waPvOa4SluEKsjDk4=
2025-08-29 08:50:36,849 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 08:50:36,849 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 03:50:36 GMT
2025-08-29 08:50:36,850 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 08:50:36,851 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 08:50:36,851 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_45932.609"}' [457 bytes]
2025-08-29 08:50:36,853 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 08:50:36,854 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 08:50:36,855 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 08:50:36,856 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 08:50:56,872 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 94 e5 d8 5e [binary, 4 bytes]
2025-08-29 08:50:56,872 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:50:56,873 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING fc a8 65 8a [binary, 4 bytes]
2025-08-29 08:50:56,874 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG fc a8 65 8a [binary, 4 bytes]
2025-08-29 08:50:56,874 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 94 e5 d8 5e [binary, 4 bytes]
2025-08-29 08:50:56,875 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:51:16,884 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 1d 3f fd 2a [binary, 4 bytes]
2025-08-29 08:51:16,885 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:51:16,885 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING c5 27 bd 8a [binary, 4 bytes]
2025-08-29 08:51:16,886 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG c5 27 bd 8a [binary, 4 bytes]
2025-08-29 08:51:16,886 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 1d 3f fd 2a [binary, 4 bytes]
2025-08-29 08:51:16,887 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:51:36,883 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 45 23 a8 2a [binary, 4 bytes]
2025-08-29 08:51:36,884 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:51:36,884 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 45 23 a8 2a [binary, 4 bytes]
2025-08-29 08:51:36,885 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING d7 4a 01 46 [binary, 4 bytes]
2025-08-29 08:51:36,885 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG d7 4a 01 46 [binary, 4 bytes]
2025-08-29 08:51:36,886 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:51:56,891 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING da 4a fa 06 [binary, 4 bytes]
2025-08-29 08:51:56,892 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:51:56,892 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG da 4a fa 06 [binary, 4 bytes]
2025-08-29 08:51:56,893 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING b8 9c 8d a0 [binary, 4 bytes]
2025-08-29 08:51:56,893 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG b8 9c 8d a0 [binary, 4 bytes]
2025-08-29 08:51:56,894 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:52:16,898 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 31 11 f4 11 [binary, 4 bytes]
2025-08-29 08:52:16,899 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:52:16,899 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 31 11 f4 11 [binary, 4 bytes]
2025-08-29 08:52:16,900 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING e7 76 ad fa [binary, 4 bytes]
2025-08-29 08:52:16,901 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG e7 76 ad fa [binary, 4 bytes]
2025-08-29 08:52:16,901 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:52:24,867 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...ле нескольких попыток"}' [121 bytes]
2025-08-29 08:52:24,868 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 08:52:24,868 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 08:52:24,869 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 08:52:24,870 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:52:24,871 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 08:52:24,872 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:52:24,872 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 08:52:24,873 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 08:52:24,873 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 08:52:24,874 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 08:56:01,316 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 08:56:08,838 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:56:08,840 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 08:56:08,840 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:56:08,841 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 08:56:08,844 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 08:56:08,845 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 08:56:16,898 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:56:16,900 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 08:56:16,901 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 08:56:16,902 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:56:16,903 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 08:56:16,904 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 08:56:16,904 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 08:56:16,916 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 08:56:16,917 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 08:56:16,917 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 08:56:16,918 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 08:56:16,918 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 08:56:16,919 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 4K3XzkyrffFg0Q7ruBjiJQ==
2025-08-29 08:56:16,919 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 08:56:16,920 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 08:56:16,921 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 08:56:16,924 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 08:56:16,924 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 08:56:16,925 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 08:56:16,925 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: mzC6lquF8fYagckz1s6+paCmPow=
2025-08-29 08:56:16,926 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 08:56:16,927 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 03:56:16 GMT
2025-08-29 08:56:16,927 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 08:56:16,928 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 08:56:16,928 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_46272.687"}' [457 bytes]
2025-08-29 08:56:16,930 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 08:56:16,931 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 08:56:16,932 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 08:56:16,934 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 08:56:36,932 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING f4 93 9f 07 [binary, 4 bytes]
2025-08-29 08:56:36,933 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:56:36,933 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG f4 93 9f 07 [binary, 4 bytes]
2025-08-29 08:56:36,934 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 71 e6 e7 a2 [binary, 4 bytes]
2025-08-29 08:56:36,935 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 71 e6 e7 a2 [binary, 4 bytes]
2025-08-29 08:56:36,935 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:56:56,931 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING cd 18 66 32 [binary, 4 bytes]
2025-08-29 08:56:56,932 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:56:56,932 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG cd 18 66 32 [binary, 4 bytes]
2025-08-29 08:56:56,933 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 94 b5 a2 eb [binary, 4 bytes]
2025-08-29 08:56:56,933 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 94 b5 a2 eb [binary, 4 bytes]
2025-08-29 08:56:56,934 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:57:16,942 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 84 94 8b 8d [binary, 4 bytes]
2025-08-29 08:57:16,943 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:57:16,943 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 63 2b fc 0e [binary, 4 bytes]
2025-08-29 08:57:16,944 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 63 2b fc 0e [binary, 4 bytes]
2025-08-29 08:57:16,944 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 84 94 8b 8d [binary, 4 bytes]
2025-08-29 08:57:16,945 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:57:17,223 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...ле нескольких попыток"}' [121 bytes]
2025-08-29 08:57:17,224 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 08:57:17,225 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 08:57:17,225 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 08:57:17,227 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:57:17,227 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 08:57:17,228 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 08:57:17,229 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 08:57:17,229 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 08:57:17,230 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 08:57:17,230 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 08:58:45,474 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 08:59:05,628 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:59:05,629 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 08:59:05,630 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:59:05,631 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 08:59:05,634 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 08:59:05,635 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 08:59:12,304 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 08:59:12,306 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 08:59:12,307 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 08:59:12,308 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 08:59:12,309 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 08:59:12,310 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 08:59:12,310 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 08:59:12,321 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 08:59:12,322 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 08:59:12,323 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 08:59:12,324 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 08:59:12,324 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 08:59:12,325 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: qCNJbTe56/1vUdXz8JDVRQ==
2025-08-29 08:59:12,325 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 08:59:12,326 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 08:59:12,326 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 08:59:12,330 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 08:59:12,330 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 08:59:12,331 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 08:59:12,331 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: HFSXHWTJLRHuPVUAFl0KzDc8yfM=
2025-08-29 08:59:12,332 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 08:59:12,332 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 03:59:11 GMT
2025-08-29 08:59:12,333 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 08:59:12,333 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 08:59:12,334 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_46448.093"}' [457 bytes]
2025-08-29 08:59:12,336 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 08:59:12,337 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 08:59:12,338 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 08:59:12,339 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 08:59:32,327 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING ac a7 b0 21 [binary, 4 bytes]
2025-08-29 08:59:32,328 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG ac a7 b0 21 [binary, 4 bytes]
2025-08-29 08:59:32,329 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING b4 fd 89 dd [binary, 4 bytes]
2025-08-29 08:59:32,329 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:59:32,330 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG b4 fd 89 dd [binary, 4 bytes]
2025-08-29 08:59:32,330 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 08:59:52,343 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 87 37 f2 a2 [binary, 4 bytes]
2025-08-29 08:59:52,344 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 08:59:52,344 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING e5 8d 7b cd [binary, 4 bytes]
2025-08-29 08:59:52,345 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG e5 8d 7b cd [binary, 4 bytes]
2025-08-29 08:59:52,345 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 87 37 f2 a2 [binary, 4 bytes]
2025-08-29 08:59:52,346 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:00:12,347 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING ae 24 3b d8 [binary, 4 bytes]
2025-08-29 09:00:12,347 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 09:00:12,348 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG ae 24 3b d8 [binary, 4 bytes]
2025-08-29 09:00:12,349 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING a4 53 28 04 [binary, 4 bytes]
2025-08-29 09:00:12,349 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG a4 53 28 04 [binary, 4 bytes]
2025-08-29 09:00:12,350 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:00:32,375 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING a5 bc fb 6e [binary, 4 bytes]
2025-08-29 09:00:32,375 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 09:00:32,376 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 51 6e cb 3a [binary, 4 bytes]
2025-08-29 09:00:32,377 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 51 6e cb 3a [binary, 4 bytes]
2025-08-29 09:00:32,377 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG a5 bc fb 6e [binary, 4 bytes]
2025-08-29 09:00:32,378 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:00:52,389 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 'L\x1c\x1d\x1a' [text, 4 bytes]
2025-08-29 09:00:52,389 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 09:00:52,390 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 8c 12 3b c1 [binary, 4 bytes]
2025-08-29 09:00:52,391 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 8c 12 3b c1 [binary, 4 bytes]
2025-08-29 09:00:52,391 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 'L\x1c\x1d\x1a' [text, 4 bytes]
2025-08-29 09:00:52,392 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:01:03,228 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...ле нескольких попыток"}' [121 bytes]
2025-08-29 09:01:03,228 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 09:01:03,229 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 09:01:03,230 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 09:01:03,231 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 09:01:03,232 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 09:01:03,232 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 09:01:03,233 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 09:01:03,234 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 09:01:03,234 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 09:01:03,235 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 09:01:53,584 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 09:04:47,056 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 09:04:47,058 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 09:04:47,058 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 09:04:47,059 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 09:04:47,062 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 09:04:47,063 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 09:04:57,106 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 09:04:57,108 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 09:04:57,109 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 09:04:57,110 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 09:04:57,111 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 09:04:57,112 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 09:04:57,112 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 09:04:57,124 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 09:04:57,125 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 09:04:57,125 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 09:04:57,126 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 09:04:57,126 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 09:04:57,127 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: kHKb3wEHyvUCt99pwzIM5A==
2025-08-29 09:04:57,127 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 09:04:57,128 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 09:04:57,128 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 09:04:57,132 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 09:04:57,133 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 09:04:57,133 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 09:04:57,134 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: k6dDIquCUZVRuQ9xl0sIxCh3Tas=
2025-08-29 09:04:57,134 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 09:04:57,135 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 04:04:56 GMT
2025-08-29 09:04:57,135 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 09:04:57,136 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 09:04:57,137 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...01db9092e346_46792.89"}' [456 bytes]
2025-08-29 09:04:57,139 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 09:04:57,139 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 09:04:57,140 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 09:04:57,141 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 09:05:17,153 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 06 01 27 bc [binary, 4 bytes]
2025-08-29 09:05:17,153 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 09:05:17,154 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING bc b4 69 08 [binary, 4 bytes]
2025-08-29 09:05:17,155 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG bc b4 69 08 [binary, 4 bytes]
2025-08-29 09:05:17,155 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 06 01 27 bc [binary, 4 bytes]
2025-08-29 09:05:17,156 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:05:37,162 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING d0 18 1e b5 [binary, 4 bytes]
2025-08-29 09:05:37,163 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 09:05:37,164 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING e5 32 2c 7a [binary, 4 bytes]
2025-08-29 09:05:37,165 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG e5 32 2c 7a [binary, 4 bytes]
2025-08-29 09:05:37,166 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG d0 18 1e b5 [binary, 4 bytes]
2025-08-29 09:05:37,167 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:05:57,143 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 27 f8 5f 0b [binary, 4 bytes]
2025-08-29 09:05:57,144 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 09:05:57,144 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 27 f8 5f 0b [binary, 4 bytes]
2025-08-29 09:05:57,145 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 3f 39 99 90 [binary, 4 bytes]
2025-08-29 09:05:57,145 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 3f 39 99 90 [binary, 4 bytes]
2025-08-29 09:05:57,146 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:06:17,164 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 2b 22 45 a0 [binary, 4 bytes]
2025-08-29 09:06:17,165 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 09:06:17,165 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING bb e2 d8 f4 [binary, 4 bytes]
2025-08-29 09:06:17,166 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG bb e2 d8 f4 [binary, 4 bytes]
2025-08-29 09:06:17,166 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 2b 22 45 a0 [binary, 4 bytes]
2025-08-29 09:06:17,167 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:06:37,173 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING f1 95 b3 0c [binary, 4 bytes]
2025-08-29 09:06:37,173 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 09:06:37,174 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 1e 64 85 17 [binary, 4 bytes]
2025-08-29 09:06:37,175 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 1e 64 85 17 [binary, 4 bytes]
2025-08-29 09:06:37,175 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG f1 95 b3 0c [binary, 4 bytes]
2025-08-29 09:06:37,176 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:06:48,313 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...ле нескольких попыток"}' [121 bytes]
2025-08-29 09:06:48,314 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 09:06:48,315 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 09:06:48,315 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 09:06:48,317 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 09:06:48,317 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 09:06:48,318 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 09:06:48,319 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 09:06:48,319 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 09:06:48,320 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 09:06:48,320 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 09:16:45,137 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 09:16:45,138 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 09:16:45,139 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 09:16:59,286 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 09:16:59,288 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 09:16:59,289 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 09:16:59,289 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 09:16:59,290 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 09:16:59,292 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 09:16:59,293 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 09:16:59,293 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 09:16:59,295 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 09:16:59,296 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 09:16:59,297 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 09:17:10,427 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 09:17:10,429 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 09:17:10,430 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 09:17:10,431 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 09:17:10,432 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 09:17:10,432 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 09:17:10,433 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 09:17:10,435 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 09:17:10,436 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 09:17:10,436 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 09:17:10,437 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 09:17:10,437 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 09:17:10,438 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 05i1cSxbUZpuXMN6y61b3w==
2025-08-29 09:17:10,438 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 09:17:10,439 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 09:17:10,439 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 09:17:10,442 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 09:17:10,443 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 09:17:10,443 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 09:17:10,444 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: 7vDnN0f2LD3WFKlKgEeQOsJw8N0=
2025-08-29 09:17:10,444 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 09:17:10,445 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 04:17:09 GMT
2025-08-29 09:17:10,445 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 09:17:10,446 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 09:17:10,447 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_47526.203"}' [453 bytes]
2025-08-29 09:17:10,448 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 09:17:10,449 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 09:17:10,450 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 09:17:10,451 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 09:17:12,621 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 09:17:12,622 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 09:17:12,623 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 09:17:12,624 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 09:17:12,625 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU140141U1":{"url":"h...синг завершен успешно"}' [2247 bytes]
2025-08-29 09:17:12,626 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 09:17:12,626 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 09:17:12,627 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 09:17:12,627 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 09:17:12,628 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 09:17:12,629 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 09:17:12,629 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 09:17:12,630 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 09:17:12,630 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 09:17:12,631 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 09:17:12,632 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 09:17:12,634 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 09:17:12,634 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 09:17:12,637 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-29 09:20:58,303 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 09:21:16,824 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 09:21:16,826 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 09:21:16,826 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 09:21:16,827 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 09:21:16,830 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 09:21:16,831 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 09:21:28,285 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 09:21:28,286 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 09:21:28,288 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 09:21:28,289 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 09:21:28,289 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 09:21:28,290 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 09:21:28,291 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 09:21:28,302 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 09:21:28,303 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 09:21:28,304 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 09:21:28,304 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 09:21:28,305 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 09:21:28,305 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: GZh5PxEkTBw+FCAc4FipNA==
2025-08-29 09:21:28,306 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 09:21:28,306 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 09:21:28,307 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 09:21:28,310 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 09:21:28,310 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 09:21:28,311 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 09:21:28,311 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: m9oWFlR/5/HefYF9ZB2LtPpx4Mo=
2025-08-29 09:21:28,312 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 09:21:28,313 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 04:21:28 GMT
2025-08-29 09:21:28,313 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 09:21:28,314 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 09:21:28,314 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_47784.078"}' [453 bytes]
2025-08-29 09:21:28,316 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 09:21:28,317 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 09:21:28,318 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 09:21:28,319 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 09:21:30,517 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 09:21:30,518 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 09:21:30,519 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 09:21:30,520 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 09:21:30,521 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU140141U1":{"url":"h...синг завершен успешно"}' [2247 bytes]
2025-08-29 09:21:30,521 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 09:21:30,522 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 09:21:30,523 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 09:21:30,523 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 09:21:30,524 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 09:21:30,524 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 09:21:30,525 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 09:21:30,526 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 09:21:30,526 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 09:21:30,527 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 09:21:30,528 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 09:21:30,530 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 09:21:30,530 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 09:21:30,532 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-29 09:24:30,535 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:160 - analog_link_generate()] - Error in analog_generate: HTTPConnectionPool(host='127.0.0.1', port=8009): Read timed out. (read timeout=180)
2025-08-29 09:44:19,548 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 09:44:45,484 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 09:44:45,485 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 09:44:45,486 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 09:44:45,487 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 09:44:45,490 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 09:44:45,490 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 09:44:52,870 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 09:44:52,872 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 09:44:52,873 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 09:44:52,874 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 09:44:52,875 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 09:44:52,876 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 09:44:52,876 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 09:44:52,890 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 09:44:52,891 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 09:44:52,892 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 09:44:52,892 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 09:44:52,893 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 09:44:52,894 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: gx17TJexaGXqKiyV0EsPrA==
2025-08-29 09:44:52,894 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 09:44:52,895 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 09:44:52,895 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 09:44:52,898 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 09:44:52,899 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 09:44:52,899 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 09:44:52,900 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: 7dB6wh0wuM8n9HHcWcBr4Q5xi2w=
2025-08-29 09:44:52,900 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 09:44:52,901 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 04:44:52 GMT
2025-08-29 09:44:52,902 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 09:44:52,902 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 09:44:52,903 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_49188.656"}' [453 bytes]
2025-08-29 09:44:52,906 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Internal server erro...alog_datad_progress\'"}' [142 bytes]
2025-08-29 09:44:52,907 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Internal server error: 'RospatentLinkParser' object has no attribute '_senparser_invention_analog_datad_progress'
2025-08-29 09:44:52,908 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 09:44:52,909 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 09:44:52,909 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 09:44:52,910 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 09:44:52,911 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 09:44:52,911 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 09:44:52,912 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 09:46:52,225 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 09:47:06,826 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 09:47:06,828 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 09:47:06,828 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 09:47:06,829 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 09:47:06,833 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 09:47:06,834 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 09:47:23,682 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 09:47:23,684 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 09:47:23,685 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 09:47:23,686 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 09:47:23,687 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 09:47:23,688 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 09:47:23,689 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 09:47:23,700 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 09:47:23,701 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 09:47:23,702 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 09:47:23,702 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 09:47:23,703 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 09:47:23,703 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: eWBfX2Si+1d/VYwBWJWuIQ==
2025-08-29 09:47:23,704 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 09:47:23,704 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 09:47:23,705 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 09:47:23,708 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 09:47:23,708 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 09:47:23,709 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 09:47:23,710 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: 9LotANhGEZ2m19F292q3G3Cokl4=
2025-08-29 09:47:23,710 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 09:47:23,711 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 04:47:22 GMT
2025-08-29 09:47:23,711 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 09:47:23,712 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 09:47:23,713 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_49339.468"}' [453 bytes]
2025-08-29 09:47:23,714 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 09:47:23,715 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 09:47:23,716 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 09:47:23,717 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 09:47:43,709 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING fa f6 67 3c [binary, 4 bytes]
2025-08-29 09:47:43,710 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 09:47:43,710 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG fa f6 67 3c [binary, 4 bytes]
2025-08-29 09:47:43,711 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING cf ca ed 6f [binary, 4 bytes]
2025-08-29 09:47:43,711 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG cf ca ed 6f [binary, 4 bytes]
2025-08-29 09:47:43,712 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:48:03,725 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING ee d4 63 c5 [binary, 4 bytes]
2025-08-29 09:48:03,726 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 09:48:03,726 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 1c f2 f6 5a [binary, 4 bytes]
2025-08-29 09:48:03,727 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 1c f2 f6 5a [binary, 4 bytes]
2025-08-29 09:48:03,728 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG ee d4 63 c5 [binary, 4 bytes]
2025-08-29 09:48:03,728 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:48:23,742 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 68 0d ef 1d [binary, 4 bytes]
2025-08-29 09:48:23,742 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 09:48:23,743 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 34 31 82 dc [binary, 4 bytes]
2025-08-29 09:48:23,744 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 34 31 82 dc [binary, 4 bytes]
2025-08-29 09:48:23,744 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 68 0d ef 1d [binary, 4 bytes]
2025-08-29 09:48:23,745 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:48:43,753 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 0f 9e 18 11 [binary, 4 bytes]
2025-08-29 09:48:43,753 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 09:48:43,754 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 2d 56 e8 03 [binary, 4 bytes]
2025-08-29 09:48:43,755 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 2d 56 e8 03 [binary, 4 bytes]
2025-08-29 09:48:43,755 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 0f 9e 18 11 [binary, 4 bytes]
2025-08-29 09:48:43,756 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:49:03,757 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 9c 5a da aa [binary, 4 bytes]
2025-08-29 09:49:03,757 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 09:49:03,758 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 9c 5a da aa [binary, 4 bytes]
2025-08-29 09:49:03,759 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 87 6e ec b5 [binary, 4 bytes]
2025-08-29 09:49:03,759 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 87 6e ec b5 [binary, 4 bytes]
2025-08-29 09:49:03,760 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 09:49:12,412 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 09:49:12,413 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 09:49:12,414 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 09:49:12,415 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 09:49:12,416 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU140141U1":{"url":"h...синг завершен успешно"}' [2247 bytes]
2025-08-29 09:49:12,416 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 09:49:12,417 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 09:49:12,418 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 09:49:12,418 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 09:49:12,419 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 09:49:12,420 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 09:49:12,420 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 09:49:12,421 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 09:49:12,422 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 09:49:12,422 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 09:49:12,423 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 09:49:12,425 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 09:49:12,426 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 09:49:12,428 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8009
2025-08-29 09:52:12,435 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:160 - analog_link_generate()] - Error in analog_generate: HTTPConnectionPool(host='127.0.0.1', port=8009): Read timed out. (read timeout=180)
2025-08-29 10:03:33,982 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 10:03:42,462 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:03:42,464 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 10:03:42,464 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:03:42,465 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 10:03:42,468 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 10:03:42,469 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 10:03:50,083 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:03:50,085 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 10:03:50,086 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 10:03:50,087 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:03:50,088 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 10:03:50,089 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 10:03:50,090 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 10:03:50,100 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 10:03:50,101 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 10:03:50,101 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 10:03:50,102 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 10:03:50,102 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 10:03:50,103 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 05Xo11XM46YgaQwf5Haexw==
2025-08-29 10:03:50,103 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 10:03:50,104 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 10:03:50,104 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 10:03:50,107 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 10:03:50,108 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 10:03:50,109 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 10:03:50,109 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: PT9ZKPw8Oxj4b443FQd/idNTfVs=
2025-08-29 10:03:50,110 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 10:03:50,110 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 05:03:49 GMT
2025-08-29 10:03:50,111 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 10:03:50,111 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 10:03:50,112 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_50325.875"}' [453 bytes]
2025-08-29 10:03:50,114 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 10:03:50,115 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 10:03:50,116 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 10:03:50,117 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 10:05:25,448 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 10:05:34,915 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:05:34,917 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 10:05:34,918 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:05:34,918 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 10:05:34,921 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 10:05:34,922 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 10:05:47,650 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:05:47,652 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 10:05:47,653 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 10:05:47,654 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:05:47,655 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 10:05:47,656 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 10:05:47,656 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 10:05:47,668 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 10:05:47,669 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 10:05:47,670 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 10:05:47,670 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 10:05:47,671 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 10:05:47,671 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: n1BITZAzj+b+Xi0PvXoeMA==
2025-08-29 10:05:47,672 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 10:05:47,672 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 10:05:47,673 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 10:05:47,676 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 10:05:47,677 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 10:05:47,677 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 10:05:47,678 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: 7X2PrSBjOgFuNRoLTeAqth7LGvc=
2025-08-29 10:05:47,678 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 10:05:47,679 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 05:05:46 GMT
2025-08-29 10:05:47,680 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 10:05:47,680 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 10:05:47,681 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_50443.437"}' [453 bytes]
2025-08-29 10:05:47,683 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 10:05:47,684 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 10:05:47,686 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 10:05:47,686 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 10:05:49,899 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 10:05:49,900 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 10:05:49,901 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 10:05:49,902 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 10:05:49,902 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU140141U1":{"url":"h...синг завершен успешно"}' [2247 bytes]
2025-08-29 10:05:49,903 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 10:05:49,904 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:05:49,904 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 10:05:49,905 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:05:49,906 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 10:05:49,906 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 10:05:49,907 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 10:05:49,908 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 10:05:49,908 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 10:05:49,909 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 10:05:49,910 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 10:05:49,912 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 10:05:49,913 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:159 - analog_link_generate()] - Error in analog_generate: name 'analog' is not defined
2025-08-29 10:08:37,353 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:08:37,355 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 10:08:37,355 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:08:43,326 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:08:43,327 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 10:08:43,329 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 10:08:43,330 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:08:43,331 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 10:08:43,332 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 10:08:43,332 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 10:08:43,334 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 10:08:43,335 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 10:08:43,335 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 10:08:43,336 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 10:08:43,337 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 10:08:43,337 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: XO9xD9PzVDNMS59mKeIDrw==
2025-08-29 10:08:43,338 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 10:08:43,338 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 10:08:43,339 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 10:08:43,341 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 10:08:43,342 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 10:08:43,342 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 10:08:43,343 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: 600sfe4ihXFlNTbpktZXzmbIau4=
2025-08-29 10:08:43,344 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 10:08:43,344 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 05:08:43 GMT
2025-08-29 10:08:43,345 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 10:08:43,345 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 10:08:43,346 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_50619.109"}' [453 bytes]
2025-08-29 10:08:43,348 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 10:08:43,349 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 10:08:43,349 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 10:08:43,350 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 10:08:45,212 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 10:08:45,213 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 10:08:45,214 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 10:08:45,214 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 10:08:45,215 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU140141U1":{"url":"h...синг завершен успешно"}' [2247 bytes]
2025-08-29 10:08:45,216 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 10:08:45,217 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:08:45,217 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 10:08:45,218 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:08:45,219 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 10:08:45,219 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 10:08:45,220 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 10:08:45,220 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 10:08:45,221 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 10:08:45,222 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 10:08:45,223 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 10:08:45,224 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 10:08:45,225 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:159 - analog_link_generate()] - Error in analog_generate: name 'analog' is not defined
2025-08-29 10:14:44,620 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 10:16:57,018 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 10:17:54,125 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:17:54,127 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 10:17:54,128 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:17:54,128 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 10:17:54,131 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 10:17:54,132 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 10:18:01,225 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:18:01,226 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 10:18:01,228 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 10:18:01,229 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:18:01,230 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 10:18:01,231 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 10:18:01,231 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 10:18:01,243 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 10:18:01,244 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 10:18:01,245 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 10:18:01,246 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 10:18:01,246 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 10:18:01,247 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 17ShFxz7ArvaawkVCqX6Dg==
2025-08-29 10:18:01,247 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 10:18:01,248 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 10:18:01,249 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 10:18:01,252 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 10:18:01,252 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 10:18:01,253 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 10:18:01,253 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: kpObAb0Dnb5uSZENwRep6HBB7+w=
2025-08-29 10:18:01,254 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 10:18:01,255 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 05:18:00 GMT
2025-08-29 10:18:01,255 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 10:18:01,256 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 10:18:01,256 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_51177.015"}' [453 bytes]
2025-08-29 10:18:01,258 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 10:18:01,259 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 10:18:01,260 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 10:18:01,261 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 10:18:21,263 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 8a c0 81 94 [binary, 4 bytes]
2025-08-29 10:18:21,264 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 10:18:21,264 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 8a c0 81 94 [binary, 4 bytes]
2025-08-29 10:18:21,265 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 'TvNP' [text, 4 bytes]
2025-08-29 10:18:21,265 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 'TvNP' [text, 4 bytes]
2025-08-29 10:18:21,266 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 10:18:41,281 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING d0 27 36 e0 [binary, 4 bytes]
2025-08-29 10:18:41,281 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 10:18:41,282 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING f2 c9 41 21 [binary, 4 bytes]
2025-08-29 10:18:41,283 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG f2 c9 41 21 [binary, 4 bytes]
2025-08-29 10:18:41,283 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG d0 27 36 e0 [binary, 4 bytes]
2025-08-29 10:18:41,284 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 10:19:01,286 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING fe 0f 93 da [binary, 4 bytes]
2025-08-29 10:19:01,287 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 10:19:01,287 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 74 ff 0b 63 [binary, 4 bytes]
2025-08-29 10:19:01,288 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 74 ff 0b 63 [binary, 4 bytes]
2025-08-29 10:19:01,289 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG fe 0f 93 da [binary, 4 bytes]
2025-08-29 10:19:01,289 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 10:19:21,305 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING a6 0e ec 64 [binary, 4 bytes]
2025-08-29 10:19:21,305 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 10:19:21,306 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING ce c4 d4 72 [binary, 4 bytes]
2025-08-29 10:19:21,307 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG ce c4 d4 72 [binary, 4 bytes]
2025-08-29 10:19:21,307 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG a6 0e ec 64 [binary, 4 bytes]
2025-08-29 10:19:21,308 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 10:19:41,323 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING d2 30 b6 07 [binary, 4 bytes]
2025-08-29 10:19:41,324 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 10:19:41,324 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING d2 31 17 d8 [binary, 4 bytes]
2025-08-29 10:19:41,325 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG d2 31 17 d8 [binary, 4 bytes]
2025-08-29 10:19:41,325 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG d2 30 b6 07 [binary, 4 bytes]
2025-08-29 10:19:41,326 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 10:19:50,460 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 10:19:50,461 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 10:19:50,462 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 10:19:50,463 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 10:19:50,464 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU140141U1":{"url":"h...синг завершен успешно"}' [2247 bytes]
2025-08-29 10:19:50,465 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 10:19:50,465 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:19:50,466 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 10:19:50,466 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:19:50,467 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 10:19:50,468 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 10:19:50,468 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 10:19:50,469 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 10:19:50,470 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 10:19:50,470 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 10:19:50,471 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 10:19:50,473 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 10:19:50,474 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:159 - analog_link_generate()] - Error in analog_generate: name 'analog' is not defined
2025-08-29 10:20:20,038 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 10:24:53,241 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 10:25:55,028 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 10:27:47,980 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 10:37:13,873 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 10:40:43,453 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 10:41:32,711 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 10:41:50,510 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:41:50,527 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 10:41:50,528 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:41:50,529 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 10:41:50,549 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 10:41:50,550 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 10:41:57,239 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:41:57,241 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 10:41:57,243 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 10:41:57,244 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:41:57,245 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 10:41:57,246 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 10:41:57,246 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 10:41:57,277 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 10:41:57,278 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 10:41:57,279 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 10:41:57,280 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 10:41:57,280 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 10:41:57,281 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: W/SogCukUHWd5kpher0EWA==
2025-08-29 10:41:57,281 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 10:41:57,282 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 10:41:57,282 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 10:41:57,285 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 10:41:57,286 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 10:41:57,287 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 10:41:57,287 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: O+9OwQZCSXsH7LNpnM0EQEcEpSg=
2025-08-29 10:41:57,288 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 10:41:57,288 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 05:41:56 GMT
2025-08-29 10:41:57,289 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 10:41:57,289 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 10:41:57,290 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_52613.046"}' [453 bytes]
2025-08-29 10:41:57,292 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 10:41:57,293 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 10:41:57,308 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 10:41:57,309 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 10:41:59,469 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 10:41:59,470 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 10:41:59,471 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 10:41:59,472 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 10:41:59,473 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU140141U1":{"url":"h...синг завершен успешно"}' [2247 bytes]
2025-08-29 10:41:59,473 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 10:41:59,474 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:41:59,475 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 10:41:59,475 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:41:59,476 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 10:41:59,477 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 10:41:59,477 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 10:41:59,478 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 10:41:59,478 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 10:41:59,479 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 10:41:59,480 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 10:41:59,482 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 10:41:59,483 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:159 - analog_link_generate()] - Error in analog_generate: name 'analog' is not defined
2025-08-29 10:53:58,437 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 10:54:27,839 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:54:27,841 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 10:54:27,841 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:54:27,842 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 10:54:27,845 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 10:54:27,845 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 10:54:35,575 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:54:35,577 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 10:54:35,578 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 10:54:35,580 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:54:35,581 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 10:54:35,581 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 10:54:35,582 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 10:54:35,593 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 10:54:35,595 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 10:54:35,595 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 10:54:35,596 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 10:54:35,596 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 10:54:35,597 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: JGa9sbCxTS+YZlX2w+yaXw==
2025-08-29 10:54:35,597 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 10:54:35,598 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 10:54:35,598 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 10:54:35,602 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 10:54:35,602 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 10:54:35,603 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 10:54:35,603 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: 7VKicQ3BfVDsgqAUhDIFtN5H5LM=
2025-08-29 10:54:35,604 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 10:54:35,604 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 05:54:34 GMT
2025-08-29 10:54:35,605 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 10:54:35,606 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 10:54:35,606 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_53371.359"}' [453 bytes]
2025-08-29 10:54:35,608 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 10:54:35,609 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 10:54:35,610 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 10:54:35,611 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 10:54:37,392 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 10:54:37,394 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 10:54:37,395 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 10:54:37,396 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 10:54:37,397 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU140141U1":{"url":"h...синг завершен успешно"}' [2247 bytes]
2025-08-29 10:54:37,398 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 10:54:37,398 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:54:37,399 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 10:54:37,400 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:54:37,400 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 10:54:37,401 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 10:54:37,401 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 10:54:37,402 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 10:54:37,403 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 10:54:37,403 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 10:54:37,405 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 10:54:37,407 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 10:54:37,408 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:159 - analog_link_generate()] - Error in analog_generate: name 'analog' is not defined
2025-08-29 10:56:01,974 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:56:01,976 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 10:56:01,976 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:56:01,977 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 10:56:01,979 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 10:56:01,979 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 10:56:47,724 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:56:47,726 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-08-29 10:56:47,726 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-08-29 10:56:47,727 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 10:56:47,728 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 10:56:47,729 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 10:56:47,730 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 10:56:47,731 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 10:56:47,732 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 10:56:47,733 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-08-29 10:56:47,734 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-08-29 10:57:07,656 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:57:07,658 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 10:57:07,658 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 10:57:07,659 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 10:57:07,660 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 10:57:07,662 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 10:57:07,662 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 10:57:07,663 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 10:57:07,664 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 10:57:07,666 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 10:57:07,666 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 10:57:13,127 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:57:13,128 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 10:57:13,129 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 10:57:13,131 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:57:13,132 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 10:57:13,133 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 10:57:13,133 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 10:57:13,135 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 10:57:13,136 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 10:57:13,137 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 10:57:13,137 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 10:57:13,138 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 10:57:13,138 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 2SRBKAAFsEratdukq3y7KQ==
2025-08-29 10:57:13,139 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 10:57:13,139 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 10:57:13,140 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 10:57:13,142 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 10:57:13,143 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 10:57:13,143 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 10:57:13,144 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: OSa4SruqbzChLuWdMnLMUcH3kAo=
2025-08-29 10:57:13,145 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 10:57:13,145 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 05:57:12 GMT
2025-08-29 10:57:13,146 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 10:57:13,146 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 10:57:13,147 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...6154521c2b0_53528.906"}' [513 bytes]
2025-08-29 10:57:13,150 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 10:57:13,151 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 10:57:13,153 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 10:57:13,153 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 10:57:15,129 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 10:57:15,130 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 10:57:15,131 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 10:57:15,132 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 10:57:15,134 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU2427295C2":{"url":"...синг завершен успешно"}' [1196 bytes]
2025-08-29 10:57:15,134 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 10:57:15,135 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:57:15,135 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 10:57:15,136 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:57:15,137 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 10:57:15,137 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 10:57:15,138 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 10:57:15,138 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 10:57:15,139 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 10:57:15,140 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 10:57:15,142 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 10:57:15,144 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 10:57:15,145 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:159 - analog_link_generate()] - Error in analog_generate: name 'analog' is not defined
2025-08-29 10:57:24,679 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:57:24,681 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 10:57:24,682 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 10:57:24,683 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:57:24,684 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 10:57:24,686 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 10:57:24,686 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 10:57:24,688 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 10:57:24,689 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 10:57:24,689 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 10:57:24,690 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 10:57:24,690 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 10:57:24,691 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: QPExcyr3GNNi1XEv4f5UCA==
2025-08-29 10:57:24,691 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 10:57:24,692 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 10:57:24,692 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 10:57:24,695 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 10:57:24,695 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 10:57:24,696 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 10:57:24,696 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: AKxVkN5nRBRuMSaV0qfZ065IvWY=
2025-08-29 10:57:24,697 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 10:57:24,697 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 05:57:24 GMT
2025-08-29 10:57:24,698 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 10:57:24,699 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 10:57:24,699 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...6154521c2b0_53540.453"}' [513 bytes]
2025-08-29 10:57:24,701 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 10:57:24,702 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 10:57:24,703 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 10:57:24,704 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 10:57:26,017 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 10:57:26,018 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 10:57:26,020 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 10:57:26,020 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 10:57:26,022 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU2427295C2":{"url":"...синг завершен успешно"}' [1196 bytes]
2025-08-29 10:57:26,023 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 10:57:26,023 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:57:26,024 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 10:57:26,025 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:57:26,025 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 10:57:26,026 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 10:57:26,027 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 10:57:26,027 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 10:57:26,028 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 10:57:26,029 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 10:57:26,030 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 10:57:26,032 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 10:57:26,034 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:159 - analog_link_generate()] - Error in analog_generate: name 'analog' is not defined
2025-08-29 10:57:31,500 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:57:31,502 - app.http.routes.analog - INFO - [analog.py:102 - get_analogues_xlsx()] - Request to receive analogues table xlsx
2025-08-29 10:57:31,503 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 10:57:31,504 - app.services.analog.analog - INFO - [analog.py:141 - get_analogues_xlsx()] - Star get_analog_xlsx
2025-08-29 10:57:31,505 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:57:31,505 - app.services.analog.table_generator - INFO - [table_generator.py:75 - generate_analogs_xlsx()] - Star generate_analogs_csv
2025-08-29 10:57:31,506 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:57:31,507 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 10:57:31,507 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 10:57:31,509 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 10:57:31,509 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 10:57:31,512 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 10:57:31,513 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 10:57:31,513 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 10:57:31,527 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 10:57:31,527 - app.http.routes.analog - ERROR - [analog.py:113 - get_analogues_xlsx()] - No analogues found for patent
2025-08-29 10:58:08,570 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:58:08,571 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 10:58:08,572 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 10:58:08,573 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 10:58:08,574 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 10:58:08,575 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 10:58:08,576 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 10:58:08,577 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 10:58:08,578 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 10:58:08,580 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 10:58:08,580 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 10:58:14,584 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:58:14,586 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 10:58:14,587 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 10:58:14,589 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:58:14,590 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 10:58:14,591 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 10:58:14,592 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 10:58:14,593 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 10:58:14,594 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 10:58:14,595 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 10:58:14,595 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 10:58:14,596 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 10:58:14,597 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: elhG7IRi1r2P2N86nCzh7A==
2025-08-29 10:58:14,597 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 10:58:14,598 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 10:58:14,598 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 10:58:14,601 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 10:58:14,602 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 10:58:14,602 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 10:58:14,603 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: 28jJYDh+dKPHsz/WAKzRb8CbZZg=
2025-08-29 10:58:14,604 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 10:58:14,604 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 05:58:14 GMT
2025-08-29 10:58:14,605 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 10:58:14,605 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 10:58:14,606 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...6154521c2b0_53590.359"}' [512 bytes]
2025-08-29 10:58:14,608 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 10:58:14,609 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 10:58:14,610 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 10:58:14,611 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 10:58:15,837 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 10:58:15,839 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 10:58:15,840 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 10:58:15,841 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 10:58:15,842 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU2427295C2":{"url":"...синг завершен успешно"}' [1196 bytes]
2025-08-29 10:58:15,843 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 10:58:15,844 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:58:15,844 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 10:58:15,845 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 10:58:15,846 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 10:58:15,846 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 10:58:15,847 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 10:58:15,847 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 10:58:15,849 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 10:58:15,849 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 10:58:15,850 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 10:58:15,852 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 10:58:15,854 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:159 - analog_link_generate()] - Error in analog_generate: name 'analog' is not defined
2025-08-29 10:59:01,729 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 10:59:01,730 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 10:59:01,732 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 10:59:01,733 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 10:59:01,734 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 10:59:01,736 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 10:59:01,736 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 10:59:01,738 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 10:59:01,739 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 10:59:01,739 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 10:59:01,740 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 10:59:01,741 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 10:59:01,741 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: NXufmPlpWazT4cMNRD2KMg==
2025-08-29 10:59:01,742 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 10:59:01,743 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 10:59:01,743 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 10:59:01,745 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 10:59:01,746 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 10:59:01,747 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 10:59:01,747 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: H2hg6Tdf23zrvyCBmmXc77IMR9Y=
2025-08-29 10:59:01,748 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 10:59:01,748 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 05:59:01 GMT
2025-08-29 10:59:01,749 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 10:59:01,750 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 10:59:01,750 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...-c6154521c2b0_53637.5"}' [510 bytes]
2025-08-29 10:59:01,752 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 10:59:01,754 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 10:59:01,755 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 10:59:01,755 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 10:59:21,741 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING b9 fc cf 2f [binary, 4 bytes]
2025-08-29 10:59:21,742 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG b9 fc cf 2f [binary, 4 bytes]
2025-08-29 10:59:21,742 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING e2 e9 44 6e [binary, 4 bytes]
2025-08-29 10:59:21,743 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 10:59:21,744 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG e2 e9 44 6e [binary, 4 bytes]
2025-08-29 10:59:21,744 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 10:59:41,760 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 94 20 bc 08 [binary, 4 bytes]
2025-08-29 10:59:41,760 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 10:59:41,761 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 08 f6 36 a8 [binary, 4 bytes]
2025-08-29 10:59:41,762 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 08 f6 36 a8 [binary, 4 bytes]
2025-08-29 10:59:41,762 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 94 20 bc 08 [binary, 4 bytes]
2025-08-29 10:59:41,763 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 11:00:01,772 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING eb 9a f8 b7 [binary, 4 bytes]
2025-08-29 11:00:01,772 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 11:00:01,773 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING ee a7 ca aa [binary, 4 bytes]
2025-08-29 11:00:01,774 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG ee a7 ca aa [binary, 4 bytes]
2025-08-29 11:00:01,774 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG eb 9a f8 b7 [binary, 4 bytes]
2025-08-29 11:00:01,775 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 11:00:21,787 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 98 70 8b 37 [binary, 4 bytes]
2025-08-29 11:00:21,787 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 11:00:21,788 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 2e ce ef 39 [binary, 4 bytes]
2025-08-29 11:00:21,789 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 2e ce ef 39 [binary, 4 bytes]
2025-08-29 11:00:21,789 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 98 70 8b 37 [binary, 4 bytes]
2025-08-29 11:00:21,790 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 11:00:41,811 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING fd cb 24 29 [binary, 4 bytes]
2025-08-29 11:00:41,811 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 11:00:41,812 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING f1 ac 5c 26 [binary, 4 bytes]
2025-08-29 11:00:41,813 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG f1 ac 5c 26 [binary, 4 bytes]
2025-08-29 11:00:41,813 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG fd cb 24 29 [binary, 4 bytes]
2025-08-29 11:00:41,814 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 11:01:01,812 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 86 c6 86 4e [binary, 4 bytes]
2025-08-29 11:01:01,812 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 11:01:01,813 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 86 c6 86 4e [binary, 4 bytes]
2025-08-29 11:01:01,814 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING c0 e7 90 9f [binary, 4 bytes]
2025-08-29 11:01:01,814 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG c0 e7 90 9f [binary, 4 bytes]
2025-08-29 11:01:01,815 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 11:01:21,822 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 9f e2 52 56 [binary, 4 bytes]
2025-08-29 11:01:21,823 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 11:01:21,823 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 9f e2 52 56 [binary, 4 bytes]
2025-08-29 11:01:21,824 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING c3 83 df 67 [binary, 4 bytes]
2025-08-29 11:01:21,824 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG c3 83 df 67 [binary, 4 bytes]
2025-08-29 11:01:21,825 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 11:01:32,066 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 11:01:32,068 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 11:01:32,068 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 11:01:32,069 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 11:01:32,070 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 11:01:32,072 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 11:01:32,073 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 11:01:32,073 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 11:01:32,074 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 11:01:32,076 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 11:01:32,077 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 11:01:36,311 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 11:01:36,312 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 11:01:36,314 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 11:01:36,315 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 11:01:36,317 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 11:01:36,318 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 11:01:36,319 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 11:01:36,321 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 11:01:36,321 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 11:01:36,322 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 11:01:36,323 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 11:01:36,323 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 11:01:36,324 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: zoNLfthl0ODBigDtgf5WcQ==
2025-08-29 11:01:36,324 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 11:01:36,325 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 11:01:36,325 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 11:01:36,328 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 11:01:36,328 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 11:01:36,329 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 11:01:36,330 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: +71E0tib7TH2UMR6tNyKNkh7UoA=
2025-08-29 11:01:36,330 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 11:01:36,331 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 06:01:36 GMT
2025-08-29 11:01:36,331 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 11:01:36,332 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 11:01:36,332 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...1db9092e346_53792.093"}' [512 bytes]
2025-08-29 11:01:36,334 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 11:01:36,336 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 11:01:36,337 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 11:01:36,337 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 11:01:37,782 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 11:01:37,784 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 11:01:37,785 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 11:01:37,786 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 11:01:37,787 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU2427295C2":{"url":"...синг завершен успешно"}' [1196 bytes]
2025-08-29 11:01:37,788 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 11:01:37,789 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 11:01:37,789 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 11:01:37,790 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 11:01:37,791 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 11:01:37,791 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 11:01:37,792 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 11:01:37,792 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 11:01:37,793 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 11:01:37,794 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 11:01:37,795 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 11:01:37,797 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 11:01:37,799 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:159 - analog_link_generate()] - Error in analog_generate: name 'analog' is not defined
2025-08-29 11:01:41,836 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING e1 9a 30 38 [binary, 4 bytes]
2025-08-29 11:01:41,836 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 11:01:41,837 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING b8 0f 11 3e [binary, 4 bytes]
2025-08-29 11:01:41,838 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG b8 0f 11 3e [binary, 4 bytes]
2025-08-29 11:01:41,838 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG e1 9a 30 38 [binary, 4 bytes]
2025-08-29 11:01:41,839 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 11:01:46,673 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 11:01:46,675 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 11:01:46,676 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 11:01:46,677 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 11:01:46,679 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU2427295C2":{"url":"...синг завершен успешно"}' [1196 bytes]
2025-08-29 11:01:46,679 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 11:01:46,680 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 11:01:46,681 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 11:01:46,681 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 11:01:46,682 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 11:01:46,682 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 11:01:46,683 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 11:01:46,683 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 11:01:46,685 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 11:01:46,685 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 11:01:46,686 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 11:01:46,688 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 11:01:46,690 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:159 - analog_link_generate()] - Error in analog_generate: name 'analog' is not defined
2025-08-29 11:02:04,000 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 11:02:04,002 - app.http.routes.analog - INFO - [analog.py:102 - get_analogues_xlsx()] - Request to receive analogues table xlsx
2025-08-29 11:02:04,003 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 11:02:04,004 - app.services.analog.analog - INFO - [analog.py:141 - get_analogues_xlsx()] - Star get_analog_xlsx
2025-08-29 11:02:04,004 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 11:02:04,005 - app.services.analog.table_generator - INFO - [table_generator.py:75 - generate_analogs_xlsx()] - Star generate_analogs_csv
2025-08-29 11:02:04,006 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 11:02:04,007 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 11:02:04,008 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 11:02:04,009 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 11:02:04,011 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 11:02:04,012 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 11:02:04,014 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 11:02:04,014 - app.http.routes.analog - ERROR - [analog.py:113 - get_analogues_xlsx()] - No analogues found for patent
2025-08-29 11:04:07,355 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 11:04:07,357 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-08-29 11:04:07,357 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-08-29 11:04:07,358 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 11:04:07,360 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 11:04:07,360 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 11:04:07,361 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 11:04:07,362 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 11:04:07,364 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 11:04:07,364 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-08-29 11:04:07,365 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-08-29 11:04:21,591 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 11:04:21,593 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 11:04:21,593 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 11:04:21,594 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 11:04:21,595 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 11:04:21,597 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 11:04:21,598 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 11:04:21,598 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 11:04:21,599 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 11:04:21,601 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 11:04:21,601 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 11:04:26,116 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 11:04:26,117 - app.http.routes.analog - INFO - [analog.py:216 - create_upidp()] - Request to receive analogues
2025-08-29 11:04:26,119 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 11:04:26,120 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 11:04:26,122 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:92 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 11:04:26,123 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 11:04:26,124 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 11:04:26,125 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 11:04:26,126 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 11:04:26,127 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 11:04:26,127 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 11:04:26,128 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 11:04:26,128 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 5GTS/wy7HfZKuJD8eU0Xhg==
2025-08-29 11:04:26,129 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 11:04:26,129 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 11:04:26,130 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 11:04:26,133 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 11:04:26,133 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 11:04:26,134 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 11:04:26,135 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: PyJ3eZCR5fXzdYSKoll2tk37peI=
2025-08-29 11:04:26,135 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 11:04:26,136 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 06:04:25 GMT
2025-08-29 11:04:26,136 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 11:04:26,137 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 11:04:26,137 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...c6154521c2b0_53961.89"}' [333 bytes]
2025-08-29 11:04:26,139 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 11:04:26,141 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 11:04:26,142 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 11:04:26,142 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 11:04:27,383 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 11:04:27,384 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 11:04:27,386 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 11:04:27,386 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 11:04:27,387 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU2268840C2":{"url":"...синг завершен успешно"}' [1246 bytes]
2025-08-29 11:04:27,389 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 11:04:27,390 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 11:04:27,391 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 11:04:27,391 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 11:04:27,392 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 11:04:27,392 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 11:04:27,393 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 11:04:27,394 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 11:04:27,395 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 11:04:27,395 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 11:04:27,397 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 11:04:27,399 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 11:04:27,402 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:159 - analog_link_generate()] - Error in analog_generate: name 'analog' is not defined
2025-08-29 12:24:01,079 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 12:26:20,756 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:26:20,758 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 12:26:20,758 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:26:20,759 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 12:26:20,762 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 12:26:20,763 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 12:27:53,174 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:27:53,175 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 12:27:53,176 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:29:23,893 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:29:23,894 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 12:29:23,895 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:29:33,691 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:29:33,693 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 12:29:33,694 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 12:29:33,695 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:29:33,696 - app.services.analog.analog - ERROR - [analog.py:78 - search_patent_analogues()] - Error in search_patent_analogues: PatentRawDataGenerator.analog_link_generate() takes 1 positional argument but 2 were given
2025-08-29 12:31:04,927 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 12:31:18,856 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:31:18,858 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 12:31:18,858 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:31:18,859 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 12:31:18,862 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 12:31:18,863 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 12:31:30,624 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:31:30,625 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 12:31:30,627 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 12:31:30,628 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:31:30,629 - app.services.analog.analog - ERROR - [analog.py:78 - search_patent_analogues()] - Error in search_patent_analogues: PatentRawDataGenerator.analog_link_generate() takes 1 positional argument but 2 were given
2025-08-29 12:35:17,839 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 12:35:29,658 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:35:29,660 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 12:35:29,660 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:35:29,661 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 12:35:29,664 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 12:35:29,665 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 12:35:35,341 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:35:35,343 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 12:35:35,345 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 12:35:35,346 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:35:35,347 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 12:35:35,348 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 12:35:35,348 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 12:35:35,360 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 12:35:35,361 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 12:35:35,362 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 12:35:35,362 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 12:35:35,363 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 12:35:35,364 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: V8TJGgXK1zUYW7NS1uHFuw==
2025-08-29 12:35:35,364 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 12:35:35,365 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 12:35:35,365 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 12:35:35,368 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 12:35:35,369 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 12:35:35,370 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 12:35:35,370 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: cmPQtk62g2kvVlZQsEb7CIV6BZc=
2025-08-29 12:35:35,371 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 12:35:35,371 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 07:35:35 GMT
2025-08-29 12:35:35,372 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 12:35:35,372 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 12:35:35,373 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_59431.125"}' [460 bytes]
2025-08-29 12:35:35,375 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 12:35:35,376 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 12:35:35,377 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 12:35:35,378 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 12:35:55,374 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 96 20 fb 01 [binary, 4 bytes]
2025-08-29 12:35:55,375 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 12:35:55,376 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 96 20 fb 01 [binary, 4 bytes]
2025-08-29 12:35:55,376 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING bb 4f 42 ad [binary, 4 bytes]
2025-08-29 12:35:55,377 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG bb 4f 42 ad [binary, 4 bytes]
2025-08-29 12:35:55,378 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 12:36:15,368 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 07 33 32 94 [binary, 4 bytes]
2025-08-29 12:36:15,369 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 12:36:15,369 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 07 33 32 94 [binary, 4 bytes]
2025-08-29 12:36:15,370 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING a5 c8 c7 0f [binary, 4 bytes]
2025-08-29 12:36:15,370 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG a5 c8 c7 0f [binary, 4 bytes]
2025-08-29 12:36:15,371 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 12:36:35,366 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING a4 07 a3 74 [binary, 4 bytes]
2025-08-29 12:36:35,367 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG a4 07 a3 74 [binary, 4 bytes]
2025-08-29 12:36:35,367 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 19 a2 95 04 [binary, 4 bytes]
2025-08-29 12:36:35,368 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 12:36:35,369 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 19 a2 95 04 [binary, 4 bytes]
2025-08-29 12:36:35,369 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 12:36:55,385 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING f3 57 87 a5 [binary, 4 bytes]
2025-08-29 12:36:55,386 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 12:36:55,386 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 91 fd 83 63 [binary, 4 bytes]
2025-08-29 12:36:55,387 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 91 fd 83 63 [binary, 4 bytes]
2025-08-29 12:36:55,387 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG f3 57 87 a5 [binary, 4 bytes]
2025-08-29 12:36:55,388 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 12:37:15,391 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING a7 21 73 71 [binary, 4 bytes]
2025-08-29 12:37:15,392 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 12:37:15,392 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG a7 21 73 71 [binary, 4 bytes]
2025-08-29 12:37:15,393 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 6d ff 72 38 [binary, 4 bytes]
2025-08-29 12:37:15,393 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 6d ff 72 38 [binary, 4 bytes]
2025-08-29 12:37:15,394 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 12:37:35,405 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 15 45 4b b8 [binary, 4 bytes]
2025-08-29 12:37:35,406 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 12:37:35,406 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 15 45 4b b8 [binary, 4 bytes]
2025-08-29 12:37:35,407 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING '\x02\x02\x0fA' [text, 4 bytes]
2025-08-29 12:37:35,407 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG '\x02\x02\x0fA' [text, 4 bytes]
2025-08-29 12:37:35,408 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 12:37:58,322 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 12:38:07,761 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:38:07,763 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 12:38:07,763 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:38:07,764 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 12:38:07,767 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 12:38:07,768 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 12:38:14,552 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:38:14,554 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 12:38:14,555 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 12:38:14,556 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:38:14,557 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 12:38:14,558 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 12:38:14,558 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 12:38:14,571 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 12:38:14,572 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 12:38:14,572 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 12:38:14,573 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 12:38:14,573 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 12:38:14,574 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: TQn4VbE+xNNhKFuT0ieo9g==
2025-08-29 12:38:14,575 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 12:38:14,575 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 12:38:14,576 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 12:38:14,579 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 12:38:14,580 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 12:38:14,580 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 12:38:14,581 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: WlwilaavrijA2Od1M1GJbsUa6nU=
2025-08-29 12:38:14,581 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 12:38:14,582 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 07:38:13 GMT
2025-08-29 12:38:14,582 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 12:38:14,583 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 12:38:14,584 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_59590.343"}' [460 bytes]
2025-08-29 12:38:14,586 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 12:38:14,587 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 12:38:14,588 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 12:38:14,589 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 12:38:34,568 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 'DNQ8' [text, 4 bytes]
2025-08-29 12:38:34,569 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 12:38:34,569 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 'DNQ8' [text, 4 bytes]
2025-08-29 12:38:34,570 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 7f 8e 0a 1c [binary, 4 bytes]
2025-08-29 12:38:34,570 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 7f 8e 0a 1c [binary, 4 bytes]
2025-08-29 12:38:34,572 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 12:38:35,261 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed","message":"Ошибка: "}' [76 bytes]
2025-08-29 12:38:35,263 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 12:38:35,263 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 12:38:35,264 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 12:38:35,265 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 12:38:35,266 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 12:38:35,267 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 12:38:35,267 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 12:38:35,268 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 12:38:35,268 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 12:38:35,269 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 12:47:29,330 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 12:47:47,213 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:47:47,214 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 12:47:47,215 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:47:47,215 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 12:47:47,219 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 12:47:47,220 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 12:47:56,837 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:47:56,838 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 12:47:56,840 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 12:47:56,841 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:47:56,842 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 12:47:56,843 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 12:47:56,843 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 12:47:56,855 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 12:47:56,856 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 12:47:56,857 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 12:47:56,857 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 12:47:56,858 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 12:47:56,858 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 8arvh+Ir0s8445zHEJ6LKQ==
2025-08-29 12:47:56,859 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 12:47:56,859 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 12:47:56,860 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 12:47:56,992 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 500 Internal Server Error
2025-08-29 12:47:56,993 - websockets.client - DEBUG - [client.py:320 - parse()] - < content-type: text/plain; charset=utf-8
2025-08-29 12:47:56,993 - websockets.client - DEBUG - [client.py:320 - parse()] - < content-length: 21
2025-08-29 12:47:56,994 - websockets.client - DEBUG - [client.py:320 - parse()] - < connection: close
2025-08-29 12:47:56,994 - websockets.client - DEBUG - [client.py:322 - parse()] - < [body] (21 bytes)
2025-08-29 12:47:56,995 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 12:47:56,995 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 12:47:56,996 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 12:47:56,997 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 12:47:56,997 - app.clients.parser_client - ERROR - [parser_client.py:70 - generate_analog_link_ws()] - WebSocket error: server rejected WebSocket connection: HTTP 500
2025-08-29 12:48:45,509 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 12:49:07,566 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:49:07,568 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 12:49:07,568 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:49:07,569 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 12:49:07,572 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 12:49:07,573 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 12:49:13,718 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:49:13,720 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 12:49:13,721 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 12:49:13,722 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:49:13,723 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 12:49:13,724 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 12:49:13,725 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 12:49:13,736 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 12:49:13,738 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 12:49:13,738 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 12:49:13,739 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 12:49:13,739 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 12:49:13,740 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: OOd144BgcUdQVqlnFcKsTw==
2025-08-29 12:49:13,740 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 12:49:13,741 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 12:49:13,741 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 12:49:13,745 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 12:49:13,745 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 12:49:13,746 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 12:49:13,746 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: FhWg9Dc1cJqIskznCd7RJ3Dllrk=
2025-08-29 12:49:13,747 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 12:49:13,747 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 07:49:13 GMT
2025-08-29 12:49:13,748 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 12:49:13,749 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 12:49:13,749 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...en_1830913972_60249.5"}' [458 bytes]
2025-08-29 12:49:13,752 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 12:49:13,752 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 12:49:13,754 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 12:49:13,755 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 12:49:15,482 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 12:49:15,483 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 12:49:15,484 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 12:49:15,485 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 12:49:15,486 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU2427295C2":{"url":"...синг завершен успешно"}' [1196 bytes]
2025-08-29 12:49:15,486 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 12:49:15,487 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 12:49:15,488 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 12:49:15,489 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 12:49:15,489 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 12:49:15,490 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 12:49:15,490 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 12:49:15,491 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 12:49:15,492 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 12:49:15,492 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 12:49:15,494 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 12:49:15,495 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 12:49:15,496 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:141 - analog_link_generate()] - Error in analog_generate: name 'analog' is not defined
2025-08-29 12:59:35,548 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 12:59:45,256 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:59:45,258 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 12:59:45,258 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:59:45,259 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 12:59:45,262 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 12:59:45,263 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 12:59:52,598 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 12:59:52,600 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 12:59:52,601 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 12:59:52,603 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 12:59:52,603 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 12:59:52,604 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 12:59:52,605 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 12:59:52,617 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 12:59:52,618 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 12:59:52,618 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 12:59:52,619 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 12:59:52,619 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 12:59:52,620 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: kLQmPH6lsUGzNjNf5m/WVQ==
2025-08-29 12:59:52,620 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 12:59:52,621 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 12:59:52,621 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 12:59:52,625 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 12:59:52,625 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 12:59:52,626 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 12:59:52,627 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: xbQU01uOe68JKxnV3KqVSXc4NE8=
2025-08-29 12:59:52,627 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 12:59:52,628 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 07:59:51 GMT
2025-08-29 12:59:52,628 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 12:59:52,629 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 12:59:52,630 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...n_1830913972_60888.39"}' [459 bytes]
2025-08-29 12:59:52,632 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 12:59:52,633 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 12:59:52,634 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 12:59:52,635 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 12:59:54,322 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 12:59:54,324 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 12:59:54,325 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 12:59:54,325 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 12:59:54,326 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU2427295C2":{"url":"...синг завершен успешно"}' [1196 bytes]
2025-08-29 12:59:54,327 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 12:59:54,328 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 12:59:54,328 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 12:59:54,329 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 12:59:54,330 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 12:59:54,330 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 12:59:54,331 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 12:59:54,331 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 12:59:54,332 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 12:59:54,333 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 12:59:54,334 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 12:59:54,336 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 12:59:54,336 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:141 - analog_link_generate()] - Error in analog_generate: name 'analog' is not defined
2025-08-29 13:00:28,304 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 13:00:40,617 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:00:40,619 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 13:00:40,619 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:00:40,620 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 13:00:40,623 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 13:00:40,623 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 13:00:49,998 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:00:49,999 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 13:00:50,001 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 13:00:50,002 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:00:50,003 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 13:00:50,004 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 13:00:50,004 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 13:00:50,015 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 13:00:50,016 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 13:00:50,017 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 13:00:50,017 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 13:00:50,018 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 13:00:50,018 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: C9+Ij5u08A3SEjakLuDYVA==
2025-08-29 13:00:50,019 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 13:00:50,019 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 13:00:50,020 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 13:00:50,023 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 13:00:50,024 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 13:00:50,024 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 13:00:50,025 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: e23O6BxB4y2iAQlrXJwNbv/RXHA=
2025-08-29 13:00:50,025 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 13:00:50,026 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 08:00:49 GMT
2025-08-29 13:00:50,026 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 13:00:50,027 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 13:00:50,028 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_60945.781"}' [460 bytes]
2025-08-29 13:00:50,030 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 13:00:50,031 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 13:00:50,032 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 13:00:50,033 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 13:00:52,419 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 13:00:52,420 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 13:00:52,420 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 13:00:52,421 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 13:00:52,422 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU2427295C2":{"url":"...синг завершен успешно"}' [1196 bytes]
2025-08-29 13:00:52,423 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 13:00:52,424 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:00:52,424 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 13:00:52,425 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:00:52,426 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 13:00:52,426 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 13:00:52,427 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 13:00:52,427 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 13:00:52,428 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 13:00:52,429 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 13:00:52,430 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 13:00:52,432 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 13:00:52,433 - app.services.analog.raw_data_generator - INFO - [raw_data_generator.py:135 - analog_link_generate()] - The generation of analogues was successful
2025-08-29 13:14:52,152 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 13:15:15,284 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:15:15,286 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 13:15:15,287 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:15:15,287 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 13:15:15,290 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 13:15:15,291 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 13:15:22,231 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:15:22,233 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 13:15:22,234 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 13:15:22,235 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:15:22,236 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 13:15:22,237 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 13:15:22,238 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 13:15:22,249 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 13:15:22,250 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 13:15:22,251 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 13:15:22,251 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 13:15:22,252 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 13:15:22,252 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: dODw5qSsq6xO1DshzB4yUA==
2025-08-29 13:15:22,253 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 13:15:22,253 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 13:15:22,254 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 13:15:22,257 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 13:15:22,258 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 13:15:22,258 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 13:15:22,259 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: Cv6Tgh0DeRAnlRnl3nSe0lwkZR8=
2025-08-29 13:15:22,259 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 13:15:22,260 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 08:15:21 GMT
2025-08-29 13:15:22,260 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 13:15:22,261 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 13:15:22,262 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_61818.015"}' [460 bytes]
2025-08-29 13:15:22,263 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 13:15:22,264 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 13:15:22,266 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 13:15:22,266 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 13:15:42,261 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 29 d0 a2 cb [binary, 4 bytes]
2025-08-29 13:15:42,261 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:15:42,262 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 29 d0 a2 cb [binary, 4 bytes]
2025-08-29 13:15:42,263 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING cc cc e6 26 [binary, 4 bytes]
2025-08-29 13:15:42,263 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG cc cc e6 26 [binary, 4 bytes]
2025-08-29 13:15:42,264 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:15:43,252 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed","message":"Ошибка: "}' [76 bytes]
2025-08-29 13:15:43,254 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 13:15:43,254 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 13:15:43,255 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 13:15:43,256 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:15:43,257 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 13:15:43,258 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:15:43,259 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 13:15:43,259 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 13:15:43,260 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 13:15:43,260 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 13:16:14,630 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 13:16:33,012 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:16:33,014 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 13:16:33,014 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:16:33,015 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 13:16:33,018 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 13:16:33,019 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 13:16:39,028 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:16:39,029 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 13:16:39,031 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 13:16:39,032 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:16:39,033 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 13:16:39,034 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 13:16:39,034 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 13:16:39,046 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 13:16:39,047 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 13:16:39,048 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 13:16:39,048 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 13:16:39,049 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 13:16:39,049 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: PsmxIK1WSg7rAAY6ZbicWA==
2025-08-29 13:16:39,050 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 13:16:39,050 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 13:16:39,051 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 13:16:39,054 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 13:16:39,055 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 13:16:39,055 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 13:16:39,056 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: r9EKCOI2QnnbPLw8QPNN1kame98=
2025-08-29 13:16:39,056 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 13:16:39,057 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 08:16:38 GMT
2025-08-29 13:16:39,058 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 13:16:39,058 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 13:16:39,059 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_61894.812"}' [460 bytes]
2025-08-29 13:16:39,061 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 13:16:39,062 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 13:16:39,063 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 13:16:39,064 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 13:16:39,167 - core.connection_manager - DEBUG - [connection_manager.py:31 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 13:16:39,167 - core.connection_manager - DEBUG - [connection_manager.py:33 - print_active_connections()] -   1830913972: 1 соединений
2025-08-29 13:16:59,050 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING '.虸' [text, 4 bytes]
2025-08-29 13:16:59,051 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:16:59,051 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 1c 85 50 67 [binary, 4 bytes]
2025-08-29 13:16:59,052 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 1c 85 50 67 [binary, 4 bytes]
2025-08-29 13:16:59,053 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG '.虸' [text, 4 bytes]
2025-08-29 13:16:59,053 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:16:59,265 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed","message":"Ошибка: "}' [76 bytes]
2025-08-29 13:16:59,267 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 13:16:59,267 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 13:16:59,268 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 13:16:59,269 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:16:59,270 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 13:16:59,271 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:16:59,271 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 13:16:59,272 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 13:16:59,273 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 13:16:59,273 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 13:33:28,348 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 13:33:40,763 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:33:40,764 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 13:33:40,765 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:33:40,766 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 13:33:40,769 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 13:33:40,769 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 13:33:46,498 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:33:46,499 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 13:33:46,501 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 13:33:46,502 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:33:46,503 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 13:33:46,504 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 13:33:46,504 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 13:33:46,515 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 13:33:46,516 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 13:33:46,517 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 13:33:46,517 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 13:33:46,518 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 13:33:46,518 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: VwpgaPGSUI+cxQZVeNpwDQ==
2025-08-29 13:33:46,519 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 13:33:46,520 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 13:33:46,520 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 13:33:46,523 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 13:33:46,524 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 13:33:46,524 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 13:33:46,525 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: Od0irVZSkjgEhPklTXUcvX+oCN4=
2025-08-29 13:33:46,526 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 13:33:46,526 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 08:33:45 GMT
2025-08-29 13:33:46,527 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 13:33:46,527 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 13:33:46,528 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_62922.281"}' [460 bytes]
2025-08-29 13:33:46,531 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 13:33:46,532 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 13:33:46,533 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 13:33:46,534 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 13:33:46,628 - core.connection_manager - DEBUG - [connection_manager.py:31 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 13:33:46,628 - core.connection_manager - DEBUG - [connection_manager.py:33 - print_active_connections()] -   1830913972: 1 соединений
2025-08-29 13:34:06,523 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING fa ce 35 10 [binary, 4 bytes]
2025-08-29 13:34:06,524 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG fa ce 35 10 [binary, 4 bytes]
2025-08-29 13:34:06,524 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING db 41 92 94 [binary, 4 bytes]
2025-08-29 13:34:06,525 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:34:06,526 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG db 41 92 94 [binary, 4 bytes]
2025-08-29 13:34:06,526 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:34:26,544 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 5e c0 84 95 [binary, 4 bytes]
2025-08-29 13:34:26,545 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:34:26,545 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING f9 fa bc dd [binary, 4 bytes]
2025-08-29 13:34:26,546 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG f9 fa bc dd [binary, 4 bytes]
2025-08-29 13:34:26,546 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 5e c0 84 95 [binary, 4 bytes]
2025-08-29 13:34:26,547 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:34:46,525 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING e1 39 72 19 [binary, 4 bytes]
2025-08-29 13:34:46,526 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:34:46,526 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 92 76 11 16 [binary, 4 bytes]
2025-08-29 13:34:46,527 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 92 76 11 16 [binary, 4 bytes]
2025-08-29 13:34:46,527 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG e1 39 72 19 [binary, 4 bytes]
2025-08-29 13:34:46,528 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:35:06,537 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 4c 97 e6 04 [binary, 4 bytes]
2025-08-29 13:35:06,538 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:35:06,538 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING cd e6 58 a4 [binary, 4 bytes]
2025-08-29 13:35:06,539 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG cd e6 58 a4 [binary, 4 bytes]
2025-08-29 13:35:06,539 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 4c 97 e6 04 [binary, 4 bytes]
2025-08-29 13:35:06,540 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:35:26,549 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 62 84 7b bf [binary, 4 bytes]
2025-08-29 13:35:26,550 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:35:26,550 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING b8 ad 74 a2 [binary, 4 bytes]
2025-08-29 13:35:26,551 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG b8 ad 74 a2 [binary, 4 bytes]
2025-08-29 13:35:26,551 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 62 84 7b bf [binary, 4 bytes]
2025-08-29 13:35:26,552 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:35:35,107 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 13:35:35,108 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 13:35:35,109 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 13:35:35,110 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 13:35:35,111 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU2427295C2":{"url":"...синг завершен успешно"}' [1196 bytes]
2025-08-29 13:35:35,111 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 13:35:35,112 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:35:35,112 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 13:35:35,113 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:35:35,114 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 13:35:35,114 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 13:35:35,115 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 13:35:35,116 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 13:35:35,116 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 13:35:35,117 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 13:35:35,118 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 13:35:35,120 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 13:35:35,121 - app.services.analog.raw_data_generator - INFO - [raw_data_generator.py:135 - analog_link_generate()] - The generation of analogues was successful
2025-08-29 13:38:03,432 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:38:03,434 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 13:38:03,435 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 13:38:03,436 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:38:03,437 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 13:38:03,438 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 13:38:03,439 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 13:38:03,441 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 13:38:03,442 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 13:38:03,442 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 13:38:03,443 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 13:38:03,444 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 13:38:03,444 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: Bu/XtGFP9EabLCDETrkncA==
2025-08-29 13:38:03,445 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 13:38:03,445 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 13:38:03,446 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 13:38:03,449 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 13:38:03,449 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 13:38:03,450 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 13:38:03,451 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: xNvICyXBNbOGTevFnae790j7k7c=
2025-08-29 13:38:03,451 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 13:38:03,452 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 08:38:03 GMT
2025-08-29 13:38:03,452 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 13:38:03,453 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 13:38:03,454 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_63179.203"}' [460 bytes]
2025-08-29 13:38:03,456 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 13:38:03,457 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 13:38:03,458 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 13:38:03,459 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 13:38:03,577 - core.connection_manager - DEBUG - [connection_manager.py:31 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 13:38:03,577 - core.connection_manager - DEBUG - [connection_manager.py:33 - print_active_connections()] -   1830913972: 2 соединений
2025-08-29 13:38:23,464 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 51 32 a0 77 [binary, 4 bytes]
2025-08-29 13:38:23,465 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:38:23,465 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING e2 b4 c4 9f [binary, 4 bytes]
2025-08-29 13:38:23,466 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG e2 b4 c4 9f [binary, 4 bytes]
2025-08-29 13:38:23,466 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 51 32 a0 77 [binary, 4 bytes]
2025-08-29 13:38:23,467 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:38:43,470 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 22 d9 5f 90 [binary, 4 bytes]
2025-08-29 13:38:43,470 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:38:43,471 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 68 91 2b 8d [binary, 4 bytes]
2025-08-29 13:38:43,472 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 68 91 2b 8d [binary, 4 bytes]
2025-08-29 13:38:43,472 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 22 d9 5f 90 [binary, 4 bytes]
2025-08-29 13:38:43,473 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:39:03,468 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 58 4c fa 35 [binary, 4 bytes]
2025-08-29 13:39:03,469 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:39:03,469 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 58 4c fa 35 [binary, 4 bytes]
2025-08-29 13:39:03,470 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:39:03,499 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 79 a6 6c 3a [binary, 4 bytes]
2025-08-29 13:39:03,499 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 79 a6 6c 3a [binary, 4 bytes]
2025-08-29 13:39:23,471 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 4b b9 1f 0e [binary, 4 bytes]
2025-08-29 13:39:23,471 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:39:23,472 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 4b b9 1f 0e [binary, 4 bytes]
2025-08-29 13:39:23,473 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:39:23,502 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 8b 6f 42 eb [binary, 4 bytes]
2025-08-29 13:39:23,502 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 8b 6f 42 eb [binary, 4 bytes]
2025-08-29 13:39:43,500 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 38 29 f8 18 [binary, 4 bytes]
2025-08-29 13:39:43,501 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:39:43,501 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 38 29 f8 18 [binary, 4 bytes]
2025-08-29 13:39:43,502 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING f3 19 a2 2f [binary, 4 bytes]
2025-08-29 13:39:43,502 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG f3 19 a2 2f [binary, 4 bytes]
2025-08-29 13:39:43,503 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:40:03,498 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING f2 64 8d 2f [binary, 4 bytes]
2025-08-29 13:40:03,499 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:40:03,499 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG f2 64 8d 2f [binary, 4 bytes]
2025-08-29 13:40:03,500 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING b2 0b 51 08 [binary, 4 bytes]
2025-08-29 13:40:03,500 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG b2 0b 51 08 [binary, 4 bytes]
2025-08-29 13:40:03,501 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:40:23,508 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING '\x15:\x1f~' [text, 4 bytes]
2025-08-29 13:40:23,508 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG '\x15:\x1f~' [text, 4 bytes]
2025-08-29 13:40:23,509 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING b6 23 6d 1e [binary, 4 bytes]
2025-08-29 13:40:23,510 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:40:23,511 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG b6 23 6d 1e [binary, 4 bytes]
2025-08-29 13:40:23,511 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:41:07,623 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 13:41:41,528 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:41:41,531 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 13:41:41,532 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:41:41,532 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 13:41:41,539 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 13:41:41,540 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 13:41:47,653 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:41:47,655 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 13:41:47,656 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 13:41:47,657 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:41:47,658 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 13:41:47,659 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 13:41:47,659 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 13:41:47,671 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 13:41:47,672 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 13:41:47,672 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 13:41:47,673 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 13:41:47,674 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 13:41:47,674 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: YTJGM9aLguGQNP+fiLPgIA==
2025-08-29 13:41:47,675 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 13:41:47,675 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 13:41:47,676 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 13:41:47,679 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 13:41:47,680 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 13:41:47,680 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 13:41:47,681 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: MzwZHfiZuZd6DUj67eEpBdYrNxw=
2025-08-29 13:41:47,681 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 13:41:47,682 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 08:41:46 GMT
2025-08-29 13:41:47,683 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 13:41:47,683 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 13:41:47,684 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_63403.437"}' [460 bytes]
2025-08-29 13:41:47,686 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 13:41:47,687 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 13:41:47,688 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 13:41:47,689 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 13:41:47,803 - core.connection_manager - DEBUG - [connection_manager.py:31 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 13:41:47,804 - core.connection_manager - DEBUG - [connection_manager.py:33 - print_active_connections()] -   1830913972: 1 соединений
2025-08-29 13:42:07,688 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 9f 61 26 22 [binary, 4 bytes]
2025-08-29 13:42:07,689 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:42:07,689 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 9f 61 26 22 [binary, 4 bytes]
2025-08-29 13:42:07,690 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 29 10 6a 8a [binary, 4 bytes]
2025-08-29 13:42:07,690 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 29 10 6a 8a [binary, 4 bytes]
2025-08-29 13:42:07,691 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:42:27,693 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING b5 cb a2 af [binary, 4 bytes]
2025-08-29 13:42:27,694 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:42:27,694 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG b5 cb a2 af [binary, 4 bytes]
2025-08-29 13:42:27,695 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 20 84 e2 8b [binary, 4 bytes]
2025-08-29 13:42:27,695 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 20 84 e2 8b [binary, 4 bytes]
2025-08-29 13:42:27,696 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:42:38,215 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...text\' is not defined"}' [102 bytes]
2025-08-29 13:42:38,216 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 13:42:38,217 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 13:42:38,218 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 13:42:38,219 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:42:38,220 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 13:42:38,220 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:42:38,221 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 13:42:38,222 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 13:42:38,222 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 13:42:38,223 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 13:44:15,174 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 13:44:25,185 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:44:25,187 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 13:44:25,187 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:44:25,188 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 13:44:25,191 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 13:44:25,191 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 13:44:31,627 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:44:31,629 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 13:44:31,630 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 13:44:31,632 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:44:31,632 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 13:44:31,633 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 13:44:31,634 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 13:44:31,645 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 13:44:31,646 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 13:44:31,646 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 13:44:31,647 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 13:44:31,648 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 13:44:31,648 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 6MMK8a7UQ3CgbYVxb4H5Jg==
2025-08-29 13:44:31,649 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 13:44:31,649 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 13:44:31,650 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 13:44:31,653 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 13:44:31,653 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 13:44:31,654 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 13:44:31,655 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: 2Ia7qPkMQ+3L63Gf5K70scnL8p8=
2025-08-29 13:44:31,655 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 13:44:31,656 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 08:44:30 GMT
2025-08-29 13:44:31,656 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 13:44:31,657 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 13:44:31,658 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_63567.421"}' [460 bytes]
2025-08-29 13:44:31,660 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 13:44:31,661 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 13:44:31,662 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 13:44:31,663 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 13:44:31,745 - core.connection_manager - DEBUG - [connection_manager.py:31 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 13:44:31,746 - core.connection_manager - DEBUG - [connection_manager.py:33 - print_active_connections()] -   1830913972: 1 соединений
2025-08-29 13:44:51,671 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 7b 0b 8f 17 [binary, 4 bytes]
2025-08-29 13:44:51,672 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 7b 0b 8f 17 [binary, 4 bytes]
2025-08-29 13:44:51,672 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 'ܳP\x1d' [text, 4 bytes]
2025-08-29 13:44:51,673 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:44:51,674 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 'ܳP\x1d' [text, 4 bytes]
2025-08-29 13:44:51,674 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:45:11,652 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING e9 14 de 68 [binary, 4 bytes]
2025-08-29 13:45:11,652 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:45:11,653 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG e9 14 de 68 [binary, 4 bytes]
2025-08-29 13:45:11,654 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 40 d9 17 0f [binary, 4 bytes]
2025-08-29 13:45:11,654 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 40 d9 17 0f [binary, 4 bytes]
2025-08-29 13:45:11,655 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:45:31,662 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING f5 55 aa 28 [binary, 4 bytes]
2025-08-29 13:45:31,662 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:45:31,663 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 90 f8 a7 9a [binary, 4 bytes]
2025-08-29 13:45:31,664 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 90 f8 a7 9a [binary, 4 bytes]
2025-08-29 13:45:31,664 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG f5 55 aa 28 [binary, 4 bytes]
2025-08-29 13:45:31,665 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:45:51,659 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 3b ef b4 f6 [binary, 4 bytes]
2025-08-29 13:45:51,660 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 3b ef b4 f6 [binary, 4 bytes]
2025-08-29 13:45:51,660 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 56 b6 6e 65 [binary, 4 bytes]
2025-08-29 13:45:51,661 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:45:51,662 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 56 b6 6e 65 [binary, 4 bytes]
2025-08-29 13:45:51,662 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:46:11,649 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 'ۤ\x1f-' [text, 4 bytes]
2025-08-29 13:46:11,650 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:46:11,650 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 'ۤ\x1f-' [text, 4 bytes]
2025-08-29 13:46:11,651 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 6e cb 04 3b [binary, 4 bytes]
2025-08-29 13:46:11,651 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 6e cb 04 3b [binary, 4 bytes]
2025-08-29 13:46:11,652 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:46:31,669 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 6b c1 d4 a7 [binary, 4 bytes]
2025-08-29 13:46:31,669 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:46:31,669 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING ab b2 8b db [binary, 4 bytes]
2025-08-29 13:46:31,670 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG ab b2 8b db [binary, 4 bytes]
2025-08-29 13:46:31,670 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 6b c1 d4 a7 [binary, 4 bytes]
2025-08-29 13:46:31,671 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:46:51,652 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING db 67 62 75 [binary, 4 bytes]
2025-08-29 13:46:51,653 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG db 67 62 75 [binary, 4 bytes]
2025-08-29 13:46:51,653 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 3b 25 d2 e4 [binary, 4 bytes]
2025-08-29 13:46:51,654 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:46:51,655 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 3b 25 d2 e4 [binary, 4 bytes]
2025-08-29 13:46:51,655 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:47:11,646 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING bb f1 d3 66 [binary, 4 bytes]
2025-08-29 13:47:11,647 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:47:11,647 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG bb f1 d3 66 [binary, 4 bytes]
2025-08-29 13:47:11,648 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING f0 a3 51 4d [binary, 4 bytes]
2025-08-29 13:47:11,649 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG f0 a3 51 4d [binary, 4 bytes]
2025-08-29 13:47:11,649 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:47:16,649 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 13:47:16,650 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":80,"stage":"extra...чение данных патентов"}' [122 bytes]
2025-08-29 13:47:16,651 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":90,"stage":"final..."Завершение обработки"}' [106 bytes]
2025-08-29 13:47:16,652 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":100,"stage":"comp...синг завершен успешно"}' [113 bytes]
2025-08-29 13:47:16,652 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"result","data":{"RU2427295C2":{"url":"...синг завершен успешно"}' [1196 bytes]
2025-08-29 13:47:16,653 - app.clients.parser_client - DEBUG - [parser_client.py:57 - generate_analog_link_ws()] - WebSocket parser process completed successfully
2025-08-29 13:47:16,654 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:47:16,654 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 13:47:16,655 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:47:16,656 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 13:47:16,656 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 13:47:16,657 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 13:47:16,657 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 13:47:16,658 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 13:47:16,659 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 13:47:16,660 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 13:47:16,662 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 13:47:16,663 - app.services.analog.raw_data_generator - INFO - [raw_data_generator.py:135 - analog_link_generate()] - The generation of analogues was successful
2025-08-29 13:52:06,862 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 13:52:13,021 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:52:13,022 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 13:52:13,023 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:52:13,024 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 13:52:13,026 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 13:52:13,027 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 13:52:22,104 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:52:22,105 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 13:52:22,107 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 13:52:22,108 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:52:22,109 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 13:52:22,110 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 13:52:22,110 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 13:52:22,122 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 13:52:22,122 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 13:52:22,123 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 13:52:22,124 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 13:52:22,124 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 13:52:22,125 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: zo1WJh9ncUi0DBFj2XIVlA==
2025-08-29 13:52:22,125 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 13:52:22,126 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 13:52:22,127 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 13:52:22,130 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 13:52:22,130 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 13:52:22,131 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 13:52:22,131 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: EtREfSMDahE+5Ug/kgnHjtk1zXo=
2025-08-29 13:52:22,132 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 13:52:22,132 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 08:52:21 GMT
2025-08-29 13:52:22,133 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 13:52:22,134 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 13:52:22,134 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...n_1830913972_64037.89"}' [459 bytes]
2025-08-29 13:52:22,137 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 13:52:22,138 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 13:52:22,139 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 13:52:22,140 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 13:52:22,223 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 13:52:22,223 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 13:52:42,144 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 63 48 98 52 [binary, 4 bytes]
2025-08-29 13:52:42,145 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 13:52:42,145 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 'u63@' [text, 4 bytes]
2025-08-29 13:52:42,146 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 'u63@' [text, 4 bytes]
2025-08-29 13:52:42,147 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 63 48 98 52 [binary, 4 bytes]
2025-08-29 13:52:42,147 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 13:52:52,253 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed","message":"Ошибка: "}' [76 bytes]
2025-08-29 13:52:52,255 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 13:52:52,256 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 13:52:52,256 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 13:52:52,258 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:52:52,258 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 13:52:52,259 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:52:52,260 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 13:52:52,260 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 13:52:52,261 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 13:52:52,261 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 13:54:09,766 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 13:54:13,887 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:54:13,888 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 13:54:13,889 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:54:13,890 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 13:54:13,893 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 13:54:13,894 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 13:54:22,493 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:54:22,495 - app.http.routes.analog - INFO - [analog.py:242 - create_upidp()] - Request to receive analogues
2025-08-29 13:54:22,496 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 13:54:22,498 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 13:54:22,499 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 13:54:22,500 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 13:54:22,500 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 13:54:22,512 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 13:54:22,513 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 13:54:22,514 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 13:54:22,514 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 13:54:22,515 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 13:54:22,515 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: qkpaT108MB/6U49oMvPV7A==
2025-08-29 13:54:22,516 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 13:54:22,517 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 13:54:22,517 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 13:54:22,521 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 13:54:22,521 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 13:54:22,522 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 13:54:22,522 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: eJO6SugyejlIVp7Y41jhA5EiK0w=
2025-08-29 13:54:22,523 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 13:54:22,524 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 08:54:22 GMT
2025-08-29 13:54:22,524 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 13:54:22,525 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 13:54:22,526 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_64158.281"}' [460 bytes]
2025-08-29 13:54:22,528 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 13:54:22,529 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 13:54:22,530 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 13:54:22,531 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 13:54:22,611 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 13:54:22,611 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 13:54:23,868 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 13:54:23,870 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed... attribute \'status\'"}' [115 bytes]
2025-08-29 13:54:23,871 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 13:54:23,871 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 13:54:23,872 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 13:54:23,873 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:54:23,874 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 13:54:23,875 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 13:54:23,876 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 13:54:23,876 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 13:54:23,877 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 13:54:23,877 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 13:54:35,657 - core.connection_manager - DEBUG - [connection_manager.py:30 - print_active_connections()] - 📭 Нет активных подключений
2025-08-29 13:55:07,935 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 13:55:07,936 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 13:55:07,937 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 14:08:40,988 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 14:14:05,839 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:14:05,841 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 14:14:05,842 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 14:14:05,842 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 14:14:05,854 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 14:14:05,855 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 14:15:16,600 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:15:16,601 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 14:15:16,602 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 14:16:44,509 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:16:44,510 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 14:16:44,511 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 14:16:53,013 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:16:53,015 - app.http.routes.analog - INFO - [analog.py:264 - create_upidp()] - Request to receive analogues
2025-08-29 14:16:53,193 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 14:16:53,193 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 14:18:46,824 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 14:19:04,875 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:19:04,876 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 14:19:04,877 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 14:19:04,878 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 14:19:04,881 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 14:19:04,881 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 14:19:10,971 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:19:10,972 - app.http.routes.analog - INFO - [analog.py:265 - create_upidp()] - Request to receive analogues
2025-08-29 14:19:10,974 - app.services.analog.analog - INFO - [analog.py:121 - create_analogs_attribute()] - Start create_analogs_attribute
2025-08-29 14:19:10,975 - app.services.analog.analog - ERROR - [analog.py:187 - create_analogs_attribute()] - Error in create_analogs_attribute: AnalogAttributeToolService.__init__() missing 1 required positional argument: 'chat_id'
Traceback (most recent call last):
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\app\services\analog\analog.py", line 147, in create_analogs_attribute
    attribute_tool = AnalogAttributeToolService(user_patent_id_pair)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AnalogAttributeToolService.__init__() missing 1 required positional argument: 'chat_id'
2025-08-29 14:19:11,138 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 14:19:11,139 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 14:21:25,835 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 14:21:44,184 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:21:44,186 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 14:21:44,186 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 14:21:44,187 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 14:21:44,190 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 14:21:44,191 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 14:21:50,882 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:21:50,884 - app.http.routes.analog - INFO - [analog.py:265 - create_upidp()] - Request to receive analogues
2025-08-29 14:21:50,885 - app.services.analog.analog - INFO - [analog.py:121 - create_analogs_attribute()] - Start create_analogs_attribute
2025-08-29 14:21:50,887 - app.services.analog.analog - ERROR - [analog.py:187 - create_analogs_attribute()] - Error in create_analogs_attribute: name 'get_connection_manager' is not defined
Traceback (most recent call last):
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\app\services\analog\analog.py", line 147, in create_analogs_attribute
    attribute_tool = AnalogAttributeToolService(user_patent_id_pair)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\app\services\analog\attribute_tool.py", line 18, in __init__
    self.websocket_manager = websocket_manager or get_connection_manager()
                                                  ^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_connection_manager' is not defined
2025-08-29 14:21:51,020 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 14:21:51,020 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 14:23:53,659 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 14:24:17,942 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:24:17,944 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 14:24:17,945 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 14:24:17,946 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 14:24:17,949 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 14:24:17,950 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 14:24:24,254 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:24:24,256 - app.http.routes.analog - INFO - [analog.py:265 - create_upidp()] - Request to receive analogues
2025-08-29 14:24:24,257 - app.services.analog.analog - INFO - [analog.py:121 - create_analogs_attribute()] - Start create_analogs_attribute
2025-08-29 14:24:24,259 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 14:24:24,291 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 14:24:24,293 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-29 14:24:24,306 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-29 14:24:24,307 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-29 14:24:24,310 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-29 14:24:38,324 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 1808
2025-08-29 14:24:38,325 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-29 14:24:38,326 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-29 14:24:38,328 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-29 14:24:53,649 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 2144
2025-08-29 14:24:53,650 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-29 14:24:53,651 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-29 14:24:53,653 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-29 14:25:06,560 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 1759
2025-08-29 14:25:06,561 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-29 14:25:06,561 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-29 14:25:06,563 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-29 14:25:35,418 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 3862
2025-08-29 14:25:35,419 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-29 14:25:35,420 - app.services.analog.analog - INFO - [analog.py:161 - create_analogs_attribute()] - The attribute search was successful
2025-08-29 14:25:35,422 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 14:25:35,423 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 14:38:48,178 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 14:38:50,921 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:38:50,923 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 14:38:50,923 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 14:38:50,924 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 14:38:50,936 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 14:38:50,937 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 14:40:16,231 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 14:40:37,816 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:40:37,818 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 14:40:37,819 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 14:40:37,819 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 14:40:37,823 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 14:40:37,824 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 14:40:46,531 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:48:13,129 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 14:48:41,588 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:48:41,590 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 14:48:41,591 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 14:48:41,591 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 14:48:41,594 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 14:48:41,595 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 14:48:50,198 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:50:44,686 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 14:50:52,736 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:50:52,738 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 14:50:52,738 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 14:50:52,739 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 14:50:52,742 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 14:50:52,743 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 14:51:00,316 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:52:47,951 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:52:47,952 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 14:52:47,953 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 14:52:47,953 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 14:52:47,956 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 14:52:47,957 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 14:52:53,739 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:59:25,394 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 14:59:43,149 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 14:59:43,151 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 14:59:43,151 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 14:59:43,152 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 14:59:43,155 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 14:59:43,156 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 14:59:49,319 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:00:16,269 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 15:00:30,560 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:00:30,561 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 15:00:30,562 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:00:30,562 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:00:30,565 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:00:30,566 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 15:00:36,381 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:00:36,383 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:00:36,384 - app.services.analog.analog - INFO - [analog.py:121 - create_analogs_attribute()] - Star creat_analogs_attribute
2025-08-29 15:00:36,385 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:00:36,404 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:00:36,405 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-29 15:00:36,416 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-29 15:00:36,417 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-29 15:00:36,419 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-29 15:00:50,623 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 1966
2025-08-29 15:00:50,624 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-29 15:00:50,625 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-29 15:00:50,627 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-29 15:01:06,412 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 2481
2025-08-29 15:01:06,413 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-29 15:01:06,414 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-29 15:01:06,416 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-29 15:01:18,774 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 1786
2025-08-29 15:01:18,775 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-29 15:01:18,776 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-29 15:01:18,778 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-29 15:01:53,349 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 4259
2025-08-29 15:01:53,350 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-29 15:01:53,351 - app.services.analog.analog - INFO - [analog.py:124 - create_analogs_attribute()] - The attribute search was successful
2025-08-29 15:01:53,352 - app.http.routes.analog - INFO - [analog.py:80 - get_patent_analog_attr()] - Request to receive analogues successful
2025-08-29 15:03:48,060 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:03:48,061 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:03:48,062 - app.services.analog.analog - INFO - [analog.py:121 - create_analogs_attribute()] - Star creat_analogs_attribute
2025-08-29 15:03:48,063 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:03:48,065 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:03:48,066 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-29 15:03:48,067 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-29 15:03:48,068 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-29 15:03:48,070 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-29 15:04:02,818 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 1909
2025-08-29 15:04:02,819 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-29 15:04:02,820 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-29 15:04:02,822 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-29 15:04:17,461 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 2209
2025-08-29 15:04:17,462 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-29 15:04:17,463 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-29 15:04:17,465 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-29 15:04:29,726 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 1813
2025-08-29 15:04:29,727 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-29 15:04:29,728 - core.token_manager.service_client.llm_client - WARNING - [llm_client.py:26 - _read_secret_key()] - Reading LLM Client Service secret key
2025-08-29 15:04:29,730 - urllib3.connectionpool - DEBUG - [connectionpool.py:241 - _new_conn()] - Starting new HTTP connection (1): 127.0.0.1:8011
2025-08-29 15:05:03,223 - urllib3.connectionpool - DEBUG - [connectionpool.py:544 - _make_request()] - http://127.0.0.1:8011 "POST /client/ask HTTP/1.1" 200 4673
2025-08-29 15:05:03,224 - app.clients.client_llm_client - DEBUG - [client_llm_client.py:43 - ask()] - The polling process of the parser ended in success
2025-08-29 15:05:03,225 - app.services.analog.analog - INFO - [analog.py:124 - create_analogs_attribute()] - The attribute search was successful
2025-08-29 15:05:03,226 - app.http.routes.analog - INFO - [analog.py:80 - get_patent_analog_attr()] - Request to receive analogues successful
2025-08-29 15:05:03,228 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:05:03,229 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 15:05:03,230 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:05:03,230 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:05:03,232 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:05:03,233 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 15:06:05,541 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:06:05,543 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-08-29 15:06:05,544 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-08-29 15:06:05,544 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:06:05,546 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:06:05,547 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:06:05,547 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:06:05,548 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:06:05,550 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:06:05,551 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-08-29 15:06:05,551 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-08-29 15:07:22,062 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:07:22,063 - app.services.token_introspection - ERROR - [token_introspection.py:41 - has_user_jwt()] - Invalid or expired token
2025-08-29 15:07:37,049 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:07:37,050 - app.services.token_introspection - ERROR - [token_introspection.py:41 - has_user_jwt()] - Invalid or expired token
2025-08-29 15:09:10,852 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:09:10,854 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-08-29 15:09:10,854 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-08-29 15:09:10,855 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:09:10,857 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:09:10,857 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:09:10,858 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:09:10,859 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:09:10,861 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:09:10,861 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-08-29 15:09:10,862 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-08-29 15:15:13,097 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 15:15:43,037 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:15:43,039 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 15:15:43,040 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:15:43,040 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:15:43,041 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:15:43,042 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:15:43,043 - app.services.patent.patent - DEBUG - [patent.py:61 - get_patents()] - No patents found in DB for user
2025-08-29 15:15:59,282 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:15:59,283 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 15:15:59,284 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:15:59,284 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:15:59,285 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:15:59,286 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:15:59,287 - app.services.patent.patent - DEBUG - [patent.py:61 - get_patents()] - No patents found in DB for user
2025-08-29 15:16:19,625 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:16:19,627 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-08-29 15:16:19,627 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-08-29 15:16:19,628 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:16:19,629 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:16:19,630 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:16:19,631 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:16:19,631 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:16:19,632 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:16:19,635 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:16:19,636 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-08-29 15:16:19,636 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-08-29 15:16:52,522 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:16:52,525 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:16:52,525 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:16:52,526 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:16:52,527 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:16:52,528 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:16:52,529 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:16:52,530 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:16:52,531 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:16:52,532 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:16:52,533 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:17:26,948 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:17:26,949 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:17:26,951 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 15:17:26,952 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:17:26,953 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 15:17:26,954 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 15:17:26,954 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 15:17:26,993 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 15:17:26,994 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 15:17:26,995 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 15:17:26,995 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 15:17:26,996 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 15:17:26,996 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 0Xsouu33GQTvKQQU9CwWlA==
2025-08-29 15:17:26,997 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 15:17:26,997 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 15:17:26,998 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 15:17:27,001 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 15:17:27,002 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 15:17:27,002 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 15:17:27,003 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: tcPc5I8ByVDkFJnE8YtJpluFBsc=
2025-08-29 15:17:27,004 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 15:17:27,004 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 10:17:26 GMT
2025-08-29 15:17:27,005 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 15:17:27,005 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 15:17:27,006 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1063900711_69142.765"}' [460 bytes]
2025-08-29 15:17:27,009 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 15:17:27,010 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 15:17:27,023 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 15:17:27,024 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 15:17:38,266 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:17:38,267 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:17:38,268 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:17:38,269 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:17:38,269 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:17:38,271 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:17:38,272 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:17:38,272 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:17:38,273 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:17:38,275 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:17:38,276 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:17:46,996 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 0d 42 b5 fe [binary, 4 bytes]
2025-08-29 15:17:46,997 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 15:17:46,997 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 0d 42 b5 fe [binary, 4 bytes]
2025-08-29 15:17:46,998 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 0f 01 97 06 [binary, 4 bytes]
2025-08-29 15:17:46,999 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 0f 01 97 06 [binary, 4 bytes]
2025-08-29 15:17:46,999 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 15:17:57,253 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed","message":"Ошибка: "}' [76 bytes]
2025-08-29 15:17:57,270 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 15:17:57,271 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 15:17:57,272 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 15:17:57,273 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:17:57,273 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 15:17:57,274 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:17:57,275 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 15:17:57,275 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 15:17:57,276 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 15:17:57,277 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 15:18:42,767 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:18:42,769 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:18:42,769 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:18:42,770 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:18:42,771 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:18:42,773 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:18:42,773 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:18:42,774 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:18:42,775 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:18:42,777 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:18:42,777 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:18:53,204 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:18:53,206 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-08-29 15:18:53,206 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-08-29 15:18:53,207 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:18:53,208 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:18:53,209 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:18:53,210 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:18:53,211 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:18:53,212 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:18:53,213 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-08-29 15:18:53,213 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-08-29 15:20:30,515 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:20:30,517 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:20:30,517 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:20:30,518 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:20:30,519 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:20:30,521 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:20:30,521 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:20:30,522 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:20:30,523 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:20:30,525 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:20:30,525 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:20:39,927 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:20:39,928 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:20:39,929 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:20:39,930 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:20:39,930 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:20:39,932 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:20:39,933 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:20:39,934 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:20:39,935 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:20:39,936 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:20:39,937 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:20:48,074 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:20:48,075 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:20:48,076 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:20:48,077 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:20:48,077 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:20:48,087 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:20:48,088 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:20:48,089 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:20:48,090 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:20:48,092 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:20:48,092 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:23:24,182 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:23:24,184 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:23:24,184 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:23:24,185 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:23:24,186 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:23:24,187 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:23:24,188 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:23:24,189 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:23:24,190 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:23:24,191 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:23:24,192 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:23:29,897 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:23:29,899 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:23:29,901 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 15:23:29,902 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:23:29,902 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 15:23:29,903 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 15:23:29,904 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 15:23:29,906 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 15:23:29,906 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 15:23:29,907 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 15:23:29,908 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 15:23:29,908 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 15:23:29,909 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 2G5nZQvWXr5uttdRx0cSag==
2025-08-29 15:23:29,909 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 15:23:29,910 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 15:23:29,910 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 15:23:29,913 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 15:23:29,914 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 15:23:29,914 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 15:23:29,915 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: +EME54uwuOybHXYps+GrvsHX+Wc=
2025-08-29 15:23:29,915 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 15:23:29,916 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 10:23:29 GMT
2025-08-29 15:23:29,916 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 15:23:29,917 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 15:23:29,918 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1063900711_69505.671"}' [460 bytes]
2025-08-29 15:23:29,920 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 15:23:29,921 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 15:23:29,922 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 15:23:29,923 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 15:23:31,212 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 15:23:31,213 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed... attribute \'status\'"}' [115 bytes]
2025-08-29 15:23:31,214 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 15:23:31,215 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 15:23:31,216 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 15:23:31,217 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:23:31,217 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 15:23:31,218 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:23:31,219 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 15:23:31,219 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 15:23:31,220 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 15:23:31,220 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 15:31:57,651 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:31:57,653 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-08-29 15:31:57,653 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-08-29 15:31:57,654 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:31:57,655 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:31:57,656 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:31:57,657 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:31:57,657 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:31:57,658 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:31:57,660 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:31:57,661 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-08-29 15:31:57,661 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-08-29 15:33:01,207 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:33:01,208 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-08-29 15:33:01,209 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-08-29 15:33:01,209 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:33:01,211 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:33:01,212 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:33:01,212 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:33:01,213 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:33:01,215 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:33:01,216 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-08-29 15:33:01,216 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-08-29 15:36:22,930 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:36:22,932 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-08-29 15:36:22,933 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-08-29 15:36:22,933 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:36:22,935 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:36:22,936 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:36:22,936 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:36:22,937 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:36:22,939 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:36:22,940 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-08-29 15:36:22,940 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-08-29 15:36:52,799 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:36:52,800 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 15:36:52,801 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:37:12,694 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:37:12,696 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:37:12,696 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:37:12,697 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:37:12,698 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:37:12,699 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:37:12,700 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:37:12,701 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:37:12,702 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:37:12,703 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:37:12,704 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:37:20,829 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:37:20,831 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:37:20,832 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 15:37:20,833 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:37:20,834 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 15:37:20,835 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 15:37:20,835 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 15:37:20,837 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 15:37:20,838 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 15:37:20,839 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 15:37:20,839 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 15:37:20,840 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 15:37:20,840 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: KuCRXqEEqnOrIkjdMnniow==
2025-08-29 15:37:20,841 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 15:37:20,841 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 15:37:20,842 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 15:37:20,844 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 15:37:20,845 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 15:37:20,846 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 15:37:20,846 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: mRGc02SRj6ZPde0oe0LAn25CRCI=
2025-08-29 15:37:20,847 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 15:37:20,847 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 10:37:20 GMT
2025-08-29 15:37:20,848 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 15:37:20,848 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 15:37:20,849 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1063900711_70336.609"}' [460 bytes]
2025-08-29 15:37:20,851 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 15:37:20,852 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 15:37:20,853 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 15:37:20,854 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 15:37:20,959 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:37:20,959 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 15:37:22,279 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 15:37:22,280 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed... attribute \'status\'"}' [115 bytes]
2025-08-29 15:37:22,282 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 15:37:22,282 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 15:37:22,283 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 15:37:22,284 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:37:22,285 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 15:37:22,286 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:37:22,286 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 15:37:22,287 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 15:37:22,287 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 15:37:22,288 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 15:37:27,011 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:37:27,012 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:37:27,013 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 15:37:27,015 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:37:27,016 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 15:37:27,017 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 15:37:27,018 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 15:37:27,019 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 15:37:27,020 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 15:37:27,021 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 15:37:27,021 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 15:37:27,022 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 15:37:27,022 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: kpSroa1p6JTkqD791nX6yw==
2025-08-29 15:37:27,023 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 15:37:27,023 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 15:37:27,024 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 15:37:27,026 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 15:37:27,027 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 15:37:27,028 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 15:37:27,028 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: +syyzimbTkTfeRrQliSwX8XW+J4=
2025-08-29 15:37:27,029 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 15:37:27,029 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 10:37:26 GMT
2025-08-29 15:37:27,030 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 15:37:27,030 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 15:37:27,031 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1063900711_70342.781"}' [460 bytes]
2025-08-29 15:37:27,033 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 15:37:27,034 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 15:37:27,035 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 15:37:27,036 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 15:37:27,208 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:37:27,208 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 15:37:47,037 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING f8 6e 7b 30 [binary, 4 bytes]
2025-08-29 15:37:47,037 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 15:37:47,038 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 08 8a f6 12 [binary, 4 bytes]
2025-08-29 15:37:47,039 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 08 8a f6 12 [binary, 4 bytes]
2025-08-29 15:37:47,039 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG f8 6e 7b 30 [binary, 4 bytes]
2025-08-29 15:37:47,040 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 15:37:57,252 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed","message":"Ошибка: "}' [76 bytes]
2025-08-29 15:37:57,253 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 15:37:57,255 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 15:37:57,255 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 15:37:57,256 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:37:57,257 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 15:37:57,258 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:37:57,258 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 15:37:57,259 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 15:37:57,259 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 15:37:57,260 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 15:38:02,566 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:38:02,568 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:38:02,569 - app.services.analog.analog - INFO - [analog.py:121 - create_analogs_attribute()] - Star creat_analogs_attribute
2025-08-29 15:38:02,570 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:38:02,571 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:38:02,573 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:38:02,574 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-29 15:38:02,575 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-29 15:38:02,576 - app.services.analog.attribute_tool - INFO - [attribute_tool.py:24 - attribute_generation()] - No analog data found
2025-08-29 15:38:02,577 - app.services.analog.analog - INFO - [analog.py:127 - create_analogs_attribute()] - The attribute search was unsuccessful
2025-08-29 15:38:02,578 - app.http.routes.analog - ERROR - [analog.py:87 - get_patent_analog_attr()] - No analogues found for patent
2025-08-29 15:38:11,516 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:38:11,517 - app.http.routes.analog - INFO - [analog.py:144 - get_analogues_xlsx()] - Request to receive analogues table xlsx
2025-08-29 15:38:11,518 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:38:11,519 - app.services.analog.analog - INFO - [analog.py:179 - get_analogues_xlsx()] - Star get_analog_xlsx
2025-08-29 15:38:11,520 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:38:11,521 - app.services.analog.table_generator - INFO - [table_generator.py:75 - generate_analogs_xlsx()] - Star generate_analogs_csv
2025-08-29 15:38:11,522 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:38:11,522 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:38:11,524 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:38:11,525 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:38:11,525 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:38:11,527 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:38:11,528 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:38:11,528 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:38:11,530 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:38:11,530 - app.http.routes.analog - ERROR - [analog.py:155 - get_analogues_xlsx()] - No analogues found for patent
2025-08-29 15:38:13,895 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:38:13,896 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:38:13,897 - app.services.analog.analog - INFO - [analog.py:121 - create_analogs_attribute()] - Star creat_analogs_attribute
2025-08-29 15:38:13,898 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:38:13,900 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:38:13,901 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-29 15:38:13,902 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-29 15:38:13,903 - app.services.analog.attribute_tool - INFO - [attribute_tool.py:24 - attribute_generation()] - No analog data found
2025-08-29 15:38:13,904 - app.services.analog.analog - INFO - [analog.py:127 - create_analogs_attribute()] - The attribute search was unsuccessful
2025-08-29 15:38:13,905 - app.http.routes.analog - ERROR - [analog.py:87 - get_patent_analog_attr()] - No analogues found for patent
2025-08-29 15:39:03,221 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:39:03,223 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:39:03,224 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:39:03,225 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:39:03,225 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:39:03,227 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:39:03,228 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:39:03,228 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:39:03,229 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:39:03,231 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:39:03,232 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:39:36,100 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:39:36,102 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:39:36,102 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:39:36,103 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:39:36,104 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:39:36,105 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:39:36,107 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:39:36,107 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:39:36,108 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:39:36,110 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:39:36,110 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:40:22,341 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:40:22,343 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:40:22,343 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:40:22,344 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:40:22,345 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:40:22,347 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:40:22,348 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:40:22,348 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:40:22,349 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:40:22,351 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:40:22,351 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:40:41,130 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:40:41,131 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:40:41,132 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:40:41,133 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:40:41,133 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:40:41,135 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:40:41,136 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:40:41,136 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:40:41,137 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:40:41,139 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:40:41,140 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:41:08,579 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:41:08,580 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:41:08,581 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:41:08,582 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:41:08,582 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:41:08,584 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:41:08,585 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:41:08,585 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:41:08,586 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:41:08,588 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:41:08,589 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:41:27,516 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:41:27,518 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:41:27,519 - app.services.analog.analog - INFO - [analog.py:121 - create_analogs_attribute()] - Star creat_analogs_attribute
2025-08-29 15:41:27,520 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:41:27,522 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:41:27,523 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-29 15:41:27,525 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-29 15:41:27,526 - app.services.analog.attribute_tool - INFO - [attribute_tool.py:24 - attribute_generation()] - No analog data found
2025-08-29 15:41:27,527 - app.services.analog.analog - INFO - [analog.py:127 - create_analogs_attribute()] - The attribute search was unsuccessful
2025-08-29 15:41:27,528 - app.http.routes.analog - ERROR - [analog.py:87 - get_patent_analog_attr()] - No analogues found for patent
2025-08-29 15:41:32,429 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:41:32,430 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:41:32,431 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 15:41:32,433 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:41:32,434 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 15:41:32,435 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 15:41:32,436 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 15:41:32,438 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 15:41:32,439 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 15:41:32,439 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 15:41:32,440 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 15:41:32,440 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 15:41:32,441 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: kt3v0z8enO59v+2G6Y40dw==
2025-08-29 15:41:32,441 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 15:41:32,442 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 15:41:32,442 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 15:41:32,445 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 15:41:32,446 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 15:41:32,446 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 15:41:32,447 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: UcBqVe/CZZ7JN7fEg/CgKx1i8VM=
2025-08-29 15:41:32,447 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 15:41:32,448 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 10:41:31 GMT
2025-08-29 15:41:32,448 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 15:41:32,449 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 15:41:32,450 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1063900711_70588.203"}' [460 bytes]
2025-08-29 15:41:32,452 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 15:41:32,453 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 15:41:32,454 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 15:41:32,455 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 15:41:32,629 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:41:32,629 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 15:41:32,795 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:41:32,796 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 15:41:37,812 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:41:37,812 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 15:41:52,470 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 6e 58 bc 0a [binary, 4 bytes]
2025-08-29 15:41:52,471 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 15:41:52,472 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 53 f5 fa 9a [binary, 4 bytes]
2025-08-29 15:41:52,472 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 53 f5 fa 9a [binary, 4 bytes]
2025-08-29 15:41:52,473 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 6e 58 bc 0a [binary, 4 bytes]
2025-08-29 15:41:52,474 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 15:42:03,252 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed","message":"Ошибка: "}' [76 bytes]
2025-08-29 15:42:03,254 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 15:42:03,255 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 15:42:03,256 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 15:42:03,257 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:42:03,257 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 15:42:03,258 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:42:03,259 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 15:42:03,259 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 15:42:03,260 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 15:42:03,260 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 15:42:03,582 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:42:03,582 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 15:42:08,603 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:42:08,603 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 15:42:34,820 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:42:34,822 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:42:34,823 - app.services.analog.analog - INFO - [analog.py:121 - create_analogs_attribute()] - Star creat_analogs_attribute
2025-08-29 15:42:34,824 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:42:34,826 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:42:34,827 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-29 15:42:34,828 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-29 15:42:34,829 - app.services.analog.attribute_tool - INFO - [attribute_tool.py:24 - attribute_generation()] - No analog data found
2025-08-29 15:42:34,830 - app.services.analog.analog - INFO - [analog.py:127 - create_analogs_attribute()] - The attribute search was unsuccessful
2025-08-29 15:42:34,831 - app.http.routes.analog - ERROR - [analog.py:87 - get_patent_analog_attr()] - No analogues found for patent
2025-08-29 15:42:46,825 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:42:46,827 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:42:46,827 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:42:46,828 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:42:46,829 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:42:46,830 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:42:46,831 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:42:46,832 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:42:46,833 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:42:46,834 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:42:46,835 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:42:52,505 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:42:52,506 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:42:52,508 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 15:42:52,509 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:42:52,511 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 15:42:52,512 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 15:42:52,513 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 15:42:52,515 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 15:42:52,515 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 15:42:52,516 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 15:42:52,516 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 15:42:52,517 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 15:42:52,518 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: +zWW/rC35dh7SdXtEzWN2w==
2025-08-29 15:42:52,518 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 15:42:52,519 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 15:42:52,519 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 15:42:52,521 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 15:42:52,522 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 15:42:52,523 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 15:42:52,523 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: ogtwY9KgFl12fT6JGKrGwCpiWSk=
2025-08-29 15:42:52,524 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 15:42:52,524 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 10:42:51 GMT
2025-08-29 15:42:52,525 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 15:42:52,525 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 15:42:52,526 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1063900711_70668.281"}' [460 bytes]
2025-08-29 15:42:52,528 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 15:42:52,530 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 15:42:52,531 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 15:42:52,532 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 15:42:52,682 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:42:52,682 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 15:42:52,844 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:42:52,844 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 15:42:52,881 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:42:52,881 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 15:42:54,156 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 15:42:54,157 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed... attribute \'status\'"}' [115 bytes]
2025-08-29 15:42:54,158 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 15:42:54,159 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 15:42:54,160 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 15:42:54,161 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:42:54,162 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 15:42:54,162 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:42:54,163 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 15:42:54,163 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 15:42:54,164 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 15:42:54,165 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 15:42:54,349 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:42:54,349 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 15:42:57,871 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:42:57,872 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 15:42:57,873 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:42:57,874 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 15:42:59,369 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:42:59,369 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 15:44:19,551 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:44:19,552 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-08-29 15:44:19,553 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-08-29 15:44:19,554 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-08-29 15:44:19,554 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:44:19,556 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:44:19,557 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-08-29 15:44:19,557 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 15:44:19,559 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 15:44:19,561 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-08-29 15:44:19,561 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-08-29 15:44:23,242 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:44:23,244 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:44:23,245 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 15:44:23,247 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:44:23,248 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 15:44:23,250 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 15:44:23,250 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 15:44:23,252 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 15:44:23,253 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 15:44:23,254 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 15:44:23,254 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 15:44:23,255 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 15:44:23,255 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: eWqccaXwOGjDhYuzsoR2iA==
2025-08-29 15:44:23,256 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 15:44:23,256 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 15:44:23,257 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 15:44:23,259 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 15:44:23,260 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 15:44:23,260 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 15:44:23,261 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: Iu6yYbRjmPlMw0FhevdbyZcZkag=
2025-08-29 15:44:23,262 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 15:44:23,262 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 10:44:22 GMT
2025-08-29 15:44:23,263 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 15:44:23,263 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 15:44:23,264 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_70759.015"}' [544 bytes]
2025-08-29 15:44:23,266 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 15:44:23,268 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 15:44:23,269 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 15:44:23,270 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 15:44:23,364 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:44:23,364 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 5 соединений
2025-08-29 15:44:23,556 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:44:23,557 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 15:44:23,595 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:44:23,596 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 15:44:25,643 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":60,"stage":"proce...ge":"Обработка ответа"}' [107 bytes]
2025-08-29 15:44:25,645 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed... attribute \'status\'"}' [115 bytes]
2025-08-29 15:44:25,645 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 15:44:25,647 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 15:44:25,648 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 15:44:25,649 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:44:25,649 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 15:44:25,650 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:44:25,651 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 15:44:25,651 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 15:44:25,652 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 15:44:25,652 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 15:44:25,848 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:44:25,849 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 15:44:28,577 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:44:28,577 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 15:44:28,624 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:44:28,624 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 15:44:30,864 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:44:30,864 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 5 соединений
2025-08-29 15:49:17,456 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 15:49:52,028 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:49:52,030 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 15:49:52,030 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:49:52,031 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:49:52,034 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:49:52,035 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 15:49:59,051 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:49:59,053 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:49:59,055 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 15:49:59,056 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:49:59,056 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 15:49:59,057 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 15:49:59,058 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 15:49:59,095 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 15:49:59,096 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 15:49:59,096 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 15:49:59,097 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 15:49:59,098 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 15:49:59,098 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 7rwAC3OZNzUwOS5XG6FmJg==
2025-08-29 15:49:59,099 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 15:49:59,099 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 15:49:59,100 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 15:49:59,103 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 15:49:59,104 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 15:49:59,104 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 15:49:59,105 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: E/4psvEUb1U1GW1KWIXjg5ZIVQM=
2025-08-29 15:49:59,105 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 15:49:59,106 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 10:49:58 GMT
2025-08-29 15:49:59,106 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 15:49:59,107 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 15:49:59,108 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_71094.859"}' [544 bytes]
2025-08-29 15:49:59,111 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 15:49:59,112 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 15:49:59,114 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 15:49:59,114 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 15:49:59,174 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:49:59,174 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 15:50:19,123 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 9a 4b 68 c2 [binary, 4 bytes]
2025-08-29 15:50:19,124 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 15:50:19,124 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING da ef 57 76 [binary, 4 bytes]
2025-08-29 15:50:19,125 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG da ef 57 76 [binary, 4 bytes]
2025-08-29 15:50:19,125 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 9a 4b 68 c2 [binary, 4 bytes]
2025-08-29 15:50:19,126 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 15:50:29,266 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed","message":"Ошибка: "}' [76 bytes]
2025-08-29 15:50:29,268 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 15:50:29,269 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 15:50:29,269 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 15:50:29,271 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:50:29,271 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 15:50:29,272 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 15:50:29,273 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 15:50:29,273 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 15:50:29,274 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 15:50:29,274 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 15:52:55,654 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:52:55,656 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 15:52:55,656 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:52:55,657 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 15:52:55,659 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 15:52:55,659 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 15:53:05,523 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 15:53:05,524 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 15:53:05,526 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 15:53:05,527 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 15:53:05,528 - app.services.analog.analog - INFO - [analog.py:62 - search_patent_analogues()] - The search for analogues was unsuccessful: Проблемы с получением патента для поискового запроса
2025-08-29 15:53:05,685 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 15:53:05,685 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 17:06:57,647 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:06:57,652 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:06:57,655 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 17:06:57,657 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:06:57,661 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 17:06:57,662 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 17:06:57,663 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 17:06:57,668 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 17:06:57,670 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 17:06:57,670 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 17:06:57,671 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 17:06:57,671 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 17:06:57,672 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 96wWq4/aRi9YjSjUSo73WQ==
2025-08-29 17:06:57,673 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 17:06:57,673 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 17:06:57,674 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 17:06:57,706 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 17:06:57,707 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 17:06:57,707 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 17:06:57,708 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: IAm7vHCHi4ZilH1vdx+gn0CDdGw=
2025-08-29 17:06:57,708 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 17:06:57,709 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 12:06:57 GMT
2025-08-29 17:06:57,710 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 17:06:57,711 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 17:06:57,712 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_75713.468"}' [544 bytes]
2025-08-29 17:06:57,718 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 17:06:57,720 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 17:06:57,721 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 17:06:57,722 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 17:06:57,848 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:06:57,849 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:06:57,959 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:06:57,960 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 17:06:58,661 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:06:58,662 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:06:58,664 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 17:06:58,665 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:06:58,666 - app.services.analog.analog - INFO - [analog.py:62 - search_patent_analogues()] - The search for analogues was unsuccessful: Проблемы с получением патента для поискового запроса
2025-08-29 17:06:58,785 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:06:58,785 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:07:02,965 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:07:02,965 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:07:17,704 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING b8 0f f3 f1 [binary, 4 bytes]
2025-08-29 17:07:17,705 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 17:07:17,705 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG b8 0f f3 f1 [binary, 4 bytes]
2025-08-29 17:07:17,706 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING be e5 da 1d [binary, 4 bytes]
2025-08-29 17:07:17,707 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG be e5 da 1d [binary, 4 bytes]
2025-08-29 17:07:17,707 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 17:07:28,255 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed","message":"Ошибка: "}' [76 bytes]
2025-08-29 17:07:28,257 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 17:07:28,259 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 17:07:28,259 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 17:07:28,261 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:07:28,262 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 17:07:28,262 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:07:28,263 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 17:07:28,264 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 17:07:28,264 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 17:07:28,265 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 17:07:28,547 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:07:28,547 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:07:33,569 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:07:33,569 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:08:37,324 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:08:37,325 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:08:37,326 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 17:08:37,328 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:08:37,329 - app.services.analog.analog - INFO - [analog.py:62 - search_patent_analogues()] - The search for analogues was unsuccessful: Проблемы с получением патента для поискового запроса
2025-08-29 17:08:37,514 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:37,515 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 5 соединений
2025-08-29 17:08:37,665 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:37,666 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:08:37,766 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:37,767 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:08:42,670 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:42,671 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:08:42,793 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:42,794 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 5 соединений
2025-08-29 17:08:43,192 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:08:43,194 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:08:43,195 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 17:08:43,197 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:08:43,198 - app.services.analog.analog - INFO - [analog.py:62 - search_patent_analogues()] - The search for analogues was unsuccessful: Проблемы с получением патента для поискового запроса
2025-08-29 17:08:43,300 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:43,301 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:08:43,347 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:43,348 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:08:43,355 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:43,356 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:08:43,384 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:43,384 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:08:43,536 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:43,537 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 17:08:48,318 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:48,319 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:08:48,365 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:48,366 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:08:48,367 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:48,368 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 5 соединений
2025-08-29 17:08:48,551 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:08:48,551 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 6 соединений
2025-08-29 17:10:17,096 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:10:17,097 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:10:17,099 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 17:10:17,101 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:10:17,103 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 17:10:17,105 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 17:10:17,106 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 17:10:17,108 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 17:10:17,108 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 17:10:17,109 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 17:10:17,110 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 17:10:17,110 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 17:10:17,111 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: NmrTKtHNBSh+Ndz89QS/Aw==
2025-08-29 17:10:17,111 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 17:10:17,112 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 17:10:17,112 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 17:10:17,115 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 17:10:17,115 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 17:10:17,116 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 17:10:17,116 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: dVB4e1LKu8gzFCPRTsFru8/9XME=
2025-08-29 17:10:17,117 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 17:10:17,117 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 12:10:16 GMT
2025-08-29 17:10:17,118 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 17:10:17,119 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 17:10:17,119 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_75912.875"}' [544 bytes]
2025-08-29 17:10:17,123 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 17:10:17,125 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 17:10:17,127 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 17:10:17,127 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 17:10:17,300 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:17,301 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 7 соединений
2025-08-29 17:10:17,311 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:17,312 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 6 соединений
2025-08-29 17:10:17,434 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:17,434 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 5 соединений
2025-08-29 17:10:17,443 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:17,443 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:10:17,556 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:17,557 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:10:22,322 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:22,322 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:10:22,446 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:22,447 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 5 соединений
2025-08-29 17:10:22,449 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:22,449 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 6 соединений
2025-08-29 17:10:22,568 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:22,568 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 7 соединений
2025-08-29 17:10:37,113 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING c1 a0 0a 3d [binary, 4 bytes]
2025-08-29 17:10:37,114 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG c1 a0 0a 3d [binary, 4 bytes]
2025-08-29 17:10:37,114 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 6e 33 7b 83 [binary, 4 bytes]
2025-08-29 17:10:37,115 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 17:10:37,116 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 6e 33 7b 83 [binary, 4 bytes]
2025-08-29 17:10:37,116 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 17:10:47,257 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed","message":"Ошибка: "}' [76 bytes]
2025-08-29 17:10:47,259 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 17:10:47,260 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 17:10:47,262 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 17:10:47,263 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:10:47,263 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 17:10:47,264 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:10:47,265 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 17:10:47,265 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 17:10:47,266 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 17:10:47,266 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 17:10:47,454 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:47,454 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 6 соединений
2025-08-29 17:10:47,519 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:47,520 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 5 соединений
2025-08-29 17:10:47,524 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:47,524 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:10:47,562 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:47,563 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:10:52,464 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:52,464 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:10:52,541 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:52,542 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 5 соединений
2025-08-29 17:10:52,543 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:52,544 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 6 соединений
2025-08-29 17:10:52,571 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:10:52,572 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 7 соединений
2025-08-29 17:10:53,454 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:10:53,455 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:10:53,456 - app.services.analog.analog - INFO - [analog.py:121 - create_analogs_attribute()] - Star creat_analogs_attribute
2025-08-29 17:10:53,460 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 17:10:53,460 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-08-29 17:10:53,463 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-08-29 17:10:53,464 - app.services.db - DEBUG - [db.py:38 - get_from_db_text()] - Start reading text from DB
2025-08-29 17:10:53,469 - app.services.db - DEBUG - [db.py:45 - get_from_db_text()] - Successfully read text from DB
2025-08-29 17:10:53,470 - app.services.analog.attribute_tool - INFO - [attribute_tool.py:24 - attribute_generation()] - No analog data found
2025-08-29 17:10:53,471 - app.services.analog.analog - INFO - [analog.py:127 - create_analogs_attribute()] - The attribute search was unsuccessful
2025-08-29 17:10:53,472 - app.http.routes.analog - ERROR - [analog.py:87 - get_patent_analog_attr()] - No analogues found for patent
2025-08-29 17:11:19,510 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:11:19,512 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:11:19,513 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 17:11:19,515 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:11:19,517 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 17:11:19,520 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 17:11:19,520 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 17:11:19,522 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 17:11:19,523 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 17:11:19,524 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 17:11:19,524 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 17:11:19,525 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 17:11:19,525 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: JeNDZEoXAX2eMtVWNfVilQ==
2025-08-29 17:11:19,526 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 17:11:19,526 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 17:11:19,527 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 17:11:19,530 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 17:11:19,530 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 17:11:19,531 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 17:11:19,531 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: orikSyDD4L/aqrM34K/lw07bzd8=
2025-08-29 17:11:19,532 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 17:11:19,532 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 12:11:19 GMT
2025-08-29 17:11:19,533 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 17:11:19,534 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 17:11:19,534 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_75975.296"}' [544 bytes]
2025-08-29 17:11:19,538 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 17:11:19,540 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 17:11:19,540 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 17:11:19,541 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 17:11:19,636 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:11:19,636 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 8 соединений
2025-08-29 17:11:19,725 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:11:19,726 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 7 соединений
2025-08-29 17:11:19,749 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:11:19,750 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 6 соединений
2025-08-29 17:11:19,760 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:11:19,760 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 5 соединений
2025-08-29 17:11:19,776 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:11:19,777 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:11:19,794 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:11:19,794 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:11:21,296 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...hits\' is not defined"}' [109 bytes]
2025-08-29 17:11:21,298 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 17:11:21,299 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 17:11:21,300 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 17:11:21,301 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:11:21,301 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 17:11:21,302 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:11:21,303 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 17:11:21,303 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 17:11:21,304 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 17:11:21,304 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 17:11:21,524 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:11:21,524 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 17:11:24,737 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:11:24,737 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:11:24,741 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:11:24,741 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:11:24,743 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:11:24,743 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 5 соединений
2025-08-29 17:11:24,789 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:11:24,789 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 6 соединений
2025-08-29 17:11:24,791 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:11:24,791 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 7 соединений
2025-08-29 17:11:26,534 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:11:26,534 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 8 соединений
2025-08-29 17:24:33,760 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 17:26:41,830 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:26:41,832 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 17:26:41,833 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:26:41,833 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 17:26:41,846 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 17:26:41,847 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 17:26:51,595 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:26:51,597 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:26:51,598 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 17:26:51,599 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:26:51,600 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 17:26:51,601 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 17:26:51,602 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 17:26:51,922 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 17:26:51,923 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 17:26:51,924 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 17:26:51,924 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 17:26:51,925 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 17:26:51,925 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 3nM7wjdXdnHjb2LgEjW7bA==
2025-08-29 17:26:51,926 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 17:26:51,926 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 17:26:51,927 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 17:26:51,929 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:26:51,929 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 17:26:51,930 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 17:26:51,931 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 17:26:51,932 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 17:26:51,932 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: I69+xM0MP8xAsZBU3U/iOQzlUa8=
2025-08-29 17:26:51,933 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 17:26:51,933 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 12:26:51 GMT
2025-08-29 17:26:51,934 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 17:26:51,935 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 17:26:51,935 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_76907.687"}' [544 bytes]
2025-08-29 17:26:51,939 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 17:26:51,940 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 17:26:51,941 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 17:26:51,941 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 17:26:54,141 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...hits\' is not defined"}' [109 bytes]
2025-08-29 17:26:54,142 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 17:26:54,143 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 17:26:54,144 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 17:26:54,145 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:26:54,146 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 17:26:54,147 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:26:54,147 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 17:26:54,148 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 17:26:54,149 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 17:26:54,149 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 17:42:07,930 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 17:42:15,043 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:42:15,044 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 17:42:15,045 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:42:15,046 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 17:42:15,058 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 17:42:15,059 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 17:42:21,905 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:42:21,906 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:42:21,908 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 17:42:21,909 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:42:21,910 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 17:42:21,910 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 17:42:21,911 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 17:42:21,923 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 17:42:21,924 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 17:42:21,925 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 17:42:21,925 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 17:42:21,926 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 17:42:21,926 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: q4So6+ydLeUyBXXGDAF7uQ==
2025-08-29 17:42:21,927 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 17:42:21,927 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 17:42:21,928 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 17:42:21,931 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 17:42:21,931 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 17:42:21,932 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 17:42:21,933 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: AqFJmDRyUxjl8t1FE9T8BQm8VbM=
2025-08-29 17:42:21,933 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 17:42:21,934 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 12:42:21 GMT
2025-08-29 17:42:21,934 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 17:42:21,935 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 17:42:21,936 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_77837.687"}' [544 bytes]
2025-08-29 17:42:21,940 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 17:42:21,940 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 17:42:21,942 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 17:42:21,943 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 17:42:21,997 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:42:21,998 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 17:42:41,930 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 89 70 47 8a [binary, 4 bytes]
2025-08-29 17:42:41,931 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 89 70 47 8a [binary, 4 bytes]
2025-08-29 17:42:41,931 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING dd 5f 3a 0b [binary, 4 bytes]
2025-08-29 17:42:41,932 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 17:42:41,933 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG dd 5f 3a 0b [binary, 4 bytes]
2025-08-29 17:42:41,933 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 17:42:52,260 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed","message":"Ошибка: "}' [76 bytes]
2025-08-29 17:42:52,262 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 17:42:52,263 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 17:42:52,263 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 17:42:52,265 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:42:52,265 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 17:42:52,266 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:42:52,267 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 17:42:52,267 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 17:42:52,268 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 17:42:52,268 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 17:44:39,674 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 17:45:43,801 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:45:43,802 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 17:45:43,803 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:45:43,804 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 17:45:43,807 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 17:45:43,807 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 17:45:53,711 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:45:53,713 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:45:53,714 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 17:45:53,715 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:45:53,716 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 17:45:53,717 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 17:45:53,717 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 17:45:53,729 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 17:45:53,730 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 17:45:53,731 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 17:45:53,731 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 17:45:53,732 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 17:45:53,732 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: xYG/O9IWczeGtZq9WOQmCg==
2025-08-29 17:45:53,733 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 17:45:53,733 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 17:45:53,734 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 17:45:53,737 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 17:45:53,738 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 17:45:53,738 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 17:45:53,739 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: TQdVV3W7WaJVvU2mFNczLjcMVvQ=
2025-08-29 17:45:53,739 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 17:45:53,740 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 12:45:53 GMT
2025-08-29 17:45:53,741 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 17:45:53,741 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 17:45:53,742 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...en_1830913972_78049.5"}' [542 bytes]
2025-08-29 17:45:53,746 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 17:45:53,747 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 17:45:53,748 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 17:45:53,749 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 17:45:53,808 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:45:53,809 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 17:45:55,963 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...hits\' is not defined"}' [109 bytes]
2025-08-29 17:45:55,964 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 17:45:55,965 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 17:45:55,966 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 17:45:55,967 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:45:55,968 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 17:45:55,969 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:45:55,969 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 17:45:55,970 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 17:45:55,970 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 17:45:55,971 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 17:46:07,210 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:46:07,212 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:46:07,213 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 17:46:07,215 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:46:07,216 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 17:46:07,217 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 17:46:07,217 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 17:46:07,220 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 17:46:07,220 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 17:46:07,221 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 17:46:07,221 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 17:46:07,222 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 17:46:07,223 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: jpJMuADScN3QN8BAzd9niw==
2025-08-29 17:46:07,223 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 17:46:07,224 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 17:46:07,224 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 17:46:07,227 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 17:46:07,227 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 17:46:07,228 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 17:46:07,228 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: LhBVGS+kdji6YG2HlTPKCetM9yU=
2025-08-29 17:46:07,229 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 17:46:07,229 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 12:46:07 GMT
2025-08-29 17:46:07,230 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 17:46:07,230 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 17:46:07,231 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_78062.984"}' [544 bytes]
2025-08-29 17:46:07,235 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 17:46:07,236 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 17:46:07,237 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 17:46:07,237 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 17:46:07,316 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:46:07,317 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 17:46:09,238 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...hits\' is not defined"}' [109 bytes]
2025-08-29 17:46:09,239 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 17:46:09,240 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 17:46:09,241 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 17:46:09,242 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:46:09,243 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 17:46:09,243 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:46:09,244 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 17:46:09,244 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 17:46:09,245 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 17:46:09,246 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 17:46:09,343 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:46:09,344 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 17:46:14,347 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:46:14,347 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 17:48:37,382 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:48:37,384 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:48:37,385 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 17:48:37,387 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:48:37,388 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 17:48:37,389 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 17:48:37,390 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 17:48:37,391 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 17:48:37,392 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 17:48:37,393 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 17:48:37,393 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 17:48:37,394 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 17:48:37,395 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: 3t1QLTXqo3JOTX51lZrA+w==
2025-08-29 17:48:37,395 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 17:48:37,396 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 17:48:37,396 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 17:48:37,399 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 17:48:37,399 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 17:48:37,400 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 17:48:37,400 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: GxVulau37gNTEebGYy7oGM7jxDw=
2025-08-29 17:48:37,401 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 17:48:37,401 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 12:48:36 GMT
2025-08-29 17:48:37,402 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 17:48:37,402 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 17:48:37,403 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_78213.156"}' [544 bytes]
2025-08-29 17:48:37,406 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 17:48:37,407 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 17:48:37,409 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 17:48:37,409 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 17:48:37,550 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:48:37,551 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:48:37,664 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:48:37,665 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 17:48:39,357 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...hits\' is not defined"}' [109 bytes]
2025-08-29 17:48:39,358 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 17:48:39,359 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 17:48:39,360 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 17:48:39,361 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:48:39,361 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 17:48:39,362 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:48:39,363 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 17:48:39,363 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 17:48:39,364 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 17:48:39,364 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 17:48:39,564 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:48:39,564 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 17:48:42,683 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:48:42,684 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 17:48:44,581 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:48:44,582 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:48:54,133 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:48:54,135 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:48:54,136 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 17:48:54,138 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:48:54,139 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 17:48:54,140 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 17:48:54,141 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 17:48:54,143 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 17:48:54,144 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 17:48:54,144 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 17:48:54,145 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 17:48:54,145 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 17:48:54,146 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: owV4MfXDNG/0QCJ8tYxFbw==
2025-08-29 17:48:54,146 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 17:48:54,147 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 17:48:54,147 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 17:48:54,150 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 17:48:54,150 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 17:48:54,151 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 17:48:54,151 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: nB8rr1IKNoW2N4OwSZTP8yjc8Tg=
2025-08-29 17:48:54,152 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 17:48:54,152 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 12:48:53 GMT
2025-08-29 17:48:54,153 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 17:48:54,153 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 17:48:54,154 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_78229.906"}' [544 bytes]
2025-08-29 17:48:54,157 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 17:48:54,159 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 17:48:54,164 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 17:48:54,165 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 17:48:54,305 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:48:54,306 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 17:48:54,386 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:48:54,387 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:48:54,528 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:48:54,528 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 17:48:59,315 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:48:59,316 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:48:59,532 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:48:59,533 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:49:14,159 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING d4 7b 2d 57 [binary, 4 bytes]
2025-08-29 17:49:14,159 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 17:49:14,160 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING c1 29 ed d9 [binary, 4 bytes]
2025-08-29 17:49:14,161 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG c1 29 ed d9 [binary, 4 bytes]
2025-08-29 17:49:14,161 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG d4 7b 2d 57 [binary, 4 bytes]
2025-08-29 17:49:14,162 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 17:49:24,241 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed","message":"Ошибка: "}' [76 bytes]
2025-08-29 17:49:24,243 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 17:49:24,244 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 17:49:24,245 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 17:49:24,246 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:49:24,247 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 17:49:24,247 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:49:24,248 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 17:49:24,249 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 17:49:24,249 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 17:49:24,250 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 17:49:24,508 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:49:24,509 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:49:24,545 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:49:24,546 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 17:49:29,515 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:49:29,516 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 17:49:29,547 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:49:29,547 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 4 соединений
2025-08-29 17:50:48,588 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 17:51:29,289 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:51:29,290 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 17:51:29,291 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:51:29,291 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 17:51:29,294 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 17:51:29,295 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 17:51:38,008 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 17:51:38,010 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 17:51:38,011 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 17:51:38,012 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 17:51:38,013 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 17:51:38,014 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 17:51:38,015 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 17:51:38,026 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 17:51:38,027 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 17:51:38,028 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 17:51:38,028 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 17:51:38,029 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 17:51:38,029 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: SA1+VyKKlw8IQBOm8uLEVA==
2025-08-29 17:51:38,030 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 17:51:38,030 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 17:51:38,031 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 17:51:38,034 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 17:51:38,035 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 17:51:38,035 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 17:51:38,036 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: majPbNtv3S/+oQnF0ZyuMBk7feA=
2025-08-29 17:51:38,036 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 17:51:38,037 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 12:51:37 GMT
2025-08-29 17:51:38,037 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 17:51:38,038 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 17:51:38,039 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_78393.796"}' [544 bytes]
2025-08-29 17:51:38,043 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 17:51:38,044 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 17:51:38,045 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 17:51:38,045 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 17:51:38,119 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 17:51:38,120 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 17:51:58,034 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 05 97 b3 9c [binary, 4 bytes]
2025-08-29 17:51:58,035 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 17:51:58,036 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 05 97 b3 9c [binary, 4 bytes]
2025-08-29 17:51:58,036 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING bf d3 10 1c [binary, 4 bytes]
2025-08-29 17:51:58,037 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG bf d3 10 1c [binary, 4 bytes]
2025-08-29 17:51:58,038 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 17:52:08,256 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Internal server erro...ibute \'_send_error\'"}' [111 bytes]
2025-08-29 17:52:08,257 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Internal server error: 'RospatentLinkParser' object has no attribute '_send_error'
2025-08-29 17:52:08,258 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:52:08,259 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 17:52:08,260 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 17:52:08,260 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 17:52:08,261 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 17:52:08,262 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 17:52:08,262 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 18:00:42,358 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 18:01:02,240 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 18:01:02,242 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 18:01:02,243 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 18:01:02,243 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 18:01:02,246 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 18:01:02,247 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 18:01:10,696 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 18:01:10,697 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 18:01:10,699 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 18:01:10,700 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 18:01:10,701 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 18:01:10,701 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 18:01:10,702 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 18:01:10,714 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 18:01:10,715 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 18:01:10,715 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 18:01:10,716 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 18:01:10,717 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 18:01:10,717 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: NTJbpdJe5lai40FXWDde/Q==
2025-08-29 18:01:10,718 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 18:01:10,718 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 18:01:10,719 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 18:01:10,722 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 18:01:10,722 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 18:01:10,723 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 18:01:10,723 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: bYt7Z5JOFAIOd4yhlW3YWtn2pCA=
2025-08-29 18:01:10,724 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 18:01:10,725 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 13:01:09 GMT
2025-08-29 18:01:10,725 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 18:01:10,726 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 18:01:10,726 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_78966.484"}' [544 bytes]
2025-08-29 18:01:10,730 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 18:01:10,731 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 18:01:10,732 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 18:01:10,733 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 18:01:10,801 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 18:01:10,801 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 18:01:30,738 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING f4 9e 75 72 [binary, 4 bytes]
2025-08-29 18:01:30,739 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 18:01:30,739 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 5e 35 4d ef [binary, 4 bytes]
2025-08-29 18:01:30,740 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 5e 35 4d ef [binary, 4 bytes]
2025-08-29 18:01:30,740 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG f4 9e 75 72 [binary, 4 bytes]
2025-08-29 18:01:30,741 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 18:01:41,266 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed","message":"Ошибка: "}' [76 bytes]
2025-08-29 18:01:41,268 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 18:01:41,269 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 18:01:41,269 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 18:01:41,271 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 18:01:41,271 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 18:01:41,272 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 18:01:41,273 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 18:01:41,273 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 18:01:41,274 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 18:01:41,274 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 18:07:13,558 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 18:07:22,464 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 18:07:22,466 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 18:07:22,466 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 18:07:22,467 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 18:07:22,471 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 18:07:22,472 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 18:07:28,621 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 18:07:28,622 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 18:07:28,624 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 18:07:28,625 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 18:07:28,626 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 18:07:28,626 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 18:07:28,627 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 18:07:28,638 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 18:07:28,639 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 18:07:28,640 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 18:07:28,640 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 18:07:28,641 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 18:07:28,641 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: u17PvhRLadsDgCvOJTR2Mg==
2025-08-29 18:07:28,642 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 18:07:28,642 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 18:07:28,643 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 18:07:28,646 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 18:07:28,647 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 18:07:28,647 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 18:07:28,648 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: +ykHVxglhFcJ0OLwJB/zyXvQRe8=
2025-08-29 18:07:28,648 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 18:07:28,649 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 13:07:28 GMT
2025-08-29 18:07:28,649 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 18:07:28,650 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 18:07:28,651 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_79344.406"}' [544 bytes]
2025-08-29 18:07:28,654 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 18:07:28,655 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 18:07:28,656 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 18:07:28,657 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 18:07:28,712 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 18:07:28,713 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 18:07:48,650 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING e5 ea 46 a7 [binary, 4 bytes]
2025-08-29 18:07:48,651 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 18:07:48,652 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG e5 ea 46 a7 [binary, 4 bytes]
2025-08-29 18:07:48,652 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 3e 66 21 d3 [binary, 4 bytes]
2025-08-29 18:07:48,653 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 3e 66 21 d3 [binary, 4 bytes]
2025-08-29 18:07:48,653 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 18:07:59,252 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...шибка: TimeoutError()"}' [90 bytes]
2025-08-29 18:07:59,253 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 18:07:59,255 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 18:07:59,255 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 18:07:59,256 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 18:07:59,257 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 18:07:59,258 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 18:07:59,258 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 18:07:59,259 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 18:07:59,259 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 18:07:59,260 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 18:09:43,061 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 18:10:04,151 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 18:10:04,153 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 18:10:04,153 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 18:10:04,154 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 18:10:04,168 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 18:10:04,169 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 18:10:12,764 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 18:10:12,765 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 18:10:12,767 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 18:10:12,768 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 18:10:12,769 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 18:10:12,770 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 18:10:12,770 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 18:10:12,811 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 18:10:12,813 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 18:10:12,813 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 18:10:12,814 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 18:10:12,814 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 18:10:12,815 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: JiVPqHe4YpSlwIy59ecPkQ==
2025-08-29 18:10:12,815 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 18:10:12,816 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 18:10:12,817 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 18:10:12,820 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 18:10:12,820 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 18:10:12,821 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 18:10:12,821 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: B+Rbj8lW8iJeCC8Vq+Al+vJF+UQ=
2025-08-29 18:10:12,822 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 18:10:12,823 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 13:10:12 GMT
2025-08-29 18:10:12,823 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 18:10:12,824 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 18:10:12,825 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_79508.578"}' [544 bytes]
2025-08-29 18:10:12,828 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 18:10:12,829 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 18:10:12,830 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 18:10:12,831 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 18:10:12,857 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 18:10:12,857 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 18:10:32,834 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 9e 62 94 ce [binary, 4 bytes]
2025-08-29 18:10:32,835 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 18:10:32,835 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING ec d4 6d de [binary, 4 bytes]
2025-08-29 18:10:32,836 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG ec d4 6d de [binary, 4 bytes]
2025-08-29 18:10:32,836 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 9e 62 94 ce [binary, 4 bytes]
2025-08-29 18:10:32,837 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 18:10:52,851 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 98 74 1f f1 [binary, 4 bytes]
2025-08-29 18:10:52,851 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 18:10:52,852 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING f1 d5 b3 7a [binary, 4 bytes]
2025-08-29 18:10:52,853 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG f1 d5 b3 7a [binary, 4 bytes]
2025-08-29 18:10:52,853 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 98 74 1f f1 [binary, 4 bytes]
2025-08-29 18:10:52,854 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 18:11:12,863 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING bd 80 b7 ee [binary, 4 bytes]
2025-08-29 18:11:12,864 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 18:11:12,865 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING c3 25 cb cb [binary, 4 bytes]
2025-08-29 18:11:12,865 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG c3 25 cb cb [binary, 4 bytes]
2025-08-29 18:11:12,866 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG bd 80 b7 ee [binary, 4 bytes]
2025-08-29 18:11:12,867 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 18:11:32,882 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING d8 3f 09 74 [binary, 4 bytes]
2025-08-29 18:11:32,883 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 18:11:32,883 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 5e b5 a7 2f [binary, 4 bytes]
2025-08-29 18:11:32,884 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 5e b5 a7 2f [binary, 4 bytes]
2025-08-29 18:11:32,885 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG d8 3f 09 74 [binary, 4 bytes]
2025-08-29 18:11:32,885 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 18:11:52,898 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 5d 94 36 0b [binary, 4 bytes]
2025-08-29 18:11:52,899 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 18:11:52,899 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 6c ef fe e3 [binary, 4 bytes]
2025-08-29 18:11:52,900 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 6c ef fe e3 [binary, 4 bytes]
2025-08-29 18:11:52,900 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 5d 94 36 0b [binary, 4 bytes]
2025-08-29 18:11:52,901 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 18:12:01,209 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...\' is not defined\\")"}' [124 bytes]
2025-08-29 18:12:01,210 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 18:12:01,211 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 18:12:01,212 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 18:12:01,213 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 18:12:01,214 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 18:12:01,215 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 18:12:01,215 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 18:12:01,216 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 18:12:01,216 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 18:12:01,217 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 18:15:19,319 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 18:15:19,321 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 18:15:19,322 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 18:15:19,324 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 18:15:19,325 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 18:15:19,326 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 18:15:19,326 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 18:15:19,329 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 18:15:19,330 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 18:15:19,330 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 18:15:19,331 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 18:15:19,331 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 18:15:19,332 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: EAJtz35uo63EACXiy9nBEQ==
2025-08-29 18:15:19,332 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 18:15:19,333 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 18:15:19,334 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 18:15:19,336 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 18:15:19,337 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 18:15:19,338 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 18:15:19,338 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: dpXC76FUYp4VzFB8f8zLBd0iVqc=
2025-08-29 18:15:19,339 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 18:15:19,339 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 13:15:19 GMT
2025-08-29 18:15:19,340 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 18:15:19,341 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 18:15:19,341 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_79815.093"}' [544 bytes]
2025-08-29 18:15:19,345 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 18:15:19,346 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 18:15:19,347 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 18:15:19,348 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 18:15:19,418 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 18:15:19,419 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 18:15:39,337 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING dd 7a a4 03 [binary, 4 bytes]
2025-08-29 18:15:39,338 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 18:15:39,339 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG dd 7a a4 03 [binary, 4 bytes]
2025-08-29 18:15:39,339 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING ea d2 95 05 [binary, 4 bytes]
2025-08-29 18:15:39,340 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG ea d2 95 05 [binary, 4 bytes]
2025-08-29 18:15:39,341 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 18:15:59,326 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 2e 19 ac 0f [binary, 4 bytes]
2025-08-29 18:15:59,327 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 2e 19 ac 0f [binary, 4 bytes]
2025-08-29 18:15:59,327 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING e2 50 6e d1 [binary, 4 bytes]
2025-08-29 18:15:59,328 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 18:15:59,329 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG e2 50 6e d1 [binary, 4 bytes]
2025-08-29 18:15:59,329 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 18:16:13,198 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...\' is not defined\\")"}' [124 bytes]
2025-08-29 18:16:13,200 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 18:16:13,201 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 18:16:13,202 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 18:16:13,203 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 18:16:13,203 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 18:16:13,204 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 18:16:13,205 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 18:16:13,205 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 18:16:13,206 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 18:16:13,206 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 18:19:34,611 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 18:19:34,613 - app.http.routes.analog - INFO - [analog.py:258 - create_upidp()] - Request to receive analogues
2025-08-29 18:19:34,614 - app.services.analog.analog - INFO - [analog.py:23 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 18:19:34,616 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 18:19:34,616 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 18:19:34,618 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 18:19:34,618 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 18:19:34,620 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 18:19:34,621 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 18:19:34,621 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 18:19:34,622 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 18:19:34,623 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 18:19:34,623 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: k8d2qzcdzlQl7T0Okv5mrw==
2025-08-29 18:19:34,624 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 18:19:34,624 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 18:19:34,625 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 18:19:34,627 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 18:19:34,628 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 18:19:34,628 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 18:19:34,629 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: tovdgJYYTmVBaqNrCTirHz9BanM=
2025-08-29 18:19:34,630 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 18:19:34,630 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 13:19:33 GMT
2025-08-29 18:19:34,631 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 18:19:34,631 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 18:19:34,632 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th...n_1830913972_80070.39"}' [543 bytes]
2025-08-29 18:19:34,635 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 18:19:34,636 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 18:19:34,637 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 18:19:34,638 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 18:19:34,710 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 18:19:34,711 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 18:19:34,844 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 18:19:34,845 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 18:19:37,115 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...\' is not defined\\")"}' [124 bytes]
2025-08-29 18:19:37,117 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 18:19:37,118 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 18:19:37,118 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 18:19:37,119 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 18:19:37,120 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 18:19:37,121 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 18:19:37,121 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 18:19:37,122 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 18:19:37,122 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 18:19:37,123 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 18:19:37,293 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 18:19:37,294 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 18:19:39,887 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 18:19:39,888 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 2 соединений
2025-08-29 18:19:42,310 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 18:19:42,310 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 3 соединений
2025-08-29 19:35:59,452 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 19:36:44,821 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 19:36:44,823 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 19:36:44,824 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 19:36:44,824 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 19:36:44,837 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 19:36:44,838 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 19:41:12,557 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 19:41:41,210 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 19:41:41,212 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 19:41:41,212 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 19:41:41,213 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 19:41:41,216 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 19:41:41,217 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 19:41:47,728 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 19:41:47,743 - app.http.routes.analog - INFO - [analog.py:318 - create_upidp()] - Request to receive analogues
2025-08-29 19:44:42,560 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 19:45:12,002 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 19:45:12,004 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 19:45:12,005 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 19:45:12,005 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 19:45:12,008 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 19:45:12,009 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 19:45:20,917 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 19:45:20,918 - app.http.routes.analog - INFO - [analog.py:290 - create_upidp()] - Request to receive analogues
2025-08-29 19:50:44,993 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 19:51:19,755 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 19:51:19,757 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 19:51:19,757 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 19:51:19,758 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 19:51:19,761 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 19:51:19,761 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 19:51:29,998 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 19:51:30,000 - app.http.routes.analog - INFO - [analog.py:296 - create_upidp()] - Request to receive analogues
2025-08-29 19:52:20,632 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-08-29 19:52:46,469 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 19:52:46,471 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-08-29 19:52:46,471 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 19:52:46,472 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-08-29 19:52:46,475 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-08-29 19:52:46,476 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-08-29 19:52:52,565 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-08-29 19:52:52,566 - app.http.routes.analog - INFO - [analog.py:296 - create_upidp()] - Request to receive analogues
2025-08-29 19:52:52,568 - app.services.analog.analog - INFO - [analog.py:42 - search_patent_analogues()] - Start search_patent_analogues
2025-08-29 19:52:52,569 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-08-29 19:52:52,570 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:93 - analog_link_generate()] - ___Star PatentRawDataGenerator generate_analog___
2025-08-29 19:52:52,571 - app.clients.parser_client - DEBUG - [parser_client.py:28 - generate_analog_link_ws()] - Starting WebSocket connection to parser service
2025-08-29 19:52:52,571 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-08-29 19:52:52,605 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CONNECTING
2025-08-29 19:52:52,606 - websockets.client - DEBUG - [client.py:292 - send_request()] - > GET /parser/ws/invention/analog HTTP/1.1
2025-08-29 19:52:52,607 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Host: 127.0.0.1:8009
2025-08-29 19:52:52,607 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Upgrade: websocket
2025-08-29 19:52:52,608 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Connection: Upgrade
2025-08-29 19:52:52,608 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Key: qPYKK3EKsmYNAl8rQJ9vhw==
2025-08-29 19:52:52,609 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Version: 13
2025-08-29 19:52:52,609 - websockets.client - DEBUG - [client.py:294 - send_request()] - > Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits
2025-08-29 19:52:52,610 - websockets.client - DEBUG - [client.py:294 - send_request()] - > User-Agent: Python/3.12 websockets/15.0.1
2025-08-29 19:52:52,613 - websockets.client - DEBUG - [client.py:318 - parse()] - < HTTP/1.1 101 Switching Protocols
2025-08-29 19:52:52,614 - websockets.client - DEBUG - [client.py:320 - parse()] - < Upgrade: websocket
2025-08-29 19:52:52,614 - websockets.client - DEBUG - [client.py:320 - parse()] - < Connection: Upgrade
2025-08-29 19:52:52,615 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Accept: vbgzRJTgce8/4lSm9bmgPC1zesQ=
2025-08-29 19:52:52,615 - websockets.client - DEBUG - [client.py:320 - parse()] - < Sec-WebSocket-Extensions: permessage-deflate
2025-08-29 19:52:52,616 - websockets.client - DEBUG - [client.py:320 - parse()] - < date: Fri, 29 Aug 2025 14:52:51 GMT
2025-08-29 19:52:52,617 - websockets.client - DEBUG - [client.py:320 - parse()] - < server: uvicorn
2025-08-29 19:52:52,617 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is OPEN
2025-08-29 19:52:52,618 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > TEXT '{"type": "generate_links", "user_description_th..._1830913972_85668.375"}' [544 bytes]
2025-08-29 19:52:52,621 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":10,"stage":"initi...age":"Начало парсинга"}' [100 bytes]
2025-08-29 19:52:52,622 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":20,"stage":"reque..."Формирование запроса"}' [113 bytes]
2025-08-29 19:52:52,637 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":30,"stage":"prepa...Подготовка заголовков"}' [109 bytes]
2025-08-29 19:52:52,638 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":40,"stage":"sendi...тправка запроса к API"}' [110 bytes]
2025-08-29 19:52:52,695 - core.connection_manager - DEBUG - [connection_manager.py:32 - print_active_connections()] - 🔌 Активные подключения:
2025-08-29 19:52:52,696 - core.connection_manager - DEBUG - [connection_manager.py:34 - print_active_connections()] -   123: 1 соединений
2025-08-29 19:53:12,627 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 'A\x100T' [text, 4 bytes]
2025-08-29 19:53:12,627 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 19:53:12,628 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING '[\\Pv' [text, 4 bytes]
2025-08-29 19:53:12,629 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG '[\\Pv' [text, 4 bytes]
2025-08-29 19:53:12,629 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 'A\x100T' [text, 4 bytes]
2025-08-29 19:53:12,630 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 19:53:32,615 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 9a 2b 74 39 [binary, 4 bytes]
2025-08-29 19:53:32,616 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 19:53:32,616 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 9a 2b 74 39 [binary, 4 bytes]
2025-08-29 19:53:32,617 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING ef 7a dd da [binary, 4 bytes]
2025-08-29 19:53:32,617 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG ef 7a dd da [binary, 4 bytes]
2025-08-29 19:53:32,618 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 19:53:52,640 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING c1 f6 5c 4d [binary, 4 bytes]
2025-08-29 19:53:52,641 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 19:53:52,641 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING f3 c6 ea 8e [binary, 4 bytes]
2025-08-29 19:53:52,642 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG f3 c6 ea 8e [binary, 4 bytes]
2025-08-29 19:53:52,642 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG c1 f6 5c 4d [binary, 4 bytes]
2025-08-29 19:53:52,643 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 19:54:12,626 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING fa 50 8e e6 [binary, 4 bytes]
2025-08-29 19:54:12,626 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 19:54:12,627 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG fa 50 8e e6 [binary, 4 bytes]
2025-08-29 19:54:12,628 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 19:54:12,658 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 'NS\x0bj' [text, 4 bytes]
2025-08-29 19:54:12,658 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 'NS\x0bj' [text, 4 bytes]
2025-08-29 19:54:32,640 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 63 f8 70 7b [binary, 4 bytes]
2025-08-29 19:54:32,641 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 19:54:32,641 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 63 f8 70 7b [binary, 4 bytes]
2025-08-29 19:54:32,642 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 19:54:32,686 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 99 f4 64 8c [binary, 4 bytes]
2025-08-29 19:54:32,686 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 99 f4 64 8c [binary, 4 bytes]
2025-08-29 19:54:52,654 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING d5 e1 cd 6c [binary, 4 bytes]
2025-08-29 19:54:52,654 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 19:54:52,655 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG d5 e1 cd 6c [binary, 4 bytes]
2025-08-29 19:54:52,656 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 19:54:52,700 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 7e 33 f5 fe [binary, 4 bytes]
2025-08-29 19:54:52,700 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 7e 33 f5 fe [binary, 4 bytes]
2025-08-29 19:55:12,664 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 94 1e 77 77 [binary, 4 bytes]
2025-08-29 19:55:12,664 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 19:55:12,665 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 94 1e 77 77 [binary, 4 bytes]
2025-08-29 19:55:12,666 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 19:55:12,710 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 'hDj#' [text, 4 bytes]
2025-08-29 19:55:12,710 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 'hDj#' [text, 4 bytes]
2025-08-29 19:55:32,684 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PING 77 68 92 ca [binary, 4 bytes]
2025-08-29 19:55:32,684 - websockets.client - DEBUG - [connection.py:824 - keepalive()] - % sent keepalive ping
2025-08-29 19:55:32,685 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PONG 77 68 92 ca [binary, 4 bytes]
2025-08-29 19:55:32,686 - websockets.client - DEBUG - [connection.py:834 - keepalive()] - % received keepalive pong
2025-08-29 19:55:32,730 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < PING 2d 50 37 dd [binary, 4 bytes]
2025-08-29 19:55:32,730 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > PONG 2d 50 37 dd [binary, 4 bytes]
2025-08-29 19:55:40,150 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...\' is not defined\\")"}' [124 bytes]
2025-08-29 19:55:40,151 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"progress","progress":0,"stage":"failed...age":"Ошибка парсинга"}' [91 bytes]
2025-08-29 19:55:40,152 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < TEXT '{"type":"error","message":"Не удалось получить данные патентов"}' [95 bytes]
2025-08-29 19:55:40,153 - app.clients.parser_client - ERROR - [parser_client.py:60 - generate_analog_link_ws()] - Parser error: Не удалось получить данные патентов
2025-08-29 19:55:40,167 - websockets.client - DEBUG - [protocol.py:745 - send_frame()] - > CLOSE 1000 (OK) [2 bytes]
2025-08-29 19:55:40,167 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSING
2025-08-29 19:55:40,168 - websockets.client - DEBUG - [protocol.py:599 - parse()] - < CLOSE 1000 (OK) [2 bytes]
2025-08-29 19:55:40,169 - websockets.client - DEBUG - [protocol.py:649 - discard()] - < EOF
2025-08-29 19:55:40,169 - websockets.client - DEBUG - [protocol.py:757 - send_eof()] - > EOF
2025-08-29 19:55:40,170 - websockets.client - DEBUG - [protocol.py:175 - state()] - = connection is CLOSED
2025-08-29 19:55:40,170 - websockets.client - DEBUG - [connection.py:974 - send_data()] - x half-closing TCP connection
2025-08-29 19:57:17,669 - core.connection_manager - DEBUG - [connection_manager.py:30 - print_active_connections()] - 📭 Нет активных подключений
2025-09-01 04:21:07,284 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-09-01 04:23:48,595 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-09-01 04:24:54,375 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-09-01 04:25:18,490 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-09-01 04:27:57,761 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-09-01 04:34:48,369 - asyncio - DEBUG - [selector_events.py:64 - __init__()] - Using selector: SelectSelector
2025-09-04 12:49:32,459 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 12:54:11,280 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 12:54:11,323 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-04 12:54:11,323 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 12:54:11,324 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 12:54:11,355 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 12:54:11,356 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 12:55:00,721 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 12:55:00,723 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-09-04 12:55:00,724 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-09-04 12:55:00,725 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 12:55:00,726 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 12:55:00,727 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-09-04 12:55:00,728 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-09-04 12:55:00,729 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-09-04 12:55:00,771 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-09-04 12:55:00,772 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-09-04 12:55:00,773 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-09-04 12:55:38,299 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 12:55:38,302 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-09-04 12:55:38,302 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-09-04 12:55:38,303 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-09-04 12:55:38,304 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 12:55:38,314 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 12:55:38,315 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-09-04 12:55:38,315 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-09-04 12:55:38,316 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-09-04 12:55:38,318 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-09-04 12:55:38,319 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-09-04 12:55:50,471 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 12:55:50,472 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-09-04 12:55:50,473 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-09-04 12:55:50,474 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-09-04 12:55:50,474 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 12:55:50,484 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 12:55:50,485 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-09-04 12:55:50,485 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-09-04 12:55:50,486 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-09-04 12:55:50,488 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-09-04 12:55:50,489 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-09-04 12:55:56,870 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 12:55:56,872 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 12:55:56,873 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 12:55:56,874 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:44 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-04 12:55:56,874 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - _initialize()] - __patent: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}
2025-09-04 12:55:56,875 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-04 12:55:56,876 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 12:55:56,894 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 12:55:56,894 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 12:55:56,895 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-04 12:55:56,902 - app.clients.parser_client - ERROR - [parser_client.py:53 - _request_ws()] - Request error: 404, {"detail":"Not Found"}
2025-09-04 12:55:56,903 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': 'Error connecting to parser', 'stage': 'failed'}
2025-09-04 12:55:56,904 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 12:55:56,905 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 12:55:56,905 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 12:55:56,906 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/ws/parser/1830913972
2025-09-04 12:55:56,911 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 12:55:56,912 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 1.0s... (Attempt 1/5)
2025-09-04 12:55:56,913 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 1 секунд... (Попытка 1/5)', 'progress': 20, 'stage': ''}
2025-09-04 12:55:56,913 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 12:55:56,914 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 12:55:56,915 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-04 12:55:56,965 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 12:55:56,966 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 12:55:56,966 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 12:55:56,967 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 3 сообщений
2025-09-04 12:55:56,968 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000002C7F4922C00>, <core.connection_manager.BufferedMessage object at 0x000002C7F4689AC0>, <core.connection_manager.BufferedMessage object at 0x000002C7F45E38F0>], maxlen=50)
2025-09-04 12:55:56,968 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (3 messages)
2025-09-04 12:55:56,970 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 3 messages for 1830913972
2025-09-04 12:55:56,970 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 12:55:57,923 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 12:55:57,924 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 12:55:57,925 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 2.0s... (Attempt 2/5)
2025-09-04 12:55:57,926 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 2 секунд... (Попытка 2/5)', 'progress': 20, 'stage': ''}
2025-09-04 12:55:59,942 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 12:55:59,943 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 12:55:59,944 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 4.0s... (Attempt 3/5)
2025-09-04 12:55:59,945 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 4 секунд... (Попытка 3/5)', 'progress': 20, 'stage': ''}
2025-09-04 12:56:03,964 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 12:56:03,965 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 12:56:03,966 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 8.0s... (Attempt 4/5)
2025-09-04 12:56:03,967 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 8 секунд... (Попытка 4/5)', 'progress': 20, 'stage': ''}
2025-09-04 12:56:11,968 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 12:56:11,969 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 12:56:11,970 - app.clients.ws_client - ERROR - [ws_client.py:94 - _connect_and_listen()] - ❌ Maximum retry attempts (5) exceeded for user 1830913972
2025-09-04 12:56:11,971 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:07:47,054 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:07:47,055 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:07:47,056 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:07:59,231 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:07:59,232 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-04 13:07:59,233 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:08:08,425 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:08:08,426 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:08:08,428 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:08:08,428 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:44 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-04 13:08:08,429 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - _initialize()] - __patent: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}
2025-09-04 13:08:08,430 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-04 13:08:08,430 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:08:08,431 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:08:08,432 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:08:08,432 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-04 13:08:08,435 - app.clients.parser_client - ERROR - [parser_client.py:53 - _request_ws()] - Request error: 404, {"detail":"Not Found"}
2025-09-04 13:08:08,436 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': 'Error connecting to parser', 'stage': 'failed'}
2025-09-04 13:08:08,438 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:08:08,439 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:08:08,439 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 13:08:08,440 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/ws/parser/1830913972
2025-09-04 13:08:08,443 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:08:08,445 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 1.0s... (Attempt 1/5)
2025-09-04 13:08:08,446 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 1 секунд... (Попытка 1/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:08:08,446 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:08:08,447 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:08:08,448 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-04 13:08:08,534 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:08:08,535 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:08:08,536 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:08:08,536 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 3 сообщений
2025-09-04 13:08:08,537 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000002C7F4921B80>, <core.connection_manager.BufferedMessage object at 0x000002C7F49214F0>, <core.connection_manager.BufferedMessage object at 0x000002C7F49216A0>], maxlen=50)
2025-09-04 13:08:08,537 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (3 messages)
2025-09-04 13:08:08,538 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 3 messages for 1830913972
2025-09-04 13:08:08,539 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:08:08,541 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:08:08,542 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:08:08,542 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:08:09,457 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:08:09,458 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:08:09,459 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 2.0s... (Attempt 2/5)
2025-09-04 13:08:09,460 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 2 секунд... (Попытка 2/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:08:09,460 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:08:09,461 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:08:09,462 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:08:10,788 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:08:10,788 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:08:10,789 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:08:10,789 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 1 сообщений
2025-09-04 13:08:10,790 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000002C7F48AD3D0>], maxlen=50)
2025-09-04 13:08:10,791 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (1 messages)
2025-09-04 13:08:10,792 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 1 messages for 1830913972
2025-09-04 13:08:10,792 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:08:10,794 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:08:10,795 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:08:10,795 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:08:11,459 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:08:11,460 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:08:11,461 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 4.0s... (Attempt 3/5)
2025-09-04 13:08:11,462 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 4 секунд... (Попытка 3/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:08:11,462 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:08:11,463 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:08:11,464 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:08:15,483 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:08:15,484 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:08:15,485 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 8.0s... (Attempt 4/5)
2025-09-04 13:08:15,486 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 8 секунд... (Попытка 4/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:08:15,486 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:08:15,487 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:08:15,488 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 13:08:23,517 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:08:23,518 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:08:23,519 - app.clients.ws_client - ERROR - [ws_client.py:94 - _connect_and_listen()] - ❌ Maximum retry attempts (5) exceeded for user 1830913972
2025-09-04 13:08:23,520 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:10:50,806 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:10:50,807 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-04 13:10:50,808 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:10:58,160 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:10:58,162 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:10:58,163 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:10:58,163 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:44 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-04 13:10:58,164 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - _initialize()] - __patent: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}
2025-09-04 13:10:58,165 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-04 13:10:58,165 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:10:58,166 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:10:58,167 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-04 13:10:58,167 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-04 13:10:58,170 - app.clients.parser_client - ERROR - [parser_client.py:53 - _request_ws()] - Request error: 404, {"detail":"Not Found"}
2025-09-04 13:10:58,171 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': 'Error connecting to parser', 'stage': 'failed'}
2025-09-04 13:10:58,172 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:10:58,173 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:10:58,173 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-04 13:10:58,174 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/ws/parser/1830913972
2025-09-04 13:10:58,176 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:10:58,177 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 1.0s... (Attempt 1/5)
2025-09-04 13:10:58,178 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 1 секунд... (Попытка 1/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:10:58,179 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:10:58,180 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:10:58,181 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-04 13:10:58,289 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:10:58,289 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:10:58,290 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:10:58,291 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 5 сообщений
2025-09-04 13:10:58,291 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000002C7F488B1D0>, <core.connection_manager.BufferedMessage object at 0x000002C7F4689AC0>, <core.connection_manager.BufferedMessage object at 0x000002C7F49216D0>, <core.connection_manager.BufferedMessage object at 0x000002C7F4923410>, <core.connection_manager.BufferedMessage object at 0x000002C7F4923380>], maxlen=50)
2025-09-04 13:10:58,292 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (5 messages)
2025-09-04 13:10:58,293 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 5 messages for 1830913972
2025-09-04 13:10:58,294 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:10:58,295 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:10:58,296 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:10:58,297 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:10:59,177 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:10:59,178 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:10:59,179 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 2.0s... (Attempt 2/5)
2025-09-04 13:10:59,180 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 2 секунд... (Попытка 2/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:10:59,181 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:10:59,182 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:10:59,182 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:11:01,191 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:11:01,192 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:11:01,193 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 4.0s... (Attempt 3/5)
2025-09-04 13:11:01,194 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 4 секунд... (Попытка 3/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:11:01,195 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:11:01,196 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:11:01,196 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 13:11:05,215 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:11:05,216 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:11:05,217 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 8.0s... (Attempt 4/5)
2025-09-04 13:11:05,218 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 8 секунд... (Попытка 4/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:11:05,218 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:11:05,220 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:11:05,220 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-04 13:11:13,240 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:11:13,241 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:11:13,242 - app.clients.ws_client - ERROR - [ws_client.py:94 - _connect_and_listen()] - ❌ Maximum retry attempts (5) exceeded for user 1830913972
2025-09-04 13:11:13,243 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:02,599 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:12:02,600 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-04 13:12:02,601 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:12:12,287 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:12:12,288 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:12:12,289 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:12:12,290 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:44 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-04 13:12:12,291 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - _initialize()] - __patent: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}
2025-09-04 13:12:12,291 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-04 13:12:12,292 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:12,293 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:12,293 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-04 13:12:12,294 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-04 13:12:12,297 - app.clients.parser_client - ERROR - [parser_client.py:53 - _request_ws()] - Request error: 404, {"detail":"Not Found"}
2025-09-04 13:12:12,298 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': 'Error connecting to parser', 'stage': 'failed'}
2025-09-04 13:12:12,299 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:12,299 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:12,300 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-04 13:12:12,301 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/ws/parser/1830913972
2025-09-04 13:12:12,304 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:12,305 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 1.0s... (Attempt 1/5)
2025-09-04 13:12:12,306 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 1 секунд... (Попытка 1/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:12:12,306 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:12,307 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:12,308 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-04 13:12:12,383 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:12:12,383 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:12:12,384 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:12:12,385 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 6 сообщений
2025-09-04 13:12:12,385 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000002C7F4486FC0>, <core.connection_manager.BufferedMessage object at 0x000002C7C59090A0>, <core.connection_manager.BufferedMessage object at 0x000002C7F4923440>, <core.connection_manager.BufferedMessage object at 0x000002C7F498D700>, <core.connection_manager.BufferedMessage object at 0x000002C7F417F260>, <core.connection_manager.BufferedMessage object at 0x000002C7F498DC70>], maxlen=50)
2025-09-04 13:12:12,386 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (6 messages)
2025-09-04 13:12:12,387 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 6 messages for 1830913972
2025-09-04 13:12:12,388 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:12:12,389 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:12:12,390 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:12:12,391 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:12:13,322 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:13,323 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:13,324 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 2.0s... (Attempt 2/5)
2025-09-04 13:12:13,325 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 2 секунд... (Попытка 2/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:12:13,326 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:13,327 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:13,327 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:12:15,345 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:15,346 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:15,347 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 4.0s... (Attempt 3/5)
2025-09-04 13:12:15,348 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 4 секунд... (Попытка 3/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:12:15,348 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:15,349 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:15,350 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 13:12:19,354 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:19,355 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:19,356 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 8.0s... (Attempt 4/5)
2025-09-04 13:12:19,357 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 8 секунд... (Попытка 4/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:12:19,358 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:19,358 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:19,359 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-04 13:12:27,375 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:27,376 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:27,377 - app.clients.ws_client - ERROR - [ws_client.py:94 - _connect_and_listen()] - ❌ Maximum retry attempts (5) exceeded for user 1830913972
2025-09-04 13:12:27,378 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:33,297 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:12:33,298 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:12:33,299 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:12:33,300 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:44 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-04 13:12:33,301 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - _initialize()] - __patent: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}
2025-09-04 13:12:33,301 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-04 13:12:33,302 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:33,303 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:33,303 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-04 13:12:33,304 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-04 13:12:33,307 - app.clients.parser_client - ERROR - [parser_client.py:53 - _request_ws()] - Request error: 404, {"detail":"Not Found"}
2025-09-04 13:12:33,308 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': 'Error connecting to parser', 'stage': 'failed'}
2025-09-04 13:12:33,308 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:33,309 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:33,310 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-04 13:12:33,311 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/ws/parser/1830913972
2025-09-04 13:12:33,314 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:33,315 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 1.0s... (Attempt 1/5)
2025-09-04 13:12:33,316 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 1 секунд... (Попытка 1/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:12:33,316 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:33,317 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:33,318 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-04 13:12:33,389 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:12:33,389 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:12:33,390 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:12:33,390 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 6 сообщений
2025-09-04 13:12:33,391 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000002C7F4486FC0>, <core.connection_manager.BufferedMessage object at 0x000002C7C59090A0>, <core.connection_manager.BufferedMessage object at 0x000002C7F4921640>, <core.connection_manager.BufferedMessage object at 0x000002C7F498F020>, <core.connection_manager.BufferedMessage object at 0x000002C7F4689AC0>, <core.connection_manager.BufferedMessage object at 0x000002C7F4888B60>], maxlen=50)
2025-09-04 13:12:33,391 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (6 messages)
2025-09-04 13:12:33,393 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 6 messages for 1830913972
2025-09-04 13:12:33,393 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:12:33,395 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:12:33,396 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:12:33,396 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:12:34,338 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:34,339 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:34,340 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 2.0s... (Attempt 2/5)
2025-09-04 13:12:34,341 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 2 секунд... (Попытка 2/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:12:34,342 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:34,343 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:34,343 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:12:36,321 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:36,322 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:36,323 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 4.0s... (Attempt 3/5)
2025-09-04 13:12:36,324 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 4 секунд... (Попытка 3/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:12:36,325 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:36,325 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:36,326 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 13:12:38,632 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:12:38,633 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:12:38,634 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:12:38,635 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:44 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-04 13:12:38,635 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - _initialize()] - __patent: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}
2025-09-04 13:12:38,636 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-04 13:12:38,637 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:38,638 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:38,638 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-04 13:12:38,639 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-04 13:12:38,641 - app.clients.parser_client - ERROR - [parser_client.py:53 - _request_ws()] - Request error: 404, {"detail":"Not Found"}
2025-09-04 13:12:38,643 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': 'Error connecting to parser', 'stage': 'failed'}
2025-09-04 13:12:38,643 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:38,644 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:38,645 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-04 13:12:38,645 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/ws/parser/1830913972
2025-09-04 13:12:38,648 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:38,649 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 1.0s... (Attempt 1/5)
2025-09-04 13:12:38,650 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 1 секунд... (Попытка 1/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:12:38,651 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:38,652 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:38,652 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-04 13:12:38,794 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:12:38,794 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:12:38,795 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:12:38,795 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 5 сообщений
2025-09-04 13:12:38,796 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000002C7F43B4CB0>, <core.connection_manager.BufferedMessage object at 0x000002C7F4888B60>, <core.connection_manager.BufferedMessage object at 0x000002C7F498F1A0>, <core.connection_manager.BufferedMessage object at 0x000002C7F4922B40>, <core.connection_manager.BufferedMessage object at 0x000002C7F498DBB0>], maxlen=50)
2025-09-04 13:12:38,797 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (5 messages)
2025-09-04 13:12:38,798 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 5 messages for 1830913972
2025-09-04 13:12:38,798 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:12:38,800 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:12:38,801 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:12:38,801 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:12:39,652 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:39,653 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:39,654 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 2.0s... (Attempt 2/5)
2025-09-04 13:12:39,655 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 2 секунд... (Попытка 2/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:12:39,655 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:39,656 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:39,657 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:12:40,334 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:40,335 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:40,336 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 8.0s... (Attempt 4/5)
2025-09-04 13:12:40,337 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 8 секунд... (Попытка 4/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:12:40,338 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:40,339 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:40,339 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 13:12:41,648 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:41,649 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:41,650 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 4.0s... (Attempt 3/5)
2025-09-04 13:12:41,651 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 4 секунд... (Попытка 3/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:12:41,651 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:41,652 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:41,653 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-04 13:12:45,670 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:45,671 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:45,672 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 8.0s... (Attempt 4/5)
2025-09-04 13:12:45,673 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 8 секунд... (Попытка 4/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:12:45,673 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:12:45,674 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:12:45,675 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-04 13:12:48,343 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:48,344 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:48,345 - app.clients.ws_client - ERROR - [ws_client.py:94 - _connect_and_listen()] - ❌ Maximum retry attempts (5) exceeded for user 1830913972
2025-09-04 13:12:48,346 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:53,690 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:12:53,691 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:12:53,692 - app.clients.ws_client - ERROR - [ws_client.py:94 - _connect_and_listen()] - ❌ Maximum retry attempts (5) exceeded for user 1830913972
2025-09-04 13:12:53,693 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:13:08,749 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:13:08,751 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-04 13:13:08,751 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:13:17,655 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:13:17,657 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:13:17,658 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:13:17,659 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:44 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-04 13:13:17,659 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - _initialize()] - __patent: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}
2025-09-04 13:13:17,660 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-04 13:13:17,660 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:13:17,661 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:13:17,662 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-04 13:13:17,662 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-04 13:13:17,665 - app.clients.parser_client - ERROR - [parser_client.py:53 - _request_ws()] - Request error: 404, {"detail":"Not Found"}
2025-09-04 13:13:17,667 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': 'Error connecting to parser', 'stage': 'failed'}
2025-09-04 13:13:17,667 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:13:17,668 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:13:17,669 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-04 13:13:17,669 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/ws/parser/1830913972
2025-09-04 13:13:17,672 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:13:17,673 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 1.0s... (Attempt 1/5)
2025-09-04 13:13:17,674 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 1 секунд... (Попытка 1/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:13:17,674 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:13:17,675 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:13:17,676 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 7
2025-09-04 13:13:17,757 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:13:17,758 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:13:17,758 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:13:17,759 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 7 сообщений
2025-09-04 13:13:17,759 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000002C7F49228A0>, <core.connection_manager.BufferedMessage object at 0x000002C7F43965D0>, <core.connection_manager.BufferedMessage object at 0x000002C7F4922B40>, <core.connection_manager.BufferedMessage object at 0x000002C7F4888B60>, <core.connection_manager.BufferedMessage object at 0x000002C7F498C4A0>, <core.connection_manager.BufferedMessage object at 0x000002C7F462F770>, <core.connection_manager.BufferedMessage object at 0x000002C7F498F590>], maxlen=50)
2025-09-04 13:13:17,760 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (7 messages)
2025-09-04 13:13:17,761 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 7 messages for 1830913972
2025-09-04 13:13:17,762 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:13:17,763 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:13:17,764 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:13:17,765 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:13:18,693 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:13:18,694 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:13:18,695 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 2.0s... (Attempt 2/5)
2025-09-04 13:13:18,696 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 2 секунд... (Попытка 2/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:13:18,696 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:13:18,697 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:13:18,698 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:13:20,718 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:13:20,719 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:13:20,720 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 4.0s... (Attempt 3/5)
2025-09-04 13:13:20,724 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 4 секунд... (Попытка 3/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:13:20,724 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:13:20,725 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:13:20,726 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 13:13:24,727 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:13:24,728 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:13:24,729 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 8.0s... (Attempt 4/5)
2025-09-04 13:13:24,730 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 8 секунд... (Попытка 4/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:13:24,730 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:13:24,731 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:13:24,732 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-04 13:13:32,743 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:13:32,744 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:13:32,745 - app.clients.ws_client - ERROR - [ws_client.py:94 - _connect_and_listen()] - ❌ Maximum retry attempts (5) exceeded for user 1830913972
2025-09-04 13:13:32,746 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:16:24,903 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:16:24,904 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-04 13:16:24,905 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:16:34,062 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:16:34,063 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:16:34,064 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:16:34,065 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:44 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-04 13:16:34,066 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - _initialize()] - __patent: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}
2025-09-04 13:16:34,066 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-04 13:16:34,067 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:16:34,068 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:16:34,069 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-04 13:16:34,069 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-04 13:16:34,072 - app.clients.parser_client - ERROR - [parser_client.py:53 - _request_ws()] - Request error: 404, {"detail":"Not Found"}
2025-09-04 13:16:34,073 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': 'Error connecting to parser', 'stage': 'failed'}
2025-09-04 13:16:34,074 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:16:34,075 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:16:34,075 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-04 13:16:34,076 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/ws/parser/1830913972
2025-09-04 13:16:34,079 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:16:34,080 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 1.0s... (Attempt 1/5)
2025-09-04 13:16:34,081 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 1 секунд... (Попытка 1/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:16:34,082 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:16:34,083 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:16:34,083 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-04 13:16:34,243 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:16:34,244 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:16:34,244 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:16:34,245 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 6 сообщений
2025-09-04 13:16:34,246 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000002C7F43965D0>, <core.connection_manager.BufferedMessage object at 0x000002C7F462F770>, <core.connection_manager.BufferedMessage object at 0x000002C7F474FE60>, <core.connection_manager.BufferedMessage object at 0x000002C7C5B174A0>, <core.connection_manager.BufferedMessage object at 0x000002C7F4396420>, <core.connection_manager.BufferedMessage object at 0x000002C7F47115E0>], maxlen=50)
2025-09-04 13:16:34,246 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (6 messages)
2025-09-04 13:16:34,247 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 6 messages for 1830913972
2025-09-04 13:16:34,248 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:16:34,250 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:16:34,250 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:16:34,251 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:16:35,103 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:16:35,104 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:16:35,105 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 2.0s... (Attempt 2/5)
2025-09-04 13:16:35,106 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 2 секунд... (Попытка 2/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:16:35,106 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:16:35,107 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:16:35,108 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:16:37,120 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:16:37,121 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:16:37,122 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 4.0s... (Attempt 3/5)
2025-09-04 13:16:37,123 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 4 секунд... (Попытка 3/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:16:37,123 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:16:37,124 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:16:37,125 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 13:16:41,059 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:16:41,059 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:16:41,060 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:16:41,060 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 2 сообщений
2025-09-04 13:16:41,061 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000002C7F45F3BC0>, <core.connection_manager.BufferedMessage object at 0x000002C7C59090A0>], maxlen=50)
2025-09-04 13:16:41,061 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (2 messages)
2025-09-04 13:16:41,062 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 2 messages for 1830913972
2025-09-04 13:16:41,063 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:16:41,065 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:16:41,066 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:16:41,066 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:16:41,123 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:16:41,124 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:16:41,125 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 8.0s... (Attempt 4/5)
2025-09-04 13:16:41,126 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': '🔄 Переподключение через 8 секунд... (Попытка 4/5)', 'progress': 20, 'stage': ''}
2025-09-04 13:16:41,127 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:16:41,128 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:16:41,128 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:16:47,803 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:16:47,804 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:16:47,805 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:16:47,805 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 1 сообщений
2025-09-04 13:16:47,806 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000002C7F4486FC0>], maxlen=50)
2025-09-04 13:16:47,806 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (1 messages)
2025-09-04 13:16:47,807 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 1 messages for 1830913972
2025-09-04 13:16:47,808 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:16:47,809 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:16:47,810 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:16:47,811 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:16:49,146 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 403, message='Invalid response status', url='ws://127.0.0.1:8009/ws/parser/1830913972'
2025-09-04 13:16:49,147 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:16:49,148 - app.clients.ws_client - ERROR - [ws_client.py:94 - _connect_and_listen()] - ❌ Maximum retry attempts (5) exceeded for user 1830913972
2025-09-04 13:16:49,149 - app.services.analog.raw_data_generator - ERROR - [raw_data_generator.py:140 - handle_parser_progress()] - Error in handle_parser_progress: invalid state
2025-09-04 13:16:54,614 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:16:54,615 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:16:54,616 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:19:41,003 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:19:41,004 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:19:41,004 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:20:00,017 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 13:25:49,348 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 13:25:57,552 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:25:57,561 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-04 13:25:57,562 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:25:57,563 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:25:57,566 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:25:57,566 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 13:26:09,687 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:26:09,688 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:26:09,690 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:26:09,690 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:44 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 13:26:09,691 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - _initialize()] - __patent: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-04 13:26:09,692 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-04 13:26:09,692 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:26:09,693 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:26:09,694 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:26:09,694 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-04 13:26:09,698 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-04 13:26:09,731 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-04 13:26:09,732 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-04 13:26:09,733 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 22, 'stage': 'initialization'}
2025-09-04 13:26:09,733 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:26:09,734 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:26:09,735 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 13:26:09,736 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга
2025-09-04 13:26:09,736 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Начало парсинга', 'progress': 25, 'stage': 'initialization'}
2025-09-04 13:26:09,737 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:26:09,738 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:26:09,738 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-04 13:26:09,739 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Формирование запроса
2025-09-04 13:26:09,739 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Формирование запроса', 'progress': 30, 'stage': 'request_formation'}
2025-09-04 13:26:09,740 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:26:09,741 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:26:09,742 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-04 13:26:09,742 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Подготовка заголовков
2025-09-04 13:26:09,743 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Подготовка заголовков', 'progress': 35, 'stage': 'preparation'}
2025-09-04 13:26:09,743 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:26:09,744 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:26:09,745 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-04 13:26:09,745 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Отправка запроса к API
2025-09-04 13:26:09,746 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Отправка запроса к API', 'progress': 40, 'stage': 'sending_request'}
2025-09-04 13:26:09,747 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:26:09,747 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:26:09,748 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-04 13:26:09,835 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:26:09,836 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:26:09,836 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:26:09,837 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 6 сообщений
2025-09-04 13:26:09,837 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000001BD7FA63020>, <core.connection_manager.BufferedMessage object at 0x000001BD7FDFF0B0>, <core.connection_manager.BufferedMessage object at 0x000001BD1404A0F0>, <core.connection_manager.BufferedMessage object at 0x000001BD7FA74680>, <core.connection_manager.BufferedMessage object at 0x000001BD7FA74C50>, <core.connection_manager.BufferedMessage object at 0x000001BD7FA75A30>], maxlen=50)
2025-09-04 13:26:09,838 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (6 messages)
2025-09-04 13:26:09,840 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 6 messages for 1830913972
2025-09-04 13:26:09,841 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:26:09,843 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:26:09,844 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:26:09,844 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:26:11,403 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка ответа
2025-09-04 13:26:11,404 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка ответа', 'progress': 50, 'stage': 'processing_response'}
2025-09-04 13:26:11,404 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:26:11,405 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:26:11,406 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:26:11,407 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Извлечение данных
2025-09-04 13:26:11,407 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Извлечение данных', 'progress': 60, 'stage': 'extracting_data'}
2025-09-04 13:26:11,408 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:26:11,409 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:26:11,409 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 13:26:11,410 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Завершение обработки
2025-09-04 13:26:11,411 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Завершение обработки', 'progress': 65, 'stage': 'finalizing'}
2025-09-04 13:26:11,411 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:26:11,412 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:26:11,413 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-04 13:26:11,413 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Парсинг завершен успешно
2025-09-04 13:26:11,414 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:128 - handle_parser_progress()] - completed message: {'status': 'completed', 'stage': 'completed', 'progress': 100, 'message': 'Парсинг завершен успешно', 'result': {'RU2427295C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2427295C2_20110827', 'title': 'СПОСОБ И СИСТЕМА ДЛЯ ЗАЩИТЫ ЧАСТИ ТЕЛА'}, 'RU2284630C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2284630C2_20060927', 'title': '<em>ЭЛЕКТРИЧЕСКИЙ</em> <em>ГЕНЕРАТОР</em>'}, 'RU2000122775A': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2000122775A_20021110', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}, 'RU160935U1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU160935U1_20160410', 'title': 'ОПТИЧЕСКИЙ ИЗВЕЩАТЕЛЬ'}, 'RU2234437C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2234437C2_20040820', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}}}
2025-09-04 13:26:11,415 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-09-04 13:26:11,416 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-09-04 13:26:11,434 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-09-04 13:26:11,436 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-09-04 13:26:11,437 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'completed', 'message': 'Ссылки получены и сохранены', 'stage': 'completed'}
2025-09-04 13:26:11,437 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:26:11,438 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:26:11,439 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-04 13:26:13,632 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:26:13,632 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:26:13,633 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:26:13,633 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 4 сообщений
2025-09-04 13:26:13,634 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000001BD7FDFCD40>, <core.connection_manager.BufferedMessage object at 0x000001BD7FC534A0>, <core.connection_manager.BufferedMessage object at 0x000001BD7FA6D070>, <core.connection_manager.BufferedMessage object at 0x000001BD7FA6E930>], maxlen=50)
2025-09-04 13:26:13,634 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (4 messages)
2025-09-04 13:26:13,635 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 4 messages for 1830913972
2025-09-04 13:26:13,636 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:26:13,638 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:26:13,639 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:26:13,639 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:26:17,499 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:26:17,499 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:26:17,500 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:29:50,596 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:29:50,597 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:29:50,597 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:30:03,813 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:30:03,816 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-04 13:30:03,816 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:30:11,493 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:30:11,494 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:30:11,495 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:30:11,496 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:44 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 13:30:11,497 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - _initialize()] - __patent: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-04 13:30:11,497 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-04 13:30:11,498 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:30:11,499 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:30:11,499 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:30:11,500 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-04 13:30:11,503 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-04 13:30:11,526 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-04 13:30:11,527 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-04 13:30:11,527 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 22, 'stage': 'initialization'}
2025-09-04 13:30:11,528 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:30:11,529 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:30:11,530 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 13:30:11,530 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга
2025-09-04 13:30:11,531 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Начало парсинга', 'progress': 25, 'stage': 'initialization'}
2025-09-04 13:30:11,531 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:30:11,532 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:30:11,533 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-04 13:30:11,534 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Формирование запроса
2025-09-04 13:30:11,534 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Формирование запроса', 'progress': 30, 'stage': 'request_formation'}
2025-09-04 13:30:11,535 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:30:11,536 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:30:11,536 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-04 13:30:11,537 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Подготовка заголовков
2025-09-04 13:30:11,538 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Подготовка заголовков', 'progress': 35, 'stage': 'preparation'}
2025-09-04 13:30:11,538 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:30:11,539 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:30:11,540 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-04 13:30:11,540 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Отправка запроса к API
2025-09-04 13:30:11,541 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Отправка запроса к API', 'progress': 40, 'stage': 'sending_request'}
2025-09-04 13:30:11,542 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:30:11,543 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:30:11,543 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-04 13:30:11,621 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:30:11,621 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:30:11,622 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:30:11,622 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 6 сообщений
2025-09-04 13:30:11,623 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000001BD140BBA40>, <core.connection_manager.BufferedMessage object at 0x000001BD140BBEC0>, <core.connection_manager.BufferedMessage object at 0x000001BD140BBE90>, <core.connection_manager.BufferedMessage object at 0x000001BD140BBF80>, <core.connection_manager.BufferedMessage object at 0x000001BD140BBFE0>, <core.connection_manager.BufferedMessage object at 0x000001BD140BBF20>], maxlen=50)
2025-09-04 13:30:11,624 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (6 messages)
2025-09-04 13:30:11,625 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 6 messages for 1830913972
2025-09-04 13:30:11,625 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:30:12,595 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка ответа
2025-09-04 13:30:12,596 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка ответа', 'progress': 50, 'stage': 'processing_response'}
2025-09-04 13:30:12,597 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Извлечение данных
2025-09-04 13:30:12,598 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Извлечение данных', 'progress': 60, 'stage': 'extracting_data'}
2025-09-04 13:30:12,600 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Завершение обработки
2025-09-04 13:30:12,600 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Завершение обработки', 'progress': 65, 'stage': 'finalizing'}
2025-09-04 13:30:12,602 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Парсинг завершен успешно
2025-09-04 13:30:12,603 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:128 - handle_parser_progress()] - completed message: {'status': 'completed', 'stage': 'completed', 'progress': 100, 'message': 'Парсинг завершен успешно', 'result': {'RU2427295C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2427295C2_20110827', 'title': 'СПОСОБ И СИСТЕМА ДЛЯ ЗАЩИТЫ ЧАСТИ ТЕЛА'}, 'RU2284630C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2284630C2_20060927', 'title': '<em>ЭЛЕКТРИЧЕСКИЙ</em> <em>ГЕНЕРАТОР</em>'}, 'RU2000122775A': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2000122775A_20021110', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}, 'RU160935U1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU160935U1_20160410', 'title': 'ОПТИЧЕСКИЙ ИЗВЕЩАТЕЛЬ'}, 'RU2234437C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2234437C2_20040820', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}}}
2025-09-04 13:30:12,604 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-09-04 13:30:12,604 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-09-04 13:30:12,606 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-09-04 13:30:12,607 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-09-04 13:30:12,608 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'completed', 'message': 'Ссылки получены и сохранены', 'stage': 'completed'}
2025-09-04 13:30:17,023 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:30:17,024 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:30:17,024 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:33:22,471 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 13:33:29,479 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:33:29,488 - app.services.analog.table_generator - INFO - [table_generator.py:260 - generate_analogs_link_xlsx()] - Star generate_analogs_link_xlsx
2025-09-04 13:33:29,489 - app.services.analog.table_generator - INFO - [table_generator.py:45 - _generate_analogs_link()] - Start generate_analogs_link
2025-09-04 13:41:10,675 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 13:41:16,478 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:41:16,487 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:41:16,488 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:41:16,491 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:41:16,491 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 13:41:16,493 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:41:16,493 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:44 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 13:41:16,494 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - _initialize()] - __patent: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-04 13:41:16,495 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-04 13:41:16,495 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:41:16,496 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:41:16,497 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:41:16,497 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-04 13:41:16,501 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-04 13:41:16,522 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-04 13:41:16,522 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-04 13:41:16,523 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 22, 'stage': 'initialization'}
2025-09-04 13:41:16,524 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:41:16,525 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:41:16,525 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 13:41:16,526 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга
2025-09-04 13:41:16,526 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Начало парсинга', 'progress': 25, 'stage': 'initialization'}
2025-09-04 13:41:16,527 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:41:16,528 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:41:16,528 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-04 13:41:16,529 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Формирование запроса
2025-09-04 13:41:16,529 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Формирование запроса', 'progress': 30, 'stage': 'request_formation'}
2025-09-04 13:41:16,530 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:41:16,531 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:41:16,532 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-04 13:41:16,532 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Подготовка заголовков
2025-09-04 13:41:16,533 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Подготовка заголовков', 'progress': 35, 'stage': 'preparation'}
2025-09-04 13:41:16,533 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:41:16,534 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:41:16,535 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-04 13:41:16,535 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Отправка запроса к API
2025-09-04 13:41:16,536 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Отправка запроса к API', 'progress': 40, 'stage': 'sending_request'}
2025-09-04 13:41:16,537 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:41:16,538 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:41:16,538 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-04 13:41:16,613 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:41:16,613 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:41:16,614 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:41:16,614 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 6 сообщений
2025-09-04 13:41:16,615 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x00000250225E6660>, <core.connection_manager.BufferedMessage object at 0x0000025050C2ECF0>, <core.connection_manager.BufferedMessage object at 0x0000025050C2C770>, <core.connection_manager.BufferedMessage object at 0x00000250509EDA30>, <core.connection_manager.BufferedMessage object at 0x00000250509E2CF0>, <core.connection_manager.BufferedMessage object at 0x00000250509E0B30>], maxlen=50)
2025-09-04 13:41:16,616 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (6 messages)
2025-09-04 13:41:16,618 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 6 messages for 1830913972
2025-09-04 13:41:16,619 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:41:17,655 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка ответа
2025-09-04 13:41:17,655 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка ответа', 'progress': 50, 'stage': 'processing_response'}
2025-09-04 13:41:17,657 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Извлечение данных
2025-09-04 13:41:17,657 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Извлечение данных', 'progress': 60, 'stage': 'extracting_data'}
2025-09-04 13:41:17,659 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Завершение обработки
2025-09-04 13:41:17,660 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Завершение обработки', 'progress': 65, 'stage': 'finalizing'}
2025-09-04 13:41:17,662 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Парсинг завершен успешно
2025-09-04 13:41:17,662 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:128 - handle_parser_progress()] - completed message: {'status': 'completed', 'stage': 'completed', 'progress': 100, 'message': 'Парсинг завершен успешно', 'result': {'RU2427295C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2427295C2_20110827', 'title': 'СПОСОБ И СИСТЕМА ДЛЯ ЗАЩИТЫ ЧАСТИ ТЕЛА'}, 'RU2284630C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2284630C2_20060927', 'title': '<em>ЭЛЕКТРИЧЕСКИЙ</em> <em>ГЕНЕРАТОР</em>'}, 'RU2000122775A': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2000122775A_20021110', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}, 'RU160935U1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU160935U1_20160410', 'title': 'ОПТИЧЕСКИЙ ИЗВЕЩАТЕЛЬ'}, 'RU2234437C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2234437C2_20040820', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}}}
2025-09-04 13:41:17,664 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-09-04 13:41:17,664 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-09-04 13:41:17,665 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-09-04 13:41:17,667 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-09-04 13:41:17,667 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'completed', 'message': 'Ссылки получены и сохранены', 'stage': 'completed'}
2025-09-04 13:41:21,810 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:41:21,811 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:41:21,811 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:41:54,272 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:41:54,273 - app.http.routes.analog - INFO - [analog.py:22 - reg()] - Request to get a link
2025-09-04 13:41:54,274 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:41:54,275 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:41:54,276 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:41:54,277 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 13:41:54,278 - app.services.analog.table_generator - INFO - [table_generator.py:260 - generate_analogs_link_xlsx()] - Star generate_analogs_link_xlsx
2025-09-04 13:41:54,279 - app.services.analog.table_generator - INFO - [table_generator.py:45 - _generate_analogs_link()] - Start generate_analogs_link
2025-09-04 13:41:54,280 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:41:54,282 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:44:11,104 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 13:44:15,013 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:44:15,022 - app.http.routes.analog - INFO - [analog.py:22 - reg()] - Request to get a link
2025-09-04 13:44:15,023 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:44:15,024 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:44:15,027 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:44:15,028 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 13:44:15,028 - app.services.analog.table_generator - INFO - [table_generator.py:260 - generate_analogs_link_xlsx()] - Star generate_analogs_link_xlsx
2025-09-04 13:44:15,029 - app.services.analog.table_generator - INFO - [table_generator.py:45 - _generate_analogs_link()] - Start generate_analogs_link
2025-09-04 13:44:27,281 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:44:27,282 - app.http.routes.analog - INFO - [analog.py:22 - reg()] - Request to get a link
2025-09-04 13:44:27,283 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:44:27,284 - app.services.analog.table_generator - INFO - [table_generator.py:260 - generate_analogs_link_xlsx()] - Star generate_analogs_link_xlsx
2025-09-04 13:44:27,285 - app.services.analog.table_generator - INFO - [table_generator.py:45 - _generate_analogs_link()] - Start generate_analogs_link
2025-09-04 13:45:14,464 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 13:45:17,604 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:45:17,613 - app.http.routes.analog - INFO - [analog.py:22 - reg()] - Request to get a link
2025-09-04 13:45:17,614 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:45:17,615 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:45:17,618 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:45:17,619 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 13:45:17,620 - app.http.routes.analog - DEBUG - [analog.py:24 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 13:45:17,620 - app.services.analog.table_generator - INFO - [table_generator.py:260 - generate_analogs_link_xlsx()] - Star generate_analogs_link_xlsx
2025-09-04 13:45:17,621 - app.services.analog.table_generator - INFO - [table_generator.py:45 - _generate_analogs_link()] - Start generate_analogs_link
2025-09-04 13:47:54,427 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 13:47:57,470 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:47:57,479 - app.http.routes.analog - INFO - [analog.py:22 - reg()] - Request to get a link
2025-09-04 13:47:57,480 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:47:57,481 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:47:57,484 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:47:57,485 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 13:47:57,486 - app.http.routes.analog - DEBUG - [analog.py:24 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 13:47:57,486 - app.services.analog.table_generator - INFO - [table_generator.py:260 - generate_analogs_link_xlsx()] - Star generate_analogs_link_xlsx
2025-09-04 13:47:57,487 - app.services.analog.table_generator - INFO - [table_generator.py:45 - _generate_analogs_link()] - Start generate_analogs_link
2025-09-04 13:47:57,488 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:47:57,490 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:49:50,823 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 13:50:00,393 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:50:00,402 - app.http.routes.analog - INFO - [analog.py:22 - reg()] - Request to get a link
2025-09-04 13:50:00,403 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:50:00,404 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:50:00,407 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:50:00,408 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 13:50:00,408 - app.http.routes.analog - DEBUG - [analog.py:24 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 13:50:00,409 - app.services.analog.table_generator - INFO - [table_generator.py:260 - generate_analogs_link_xlsx()] - Star generate_analogs_link_xlsx
2025-09-04 13:50:00,410 - app.services.analog.table_generator - INFO - [table_generator.py:45 - _generate_analogs_link()] - Start generate_analogs_link
2025-09-04 13:50:00,411 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:50:00,413 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:50:29,192 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 13:50:32,215 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:50:32,224 - app.http.routes.analog - INFO - [analog.py:22 - reg()] - Request to get a link
2025-09-04 13:50:32,225 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:50:32,226 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:50:32,229 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:50:32,230 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 13:50:32,230 - app.http.routes.analog - DEBUG - [analog.py:24 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 13:50:32,231 - app.services.analog.table_generator - INFO - [table_generator.py:260 - generate_analogs_link_xlsx()] - Star generate_analogs_link_xlsx
2025-09-04 13:50:32,232 - app.services.analog.table_generator - INFO - [table_generator.py:45 - _generate_analogs_link()] - Start generate_analogs_link
2025-09-04 13:50:32,233 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:50:32,235 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:52:20,800 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 13:52:24,313 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:52:24,322 - app.http.routes.analog - INFO - [analog.py:22 - reg()] - Request to get a link
2025-09-04 13:52:24,323 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:52:24,324 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:52:24,327 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:52:24,328 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 13:52:24,328 - app.http.routes.analog - DEBUG - [analog.py:24 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 13:52:24,329 - app.services.analog.table_generator - INFO - [table_generator.py:260 - generate_analogs_link_xlsx()] - Star generate_analogs_link_xlsx
2025-09-04 13:52:24,330 - app.services.analog.table_generator - INFO - [table_generator.py:45 - _generate_analogs_link()] - Start generate_analogs_link
2025-09-04 13:52:24,331 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:52:24,333 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 13:55:14,041 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:55:14,043 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-04 13:55:14,043 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:55:27,328 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:55:27,330 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:55:27,331 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:55:27,331 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:44 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 13:55:27,332 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:54 - _initialize()] - __patent: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-04 13:55:27,333 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-04 13:55:27,333 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:55:27,334 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:55:27,335 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-04 13:55:27,335 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-04 13:55:27,339 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-04 13:55:27,360 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-04 13:55:27,361 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-04 13:55:27,361 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 22, 'stage': 'initialization'}
2025-09-04 13:55:27,362 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:55:27,363 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:55:27,364 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-04 13:55:27,364 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга
2025-09-04 13:55:27,365 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Начало парсинга', 'progress': 25, 'stage': 'initialization'}
2025-09-04 13:55:27,366 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:55:27,367 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:55:27,367 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-04 13:55:27,368 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Формирование запроса
2025-09-04 13:55:27,368 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Формирование запроса', 'progress': 30, 'stage': 'request_formation'}
2025-09-04 13:55:27,369 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:55:27,370 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:55:27,370 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-04 13:55:27,371 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Подготовка заголовков
2025-09-04 13:55:27,371 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Подготовка заголовков', 'progress': 35, 'stage': 'preparation'}
2025-09-04 13:55:27,372 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:55:27,373 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:55:27,373 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-04 13:55:27,374 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Отправка запроса к API
2025-09-04 13:55:27,374 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Отправка запроса к API', 'progress': 40, 'stage': 'sending_request'}
2025-09-04 13:55:27,375 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-04 13:55:27,376 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-04 13:55:27,376 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-04 13:55:27,512 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 13:55:27,512 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 13:55:27,513 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-04 13:55:27,513 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 6 сообщений
2025-09-04 13:55:27,514 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x00000259FFDA6660>, <core.connection_manager.BufferedMessage object at 0x00000259FFDA6720>, <core.connection_manager.BufferedMessage object at 0x00000259FF861910>, <core.connection_manager.BufferedMessage object at 0x00000259FFDA68D0>, <core.connection_manager.BufferedMessage object at 0x00000259FFDA6B40>, <core.connection_manager.BufferedMessage object at 0x00000259FFDA6BD0>], maxlen=50)
2025-09-04 13:55:27,514 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (6 messages)
2025-09-04 13:55:27,516 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 6 messages for 1830913972
2025-09-04 13:55:27,516 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 13:55:28,284 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка ответа
2025-09-04 13:55:28,285 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка ответа', 'progress': 50, 'stage': 'processing_response'}
2025-09-04 13:55:28,286 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Извлечение данных
2025-09-04 13:55:28,287 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Извлечение данных', 'progress': 60, 'stage': 'extracting_data'}
2025-09-04 13:55:28,289 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Завершение обработки
2025-09-04 13:55:28,289 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Завершение обработки', 'progress': 65, 'stage': 'finalizing'}
2025-09-04 13:55:28,291 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Парсинг завершен успешно
2025-09-04 13:55:28,292 - app.services.analog.raw_data_generator - DEBUG - [raw_data_generator.py:128 - handle_parser_progress()] - completed message: {'status': 'completed', 'stage': 'completed', 'progress': 100, 'message': 'Парсинг завершен успешно', 'result': {'RU2427295C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2427295C2_20110827', 'title': 'СПОСОБ И СИСТЕМА ДЛЯ ЗАЩИТЫ ЧАСТИ ТЕЛА'}, 'RU2284630C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2284630C2_20060927', 'title': '<em>ЭЛЕКТРИЧЕСКИЙ</em> <em>ГЕНЕРАТОР</em>'}, 'RU2000122775A': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2000122775A_20021110', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}, 'RU160935U1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU160935U1_20160410', 'title': 'ОПТИЧЕСКИЙ ИЗВЕЩАТЕЛЬ'}, 'RU2234437C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2234437C2_20040820', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}}}
2025-09-04 13:55:28,293 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-09-04 13:55:28,294 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-09-04 13:55:28,295 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-09-04 13:55:28,298 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-09-04 13:55:28,298 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'completed', 'message': 'Ссылки получены и сохранены', 'stage': 'completed'}
2025-09-04 13:55:32,664 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 13:55:32,665 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 13:55:32,666 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 13:56:06,441 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 13:56:06,442 - app.http.routes.analog - INFO - [analog.py:22 - reg()] - Request to get a link
2025-09-04 13:56:06,443 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 13:56:06,444 - app.http.routes.analog - DEBUG - [analog.py:24 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 13:56:06,445 - app.services.analog.table_generator - INFO - [table_generator.py:260 - generate_analogs_link_xlsx()] - Star generate_analogs_link_xlsx
2025-09-04 13:56:06,445 - app.services.analog.table_generator - INFO - [table_generator.py:45 - _generate_analogs_link()] - Start generate_analogs_link
2025-09-04 13:56:06,447 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 13:56:06,448 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 18:24:21,580 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 18:24:59,478 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 18:24:59,490 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-04 18:24:59,491 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 18:24:59,491 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 18:24:59,522 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 18:24:59,523 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 18:25:07,156 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 18:25:56,348 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 18:26:32,417 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 18:26:32,426 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-04 18:26:32,427 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 18:26:32,428 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 18:26:32,431 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 18:26:32,432 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 18:26:40,331 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 18:27:18,062 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 18:27:24,034 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 18:27:24,044 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-04 18:27:24,045 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 18:27:24,046 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 18:27:24,050 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 18:27:24,051 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 18:27:24,052 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 18:27:24,159 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 18:27:24,160 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 18:27:24,160 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 18:36:20,172 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 18:36:20,174 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 18:36:20,174 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 18:36:25,140 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 18:36:28,687 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 18:36:28,688 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 18:36:28,688 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 18:36:45,624 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 18:36:45,633 - app.http.routes.analog.creat - DEBUG - [creat.py:29 - create_patent_analog_link()] - type: link
2025-09-04 18:36:45,634 - app.http.routes.analog.creat - DEBUG - [creat.py:30 - create_patent_analog_link()] - request: <starlette.requests.Request object at 0x000002A00A228110>
2025-09-04 18:36:45,635 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-04 18:36:45,636 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 18:36:45,636 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 18:36:45,639 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 18:36:45,640 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 18:36:45,641 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 18:36:45,729 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 18:36:45,730 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-04 18:36:45,730 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 18:38:04,665 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 18:38:04,666 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 18:38:04,666 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 18:38:04,667 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 18:38:04,668 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 18:38:04,669 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 18:38:04,669 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 18:38:09,535 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 18:38:13,089 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 18:38:13,090 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 18:38:13,090 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 18:38:13,265 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 18:38:13,265 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-04 18:38:13,266 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 18:38:30,880 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 18:38:30,890 - app.http.routes.analog.creat - DEBUG - [creat.py:29 - create_patent_analog_link()] - type: link
2025-09-04 18:38:30,890 - app.http.routes.analog.creat - DEBUG - [creat.py:30 - create_patent_analog_link()] - request: None
2025-09-04 18:38:30,891 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-04 18:38:30,892 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 18:38:30,893 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 18:38:30,896 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 18:38:30,897 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-04 18:38:30,897 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 18:38:31,005 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 18:38:31,006 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 3 соединений
2025-09-04 18:38:31,007 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 18:41:12,571 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 18:41:12,572 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 18:41:12,573 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-04 18:41:12,574 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 18:41:12,575 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 18:41:12,576 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 18:41:12,576 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 18:41:12,577 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 18:41:12,578 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 18:41:12,579 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 18:41:12,580 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 18:41:27,507 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 18:41:27,508 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-04 18:41:27,509 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 18:41:36,315 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 18:41:36,316 - app.http.routes.analog.creat - DEBUG - [creat.py:29 - create_patent_analog_link()] - type: link
2025-09-04 18:41:36,317 - app.http.routes.analog.creat - DEBUG - [creat.py:30 - create_patent_analog_link()] - request: None
2025-09-04 18:41:36,318 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-04 18:41:36,319 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 18:41:36,319 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-04 18:41:36,423 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 18:41:36,424 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 18:41:36,424 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 18:46:06,424 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-04 18:46:06,426 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-04 18:46:06,426 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-04 18:46:13,872 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 18:46:14,793 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-04 18:46:14,794 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-04 18:46:14,794 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-04 18:46:29,198 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 23:58:51,096 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-04 23:59:57,375 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-04 23:59:57,406 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-04 23:59:57,406 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-04 23:59:57,407 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-04 23:59:57,431 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-04 23:59:57,432 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 00:00:30,269 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:00:30,271 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 00:00:30,272 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:00:30,273 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:00:30,407 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:00:30,408 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:00:30,409 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:11:19,158 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:11:19,159 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 00:11:19,183 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:11:24,232 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 00:11:27,710 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:11:27,711 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:11:27,711 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:11:52,204 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:11:52,213 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 00:11:52,214 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:11:52,215 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 00:11:52,218 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 00:11:52,219 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 00:11:52,220 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:11:52,355 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:11:52,356 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 00:11:52,356 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:20:31,330 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:20:31,331 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:20:31,331 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:20:31,332 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:20:31,333 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:20:31,334 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 00:20:31,334 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:20:36,207 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 00:20:40,051 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:20:40,052 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:20:40,052 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:20:56,151 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:20:56,160 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 00:20:56,161 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:20:56,162 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 00:20:56,165 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 00:20:56,166 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 00:20:56,166 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:20:56,168 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:20:56,168 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:42 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:20:56,169 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:53 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 00:20:56,275 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:20:56,276 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 00:20:56,276 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:21:54,274 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:21:54,275 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:21:54,276 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:21:54,276 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:21:54,277 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:21:54,278 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 00:21:54,279 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:21:59,083 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 00:22:02,821 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:22:02,822 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:22:02,822 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:22:11,601 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:22:11,611 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 00:22:11,612 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:22:11,612 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 00:22:11,615 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 00:22:11,616 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 00:22:11,617 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:22:11,618 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:22:11,619 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:42 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:22:11,620 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:53 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 00:22:11,727 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:22:11,728 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 00:22:11,728 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:22:50,221 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:22:50,221 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:22:50,222 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:22:50,223 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:22:50,224 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:22:50,224 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 00:22:50,225 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:22:55,867 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 00:22:58,667 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:22:58,668 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:22:58,669 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:23:08,869 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:23:08,879 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 00:23:08,880 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:23:08,880 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 00:23:08,884 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 00:23:08,885 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 00:23:08,885 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:23:08,887 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:23:08,887 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:42 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:23:08,888 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:53 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 00:23:09,004 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:23:09,004 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 00:23:09,005 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:31:53,110 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:31:53,111 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:31:53,111 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:31:53,112 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:31:53,113 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:31:53,114 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 00:31:53,114 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:31:58,173 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 00:32:01,489 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:32:01,490 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:32:01,490 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:32:19,979 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:32:19,989 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 00:32:19,990 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:32:19,991 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 00:32:19,994 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 00:32:19,995 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 00:32:19,996 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:32:19,997 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:32:19,997 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:32:19,998 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 00:32:19,999 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 00:32:19,999 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 00:32:20,004 - app.services.analog.raw_data_generator.link_generator - ERROR - [link_generator.py:63 - generate_data()] - Error in generate_analog_links: 'WsMessenger' object has no attribute 'handle_parser_message'
2025-09-05 00:32:20,017 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка генерации ссылок: 'WsMessenger' object has no attribute 'handle_parser_message'", 'stage': 'failed'}
2025-09-05 00:32:20,073 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:32:20,075 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 00:32:20,075 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:32:20,120 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:32:20,120 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:32:20,121 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:33:06,937 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:33:06,938 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 00:33:06,939 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:33:30,097 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:33:30,098 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 00:33:30,099 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:33:38,898 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:33:38,900 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 00:33:38,901 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:33:38,902 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:33:38,903 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:33:38,904 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:33:38,904 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 00:33:38,905 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 00:33:38,905 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:33:38,907 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:33:38,908 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 00:33:38,908 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 00:33:38,912 - app.services.analog.raw_data_generator.link_generator - ERROR - [link_generator.py:63 - generate_data()] - Error in generate_analog_links: 'WsMessenger' object has no attribute 'handle_parser_message'
2025-09-05 00:33:38,913 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка генерации ссылок: 'WsMessenger' object has no attribute 'handle_parser_message'", 'stage': 'failed'}
2025-09-05 00:33:38,914 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:33:38,915 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:33:38,915 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 00:33:39,155 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:33:39,155 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:33:39,156 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 00:33:39,157 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 2 сообщений
2025-09-05 00:33:39,157 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x00000257CAC73E30>, <core.connection_manager.BufferedMessage object at 0x00000257CAC0EE40>], maxlen=50)
2025-09-05 00:33:39,158 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (2 messages)
2025-09-05 00:33:39,159 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 2 messages for 1830913972
2025-09-05 00:33:39,159 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:37:15,744 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:37:15,745 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 00:37:15,745 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:37:26,711 - asyncio - ERROR - [base_events.py:1821 - default_exception_handler()] - Future exception was never retrieved
future: <Future finished exception=AttributeError("'WsMessenger' object has no attribute 'handle_parser_message'")>
Traceback (most recent call last):
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\app\services\analog\raw_data_generator\link_generator.py", line 40, in generate_data
    message_callback=self._ws_messenger.handle_parser_message,
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'WsMessenger' object has no attribute 'handle_parser_message'
2025-09-05 00:37:26,714 - asyncio - ERROR - [base_events.py:1821 - default_exception_handler()] - Future exception was never retrieved
future: <Future finished exception=AttributeError("'WsMessenger' object has no attribute 'handle_parser_message'")>
Traceback (most recent call last):
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\app\services\analog\raw_data_generator\link_generator.py", line 40, in generate_data
    message_callback=self._ws_messenger.handle_parser_message,
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'WsMessenger' object has no attribute 'handle_parser_message'
2025-09-05 00:37:33,416 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 00:37:52,485 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:37:52,495 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 00:37:52,496 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:37:52,496 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 00:37:52,500 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 00:37:52,501 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 00:38:00,432 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:38:00,433 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 00:38:00,435 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:38:00,435 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:38:00,436 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:38:00,437 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:38:00,438 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 00:38:00,438 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 00:38:00,439 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:38:00,440 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:38:00,441 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 00:38:00,441 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 00:38:00,446 - app.services.analog.raw_data_generator.link_generator - ERROR - [link_generator.py:63 - generate_data()] - Error in generate_analog_links: 'WsMessenger' object has no attribute 'handle_parser_message'
2025-09-05 00:38:00,448 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка генерации ссылок: 'WsMessenger' object has no attribute 'handle_parser_message'", 'stage': 'failed'}
2025-09-05 00:38:00,448 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:38:00,449 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:38:00,450 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 00:38:00,538 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:38:00,538 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:38:00,539 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 00:38:00,539 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 2 сообщений
2025-09-05 00:38:00,540 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x00000260B90F5F40>, <core.connection_manager.BufferedMessage object at 0x00000260B908DF40>], maxlen=50)
2025-09-05 00:38:00,541 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (2 messages)
2025-09-05 00:38:00,542 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 2 messages for 1830913972
2025-09-05 00:38:00,543 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:38:00,544 - asyncio - ERROR - [base_events.py:1821 - default_exception_handler()] - Future exception was never retrieved
future: <Future finished exception=AttributeError("'WsMessenger' object has no attribute 'handle_parser_message'")>
Traceback (most recent call last):
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\app\services\analog\raw_data_generator\link_generator.py", line 40, in generate_data
    message_callback=self._ws_messenger.handle_parser_message,
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'WsMessenger' object has no attribute 'handle_parser_message'
2025-09-05 00:41:41,495 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:41:41,497 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 00:41:41,498 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:41:41,498 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:41:41,500 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:41:41,500 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:41:41,501 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 00:41:41,502 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 00:41:41,502 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 00:41:41,506 - app.services.analog.raw_data_generator.link_generator - ERROR - [link_generator.py:63 - generate_data()] - Error in generate_analog_links: 'WsMessenger' object has no attribute 'handle_parser_message'
2025-09-05 00:41:41,507 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка генерации ссылок: 'WsMessenger' object has no attribute 'handle_parser_message'", 'stage': 'failed'}
2025-09-05 00:41:41,660 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:41:41,661 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 00:41:41,661 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:42:25,562 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 00:42:34,005 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:42:34,015 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 00:42:34,016 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:42:34,016 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 00:42:34,019 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 00:42:34,020 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 00:42:40,909 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:42:40,910 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 00:42:40,911 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:42:40,912 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:42:40,913 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:42:40,914 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:42:40,914 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 00:42:40,915 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 00:42:40,916 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:42:40,917 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:42:40,918 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 00:42:40,918 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 00:42:40,922 - app.services.analog.raw_data_generator.link_generator - ERROR - [link_generator.py:63 - generate_data()] - Error in generate_analog_links: 'WsMessenger' object has no attribute 'handle_parser_message'
2025-09-05 00:42:40,924 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка генерации ссылок: 'WsMessenger' object has no attribute 'handle_parser_message'", 'stage': 'failed'}
2025-09-05 00:42:40,925 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:42:40,926 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:42:40,926 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 00:42:41,056 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:42:41,057 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:42:41,057 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 00:42:41,058 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 2 сообщений
2025-09-05 00:42:41,059 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000001ABFDBE35C0>, <core.connection_manager.BufferedMessage object at 0x000001ABFD910E30>], maxlen=50)
2025-09-05 00:42:41,059 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (2 messages)
2025-09-05 00:42:41,061 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 2 messages for 1830913972
2025-09-05 00:42:41,061 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:42:41,062 - asyncio - ERROR - [base_events.py:1821 - default_exception_handler()] - Future exception was never retrieved
future: <Future finished exception=AttributeError("'WsMessenger' object has no attribute 'handle_parser_message'")>
Traceback (most recent call last):
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\app\services\analog\raw_data_generator\link_generator.py", line 40, in generate_data
    message_callback=self._ws_messenger.handle_parser_message,
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'WsMessenger' object has no attribute 'handle_parser_message'
2025-09-05 00:46:12,551 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:46:12,552 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 00:46:12,553 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:46:18,468 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 00:46:20,926 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:46:20,927 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:46:20,927 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:46:26,116 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:46:26,117 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 00:46:26,117 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:46:42,008 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:46:42,017 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 00:46:42,018 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:46:42,019 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 00:46:42,022 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 00:46:42,023 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 00:46:50,415 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:46:50,416 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 00:46:50,417 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:46:50,418 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:46:50,419 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:46:50,420 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:46:50,420 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 00:46:50,421 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 00:46:50,421 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:46:50,423 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:46:50,423 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 00:46:50,424 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 00:46:50,427 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 00:46:50,440 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 00:46:50,441 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 00:46:50,442 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 5, 'stage': 'initialization'}
2025-09-05 00:46:50,442 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:46:50,443 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:46:50,444 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 00:46:50,444 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Ошибка при парсинге: name 'chat_id' is not defined
2025-09-05 00:46:50,464 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: name 'logger' is not defined
2025-09-05 00:46:50,465 - app.services.analog.raw_data_generator.link_generator - ERROR - [link_generator.py:63 - generate_data()] - Error in generate_analog_links: name 'logger' is not defined
2025-09-05 00:46:50,466 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка генерации ссылок: name 'logger' is not defined", 'stage': 'failed'}
2025-09-05 00:46:50,467 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:46:50,468 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:46:50,468 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-05 00:46:50,504 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:46:50,504 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:46:50,505 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 00:46:50,506 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 3 сообщений
2025-09-05 00:46:50,506 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x00000236B7F87A40>, <core.connection_manager.BufferedMessage object at 0x00000236B84FDDC0>, <core.connection_manager.BufferedMessage object at 0x00000236B7F91E20>], maxlen=50)
2025-09-05 00:46:50,507 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (3 messages)
2025-09-05 00:46:50,508 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 3 messages for 1830913972
2025-09-05 00:46:50,508 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:49:49,929 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 00:49:57,359 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:49:57,368 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 00:49:57,368 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:49:57,369 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 00:49:57,373 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 00:49:57,374 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 00:50:06,839 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:50:06,841 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 00:50:06,842 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:50:06,842 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:50:06,844 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:50:06,845 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:50:06,845 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 00:50:06,846 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 00:50:06,847 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:50:06,848 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:50:06,848 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 00:50:06,849 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 00:50:06,854 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 00:50:06,866 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 00:50:06,867 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 00:50:06,867 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 5, 'stage': 'initialization'}
2025-09-05 00:50:06,868 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:50:06,869 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:50:06,870 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 00:50:06,870 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Ошибка при парсинге: name 'chat_id' is not defined
2025-09-05 00:50:06,871 - core.ws_messenger - ERROR - [ws_messenger.py:62 - handle_message()] - Error in handle_parser_message: 'WsMessenger' object has no attribute '_result_future'
2025-09-05 00:50:06,872 - app.clients.ws_client - ERROR - [ws_client.py:82 - _connect_and_listen()] - WebSocket error: 'WsMessenger' object has no attribute '_result_future'
2025-09-05 00:50:06,873 - core.ws_messenger - ERROR - [ws_messenger.py:62 - handle_message()] - Error in handle_parser_message: 'WsMessenger' object has no attribute '_result_future'
2025-09-05 00:50:06,874 - app.services.analog.raw_data_generator.link_generator - ERROR - [link_generator.py:63 - generate_data()] - Error in generate_analog_links: 'WsMessenger' object has no attribute '_result_future'
2025-09-05 00:50:06,875 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка генерации ссылок: 'WsMessenger' object has no attribute '_result_future'", 'stage': 'failed'}
2025-09-05 00:50:06,876 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:50:06,877 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:50:06,877 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-05 00:50:06,928 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:50:06,928 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:50:06,929 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 00:50:06,929 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 3 сообщений
2025-09-05 00:50:06,930 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x00000213EADC26F0>, <core.connection_manager.BufferedMessage object at 0x00000213EAAE6750>, <core.connection_manager.BufferedMessage object at 0x00000213EAAF0830>], maxlen=50)
2025-09-05 00:50:06,931 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (3 messages)
2025-09-05 00:50:06,931 - asyncio - ERROR - [base_events.py:1821 - default_exception_handler()] - Future exception was never retrieved
future: <Future finished exception=AttributeError("'WsMessenger' object has no attribute '_result_future'")>
Traceback (most recent call last):
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\core\ws_messenger.py", line 56, in handle_message
    if self._result_future and not self._result_future.done():
       ^^^^^^^^^^^^^^^^^^^
AttributeError: 'WsMessenger' object has no attribute '_result_future'. Did you mean: 'result_future'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\app\clients\ws_client.py", line 53, in _connect_and_listen
    callback_status = await message_callback(data)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\core\ws_messenger.py", line 63, in handle_message
    if self._result_future and not self._result_future.done():
       ^^^^^^^^^^^^^^^^^^^
AttributeError: 'WsMessenger' object has no attribute '_result_future'. Did you mean: 'result_future'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\core\ws_messenger.py", line 56, in handle_message
    if self._result_future and not self._result_future.done():
       ^^^^^^^^^^^^^^^^^^^
AttributeError: 'WsMessenger' object has no attribute '_result_future'. Did you mean: 'result_future'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\app\services\analog\raw_data_generator\link_generator.py", line 38, in generate_data
    await ws_client.connect_with_retry(
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\app\clients\ws_client.py", line 120, in connect_with_retry
    await self._connect_and_listen(ws_url, message_callback, chat_id, **kwargs)
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\app\clients\ws_client.py", line 83, in _connect_and_listen
    await message_callback({
  File "D:\ART\PY\bot\AI-assistant-for-patents-telegram-app\services\patent_service\core\ws_messenger.py", line 63, in handle_message
    if self._result_future and not self._result_future.done():
       ^^^^^^^^^^^^^^^^^^^
AttributeError: 'WsMessenger' object has no attribute '_result_future'. Did you mean: 'result_future'?
2025-09-05 00:50:06,970 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 3 messages for 1830913972
2025-09-05 00:50:06,971 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:52:11,024 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:52:11,025 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 00:52:11,026 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:52:16,622 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 00:52:19,331 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:52:19,332 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:52:19,332 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 00:52:25,022 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 00:52:25,023 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 00:52:25,023 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 00:52:38,375 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:52:38,384 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 00:52:38,385 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:52:38,386 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 00:52:38,389 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 00:52:38,390 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 00:52:46,175 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 00:52:46,177 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 00:52:46,178 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:52:46,178 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:52:46,180 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 00:52:46,180 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 00:52:46,181 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 00:52:46,182 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 00:52:46,182 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:52:46,183 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:52:46,184 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 00:52:46,184 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 00:52:46,188 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 00:52:46,201 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 00:52:46,202 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 00:52:46,202 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 5, 'stage': 'initialization'}
2025-09-05 00:52:46,203 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:52:46,204 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:52:46,204 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 00:52:46,205 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Ошибка при парсинге: name 'chat_id' is not defined
2025-09-05 00:52:46,206 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка при парсинге: name 'chat_id' is not defined", 'stage': 'failed'}
2025-09-05 00:52:46,206 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 00:52:46,207 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 00:52:46,208 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-05 00:52:46,267 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 00:52:46,268 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 00:52:46,268 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 00:52:46,269 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 3 сообщений
2025-09-05 00:52:46,270 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x0000021FFFA4E480>, <core.connection_manager.BufferedMessage object at 0x0000021FAF9AD100>, <core.connection_manager.BufferedMessage object at 0x0000021FAFB60FB0>], maxlen=50)
2025-09-05 00:52:46,270 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (3 messages)
2025-09-05 00:52:46,271 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 3 messages for 1830913972
2025-09-05 00:52:46,272 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 01:13:01,714 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 01:13:12,960 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:13:12,970 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 01:13:12,971 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:13:12,971 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 01:13:12,975 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 01:13:12,975 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 01:13:21,594 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:13:21,595 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 01:13:21,596 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:13:21,597 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 01:13:21,598 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:13:21,599 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 01:13:21,600 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 01:13:21,600 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 01:13:21,601 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:13:21,602 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:13:21,603 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 01:13:21,603 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 01:13:21,607 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 01:13:21,621 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 01:13:21,621 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 01:13:21,622 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 5, 'stage': 'initialization'}
2025-09-05 01:13:21,623 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:13:21,624 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:13:21,624 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 01:13:21,625 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Ошибка при парсинге: 'ParserService' object has no attribute 'chat_id'
2025-09-05 01:13:21,626 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка при парсинге: 'ParserService' object has no attribute 'chat_id'", 'stage': 'failed'}
2025-09-05 01:13:21,626 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:13:21,627 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:13:21,628 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-05 01:13:21,704 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 01:13:21,705 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 01:13:21,706 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 01:13:21,706 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 3 сообщений
2025-09-05 01:13:21,707 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x0000022447D10830>, <core.connection_manager.BufferedMessage object at 0x0000022447D18D40>, <core.connection_manager.BufferedMessage object at 0x0000022447D05700>], maxlen=50)
2025-09-05 01:13:21,707 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (3 messages)
2025-09-05 01:13:21,709 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 3 messages for 1830913972
2025-09-05 01:13:21,710 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 01:15:01,905 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 01:15:21,040 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:15:21,050 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 01:15:21,051 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:15:21,052 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 01:15:21,055 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 01:15:21,056 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 01:15:30,256 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:15:30,258 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 01:15:30,259 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:15:30,259 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 01:15:30,260 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:15:30,261 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 01:15:30,262 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 01:15:30,262 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 01:15:30,263 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:15:30,264 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:15:30,265 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 01:15:30,265 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 01:15:30,269 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 01:15:30,281 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 01:15:30,282 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 01:15:30,283 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 5, 'stage': 'initialization'}
2025-09-05 01:15:30,283 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:15:30,284 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:15:30,285 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 01:15:30,285 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Ошибка при парсинге: 'ParserService' object has no attribute 'send_progress'
2025-09-05 01:15:30,286 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка при парсинге: 'ParserService' object has no attribute 'send_progress'", 'stage': 'failed'}
2025-09-05 01:15:30,287 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:15:30,288 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:15:30,288 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-05 01:15:30,351 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 01:15:30,352 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 01:15:30,353 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 01:15:30,353 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 3 сообщений
2025-09-05 01:15:30,354 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x00000192A6301CA0>, <core.connection_manager.BufferedMessage object at 0x00000192D4DAF230>, <core.connection_manager.BufferedMessage object at 0x00000192D4D97A40>], maxlen=50)
2025-09-05 01:15:30,354 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (3 messages)
2025-09-05 01:15:30,356 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 3 messages for 1830913972
2025-09-05 01:15:30,356 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 01:17:19,234 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 01:17:34,119 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:17:34,129 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 01:17:34,130 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:17:34,130 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 01:17:34,134 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 01:17:34,134 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 01:17:44,952 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:17:44,954 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 01:17:44,954 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:17:44,955 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 01:17:44,956 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:17:44,957 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 01:17:44,958 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 01:17:44,958 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 01:17:44,959 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:17:44,960 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:17:44,961 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 01:17:44,961 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 01:17:44,965 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 01:17:44,989 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 01:17:44,989 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 01:17:44,990 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 5, 'stage': 'initialization'}
2025-09-05 01:17:44,991 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:17:44,992 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:17:44,992 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 01:17:44,993 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга
2025-09-05 01:17:44,994 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Начало парсинга', 'progress': 10, 'stage': 'initialization'}
2025-09-05 01:17:44,994 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:17:44,995 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:17:44,996 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-05 01:17:44,996 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Формирование запроса
2025-09-05 01:17:44,997 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Формирование запроса', 'progress': 20, 'stage': 'request_formation'}
2025-09-05 01:17:44,997 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:17:44,998 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:17:44,999 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-05 01:17:45,000 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Подготовка заголовков
2025-09-05 01:17:45,000 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Подготовка заголовков', 'progress': 30, 'stage': 'preparation'}
2025-09-05 01:17:45,001 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:17:45,002 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:17:45,002 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-05 01:17:45,003 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Отправка запроса к API
2025-09-05 01:17:45,003 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Отправка запроса к API', 'progress': 40, 'stage': 'sending_request'}
2025-09-05 01:17:45,004 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:17:45,005 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:17:45,005 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-05 01:17:45,092 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 01:17:45,093 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 01:17:45,093 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 01:17:45,094 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 6 сообщений
2025-09-05 01:17:45,095 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000002685EBC6660>, <core.connection_manager.BufferedMessage object at 0x000002685EEF1CA0>, <core.connection_manager.BufferedMessage object at 0x0000026860691F70>, <core.connection_manager.BufferedMessage object at 0x000002687EAB6CF0>, <core.connection_manager.BufferedMessage object at 0x000002687EAB75F0>, <core.connection_manager.BufferedMessage object at 0x000002687EAE2390>], maxlen=50)
2025-09-05 01:17:45,095 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (6 messages)
2025-09-05 01:17:45,097 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 6 messages for 1830913972
2025-09-05 01:17:45,097 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 01:17:46,335 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка ответа
2025-09-05 01:17:46,336 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка ответа', 'progress': 60, 'stage': 'processing_response'}
2025-09-05 01:17:46,337 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Извлечение данных
2025-09-05 01:17:46,337 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Извлечение данных', 'progress': 80, 'stage': 'extracting_data'}
2025-09-05 01:17:46,339 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Завершение обработки
2025-09-05 01:17:46,340 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Завершение обработки', 'progress': 90, 'stage': 'finalizing'}
2025-09-05 01:17:46,342 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: {'RU2427295C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2427295C2_20110827', 'title': 'СПОСОБ И СИСТЕМА ДЛЯ ЗАЩИТЫ ЧАСТИ ТЕЛА'}, 'RU2284630C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2284630C2_20060927', 'title': '<em>ЭЛЕКТРИЧЕСКИЙ</em> <em>ГЕНЕРАТОР</em>'}, 'RU2000122775A': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2000122775A_20021110', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}, 'RU160935U1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU160935U1_20160410', 'title': 'ОПТИЧЕСКИЙ ИЗВЕЩАТЕЛЬ'}, 'RU2234437C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2234437C2_20040820', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}}
2025-09-05 01:17:46,343 - core.ws_messenger - DEBUG - [ws_messenger.py:47 - handle_message()] - Completed message received: {'status': 'completed', 'message': {'RU2427295C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2427295C2_20110827', 'title': 'СПОСОБ И СИСТЕМА ДЛЯ ЗАЩИТЫ ЧАСТИ ТЕЛА'}, 'RU2284630C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2284630C2_20060927', 'title': '<em>ЭЛЕКТРИЧЕСКИЙ</em> <em>ГЕНЕРАТОР</em>'}, 'RU2000122775A': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2000122775A_20021110', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}, 'RU160935U1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU160935U1_20160410', 'title': 'ОПТИЧЕСКИЙ ИЗВЕЩАТЕЛЬ'}, 'RU2234437C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2234437C2_20040820', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}}, 'stage': 'completed'}
2025-09-05 01:32:02,674 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 01:32:02,675 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 01:32:02,676 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 01:32:11,495 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 01:32:11,721 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 01:32:11,721 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 01:32:11,722 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 01:32:31,407 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:32:31,417 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 01:32:31,418 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:32:31,419 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 01:32:31,422 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 01:32:31,423 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 01:32:31,424 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 01:32:31,425 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:32:31,426 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 01:32:31,426 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 01:32:31,427 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 01:32:31,428 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 01:32:31,431 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 01:32:31,452 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 01:32:31,453 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 01:32:31,453 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 5, 'stage': 'initialization'}
2025-09-05 01:32:31,455 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга
2025-09-05 01:32:31,455 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Начало парсинга', 'progress': 10, 'stage': 'initialization'}
2025-09-05 01:32:31,456 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Формирование запроса
2025-09-05 01:32:31,456 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Формирование запроса', 'progress': 20, 'stage': 'request_formation'}
2025-09-05 01:32:31,457 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Подготовка заголовков
2025-09-05 01:32:31,458 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Подготовка заголовков', 'progress': 30, 'stage': 'preparation'}
2025-09-05 01:32:31,459 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Отправка запроса к API
2025-09-05 01:32:31,459 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Отправка запроса к API', 'progress': 40, 'stage': 'sending_request'}
2025-09-05 01:32:31,519 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 01:32:31,520 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 01:32:31,521 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 01:32:31,631 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 01:32:31,632 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 01:32:31,633 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 01:32:31,633 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 01:32:32,757 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка ответа
2025-09-05 01:32:32,758 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка ответа', 'progress': 60, 'stage': 'processing_response'}
2025-09-05 01:32:32,759 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Извлечение данных
2025-09-05 01:32:32,759 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Извлечение данных', 'progress': 80, 'stage': 'extracting_data'}
2025-09-05 01:32:32,762 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Завершение обработки
2025-09-05 01:32:32,762 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Завершение обработки', 'progress': 90, 'stage': 'finalizing'}
2025-09-05 01:32:32,764 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: {'RU2427295C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2427295C2_20110827', 'title': 'СПОСОБ И СИСТЕМА ДЛЯ ЗАЩИТЫ ЧАСТИ ТЕЛА'}, 'RU2284630C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2284630C2_20060927', 'title': '<em>ЭЛЕКТРИЧЕСКИЙ</em> <em>ГЕНЕРАТОР</em>'}, 'RU2000122775A': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2000122775A_20021110', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}, 'RU160935U1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU160935U1_20160410', 'title': 'ОПТИЧЕСКИЙ ИЗВЕЩАТЕЛЬ'}, 'RU2234437C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2234437C2_20040820', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}}
2025-09-05 01:32:32,765 - core.ws_messenger - DEBUG - [ws_messenger.py:47 - handle_message()] - Completed message received: {'status': 'completed', 'message': {'RU2427295C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2427295C2_20110827', 'title': 'СПОСОБ И СИСТЕМА ДЛЯ ЗАЩИТЫ ЧАСТИ ТЕЛА'}, 'RU2284630C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2284630C2_20060927', 'title': '<em>ЭЛЕКТРИЧЕСКИЙ</em> <em>ГЕНЕРАТОР</em>'}, 'RU2000122775A': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2000122775A_20021110', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}, 'RU160935U1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU160935U1_20160410', 'title': 'ОПТИЧЕСКИЙ ИЗВЕЩАТЕЛЬ'}, 'RU2234437C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2234437C2_20040820', 'title': '<em>ГЕНЕРАТОР</em> <em>ЭЛЕКТРИЧЕСКОГО</em> ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ'}}, 'stage': 'completed'}
2025-09-05 01:32:32,766 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-09-05 01:32:32,766 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-09-05 01:32:32,783 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-09-05 01:32:32,785 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-09-05 01:32:32,785 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'completed', 'message': 'Ссылки на аналоги получены и сохранены', 'stage': 'completed'}
2025-09-05 01:32:34,625 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 01:32:34,626 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 01:32:34,627 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 01:48:11,124 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:48:11,125 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 01:48:11,126 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:49:21,433 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:49:21,435 - app.http.routes.patent - DEBUG - [patent.py:26 - create_patent()] - Request to add a patent
2025-09-05 01:49:21,435 - app.services.patent.patent - DEBUG - [patent.py:29 - create_patent()] - Start patent creation
2025-09-05 01:49:21,436 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 01:49:21,438 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 01:49:21,438 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-09-05 01:49:21,439 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-09-05 01:49:21,440 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-09-05 01:49:21,442 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-09-05 01:49:21,442 - app.services.patent.patent - DEBUG - [patent.py:156 - _cache_patent()] - Patent cached successfully
2025-09-05 01:49:21,443 - app.services.patent.patent - DEBUG - [patent.py:43 - create_patent()] - Patent created and cached successfully
2025-09-05 01:49:33,698 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:49:33,700 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 01:49:33,701 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:49:33,701 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': '', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-05 01:49:33,703 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:49:33,703 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': '', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-05 01:49:33,704 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': '', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}
2025-09-05 01:49:33,705 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 01:49:33,705 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:49:33,706 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:49:33,707 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 01:49:33,708 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 01:49:33,711 - app.clients.parser_client - ERROR - [parser_client.py:53 - _request_ws()] - Request error: 400, {"error":"Missing required fields"}
2025-09-05 01:49:33,712 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': 'Error connecting to parser', 'stage': 'failed'}
2025-09-05 01:49:33,713 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 01:49:33,714 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 01:49:33,715 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 01:49:33,797 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 01:49:33,797 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 01:49:33,798 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 01:49:33,798 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 2 сообщений
2025-09-05 01:49:33,799 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000001ACCD800230>, <core.connection_manager.BufferedMessage object at 0x000001ACCD264380>], maxlen=50)
2025-09-05 01:49:33,800 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (2 messages)
2025-09-05 01:49:33,801 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 2 messages for 1830913972
2025-09-05 01:49:33,801 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 01:55:14,134 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:55:14,137 - app.http.routes.patent - DEBUG - [patent.py:71 - put_patent()] - Request to put a patent
2025-09-05 01:55:14,137 - app.http.routes.patent - INFO - [patent.py:141 - create_upidp()] - Request to receive analogues
2025-09-05 01:55:14,138 - app.services.patent.patent - DEBUG - [patent.py:104 - put_patent()] - Start patent update
2025-09-05 01:55:14,139 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 01:55:14,141 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 01:55:14,142 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-09-05 01:55:14,142 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-09-05 01:55:14,143 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-09-05 01:55:14,145 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-09-05 01:55:14,145 - app.services.patent.patent - DEBUG - [patent.py:122 - put_patent()] - Patent update successful and cache updated
2025-09-05 01:55:21,201 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:55:21,203 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 01:55:21,204 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:55:21,204 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-05 01:55:21,206 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:55:21,206 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-05 01:55:21,207 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}
2025-09-05 01:55:21,208 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Инициализация...', 'progress': 10, 'stage': 'initialization'}
2025-09-05 01:55:21,208 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 01:55:21,212 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 01:55:21,233 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 01:55:21,234 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 01:55:21,234 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 5, 'stage': 'initialization'}
2025-09-05 01:55:21,235 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга
2025-09-05 01:55:21,236 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Начало парсинга', 'progress': 10, 'stage': 'initialization'}
2025-09-05 01:55:21,237 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Формирование запроса
2025-09-05 01:55:21,237 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Формирование запроса', 'progress': 20, 'stage': 'request_formation'}
2025-09-05 01:55:21,238 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Подготовка заголовков
2025-09-05 01:55:21,238 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Подготовка заголовков', 'progress': 30, 'stage': 'preparation'}
2025-09-05 01:55:21,239 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Отправка запроса к API
2025-09-05 01:55:21,240 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Отправка запроса к API', 'progress': 40, 'stage': 'sending_request'}
2025-09-05 01:55:21,297 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 01:55:21,298 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 01:55:21,298 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 01:55:23,071 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка ответа
2025-09-05 01:55:23,071 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка ответа', 'progress': 60, 'stage': 'processing_response'}
2025-09-05 01:55:23,072 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Извлечение данных
2025-09-05 01:55:23,073 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Извлечение данных', 'progress': 80, 'stage': 'extracting_data'}
2025-09-05 01:55:23,075 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Завершение обработки
2025-09-05 01:55:23,076 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Завершение обработки', 'progress': 90, 'stage': 'finalizing'}
2025-09-05 01:55:23,077 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: {'RU2268840C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2268840C2_20060127', 'title': 'МОРСКОЙ АВТОНОМНЫЙ КОМПЛЕКС (МАК)'}, 'RU2239027C1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2239027C1_20041027', 'title': 'ТРАНШЕЕКОПАТЕЛЬ'}, 'RU2006671C1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2006671C1_19940130', 'title': 'СПОСОБ ПОЛУЧЕНИЯ ЭЛЕКТРИЧЕСКОЙ ЭНЕРГИИ И УСТРОЙСТВО ДЛЯ ЕГО ОСУЩЕСТВЛЕНИЯ'}, 'RU195243U1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU195243U1_20200120', 'title': '<em>Катамаран</em>-<em>экскаватор</em>'}, 'RU2654879C1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2654879C1_20180523', 'title': 'ДИРИЖАБЛЬ И СПОСОБ ЕГО ПРИЧАЛИВАНИЯ'}, 'SU335192A1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/SU335192A1_19720411', 'title': 'Устройство для подъема затонувшей древесины'}}
2025-09-05 01:55:23,078 - core.ws_messenger - DEBUG - [ws_messenger.py:47 - handle_message()] - Completed message received: {'status': 'completed', 'message': {'RU2268840C2': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2268840C2_20060127', 'title': 'МОРСКОЙ АВТОНОМНЫЙ КОМПЛЕКС (МАК)'}, 'RU2239027C1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2239027C1_20041027', 'title': 'ТРАНШЕЕКОПАТЕЛЬ'}, 'RU2006671C1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2006671C1_19940130', 'title': 'СПОСОБ ПОЛУЧЕНИЯ ЭЛЕКТРИЧЕСКОЙ ЭНЕРГИИ И УСТРОЙСТВО ДЛЯ ЕГО ОСУЩЕСТВЛЕНИЯ'}, 'RU195243U1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU195243U1_20200120', 'title': '<em>Катамаран</em>-<em>экскаватор</em>'}, 'RU2654879C1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/RU2654879C1_20180523', 'title': 'ДИРИЖАБЛЬ И СПОСОБ ЕГО ПРИЧАЛИВАНИЯ'}, 'SU335192A1': {'url': 'https://searchplatform.rospatent.gov.ru/patsearch/v0.2/docs/SU335192A1_19720411', 'title': 'Устройство для подъема затонувшей древесины'}}, 'stage': 'completed'}
2025-09-05 01:55:23,079 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-09-05 01:55:23,080 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-09-05 01:55:23,082 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-09-05 01:55:23,084 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-09-05 01:55:23,084 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'completed', 'message': 'Ссылки на аналоги получены и сохранены', 'stage': 'completed'}
2025-09-05 01:55:24,984 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 01:55:24,986 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 01:55:24,986 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 01:55:24,987 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 01:55:26,955 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 01:55:26,956 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 01:55:26,956 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 01:55:32,905 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:55:32,907 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to get analog_link
2025-09-05 01:55:32,908 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:55:32,908 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-05 01:55:32,909 - app.services.analog.table_generator - INFO - [table_generator.py:259 - generate_analogs_link_xlsx()] - Star generate_analogs_link_xlsx
2025-09-05 01:55:32,910 - app.services.analog.table_generator - INFO - [table_generator.py:44 - _generate_analogs_link()] - Start generate_analogs_link
2025-09-05 01:55:32,911 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 01:55:32,913 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 01:55:38,119 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:55:38,121 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to get analog_link
2025-09-05 01:55:38,122 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:55:38,122 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-05 01:55:38,123 - app.services.analog.table_generator - INFO - [table_generator.py:250 - generate_analogs_link_csv()] - Star generate_analogs_csv
2025-09-05 01:55:38,124 - app.services.analog.table_generator - INFO - [table_generator.py:44 - _generate_analogs_link()] - Start generate_analogs_link
2025-09-05 01:55:38,125 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 01:55:38,127 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 01:55:57,090 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:55:57,092 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 01:55:57,093 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:55:57,093 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-05 01:55:57,094 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:55:57,095 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}}
2025-09-05 01:55:57,096 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': '', 'construction': '', 'operation_principle': '', 'technical_area': '', 'technical_result': ''}
2025-09-05 01:55:57,183 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 01:55:57,183 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 01:55:57,184 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 01:57:24,278 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 01:57:24,279 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 01:57:24,279 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 01:57:31,079 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 01:57:32,672 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 01:57:32,673 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 01:57:32,673 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 01:58:16,447 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 01:58:16,457 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 01:58:16,458 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:58:16,458 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 01:58:16,461 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 01:58:16,462 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 01:58:16,463 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 01:58:16,464 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 01:58:16,465 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 01:58:16,466 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 01:58:16,574 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 01:58:16,574 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 01:58:16,575 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:01:48,875 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:01:48,876 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:01:48,876 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:01:48,877 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:01:48,878 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:01:48,879 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 02:01:48,879 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:01:54,358 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 02:01:57,292 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:01:57,293 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:01:57,294 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:01:57,353 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:01:57,354 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 02:01:57,354 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:02:10,956 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:02:10,966 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 02:02:10,967 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:02:10,967 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:02:10,971 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:02:10,972 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 02:02:10,972 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:02:10,974 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:02:10,974 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:02:10,975 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 02:02:10,976 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Загрузка данных аналогов из базы', 'progress': 10, 'stage': 'loading_analog_data'}
2025-09-05 02:02:10,980 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:02:10,982 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:02:10,983 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка данных аналогов', 'progress': 30, 'stage': 'processing_analog_data'}
2025-09-05 02:02:10,984 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка при генерации данных аналогов: 'AbstractClaimsGenerator' object has no attribute '_send_websocket_update'", 'stage': 'failed'}
2025-09-05 02:02:10,984 - app.services.analog.raw_data_generator.abstract_claims_generator - ERROR - [abstract_claims_generator.py:97 - generate_data()] - Error in _generate_analog_data: 'AbstractClaimsGenerator' object has no attribute '_send_websocket_update'
2025-09-05 02:02:11,066 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:02:11,066 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 3 соединений
2025-09-05 02:02:11,067 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:02:51,800 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:02:51,801 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:02:51,801 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 02:02:51,802 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:02:51,803 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:02:51,804 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:02:51,804 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:02:51,805 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:02:51,806 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:02:51,807 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 02:02:51,807 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:03:02,136 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 02:03:02,417 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:03:02,418 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:03:02,418 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:03:02,420 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:03:02,421 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 02:03:02,422 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:03:08,910 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:03:08,910 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 3 соединений
2025-09-05 02:03:08,911 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:03:21,505 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:03:21,515 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 02:03:21,516 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:03:21,516 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:03:21,520 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:03:21,521 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 02:03:21,521 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:03:21,522 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:03:21,523 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:03:21,524 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 02:03:21,524 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Загрузка данных аналогов из базы', 'progress': 10, 'stage': 'loading_analog_data'}
2025-09-05 02:03:21,526 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:03:21,527 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:03:21,528 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка данных аналогов', 'progress': 30, 'stage': 'processing_analog_data'}
2025-09-05 02:03:21,529 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Генерация финальных данных аналогов', 'progress': 50, 'stage': 'generating_analog_data'}
2025-09-05 02:03:21,530 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка при генерации данных аналогов: ParserClient.generate_analog_abstract_claims() got an unexpected keyword argument 'chat_id'", 'stage': 'failed'}
2025-09-05 02:03:21,530 - app.services.analog.raw_data_generator.abstract_claims_generator - ERROR - [abstract_claims_generator.py:97 - generate_data()] - Error in _generate_analog_data: ParserClient.generate_analog_abstract_claims() got an unexpected keyword argument 'chat_id'
2025-09-05 02:03:21,604 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:03:21,605 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 4 соединений
2025-09-05 02:03:21,605 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:06:09,287 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:06:09,288 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:06:09,289 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 3 соединений
2025-09-05 02:06:09,289 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:06:09,290 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:06:09,291 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:06:09,292 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 02:06:09,292 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:06:09,293 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:06:09,294 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:06:09,295 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:06:09,295 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:06:09,296 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:06:09,297 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 02:06:09,298 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:06:15,891 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 02:06:17,640 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:06:17,641 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:06:17,641 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:06:17,779 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:06:17,780 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 02:06:17,781 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:06:17,783 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:06:17,783 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 3 соединений
2025-09-05 02:06:17,784 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:06:17,887 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:06:17,887 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 4 соединений
2025-09-05 02:06:17,888 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:06:33,748 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:06:33,758 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 02:06:33,759 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:06:33,760 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:06:33,763 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:06:33,764 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 02:06:33,764 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:06:33,765 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:06:33,766 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:06:33,767 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 02:06:33,767 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Загрузка данных аналогов из базы', 'progress': 10, 'stage': 'loading_analog_data'}
2025-09-05 02:06:33,769 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:06:33,770 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:06:33,771 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка данных аналогов', 'progress': 30, 'stage': 'processing_analog_data'}
2025-09-05 02:06:33,772 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Генерация финальных данных аналогов', 'progress': 50, 'stage': 'generating_analog_data'}
2025-09-05 02:06:33,773 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 02:06:33,777 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка при генерации данных аналогов: 'WsMessenger' object has no attribute 'handle_parser_message'", 'stage': 'failed'}
2025-09-05 02:06:33,778 - app.services.analog.raw_data_generator.abstract_claims_generator - ERROR - [abstract_claims_generator.py:97 - generate_data()] - Error in _generate_analog_data: 'WsMessenger' object has no attribute 'handle_parser_message'
2025-09-05 02:06:33,883 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:06:33,884 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 5 соединений
2025-09-05 02:06:33,884 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:06:54,310 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:06:54,311 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:06:54,312 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 4 соединений
2025-09-05 02:06:54,312 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:06:54,313 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:06:54,314 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:06:54,315 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 3 соединений
2025-09-05 02:06:54,315 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:06:54,316 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:06:54,317 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:06:54,318 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 02:06:54,318 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:06:54,319 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:06:54,320 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:06:54,321 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:06:54,321 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:06:54,322 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:06:54,323 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 02:06:54,324 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:07:00,807 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 02:07:02,715 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:07:02,716 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:07:02,716 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:07:02,855 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:07:02,855 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 02:07:02,856 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:07:02,858 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:07:02,858 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 3 соединений
2025-09-05 02:07:02,859 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:07:02,918 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:07:02,918 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 4 соединений
2025-09-05 02:07:02,919 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:07:02,921 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:07:02,921 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 5 соединений
2025-09-05 02:07:02,922 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:07:13,021 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:07:13,031 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 02:07:13,031 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:07:13,032 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:07:13,035 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:07:13,036 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 02:07:13,037 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:07:13,038 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:07:13,038 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:07:13,039 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 02:07:13,040 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Загрузка данных аналогов из базы', 'progress': 10, 'stage': 'loading_analog_data'}
2025-09-05 02:07:13,041 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:07:13,043 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:07:13,043 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка данных аналогов', 'progress': 30, 'stage': 'processing_analog_data'}
2025-09-05 02:07:13,044 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Генерация финальных данных аналогов', 'progress': 50, 'stage': 'generating_analog_data'}
2025-09-05 02:07:13,045 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 02:07:13,049 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 02:07:13,089 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 02:07:13,090 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 02:07:13,091 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 5, 'stage': 'initialization'}
2025-09-05 02:07:13,092 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга данных аналогов
2025-09-05 02:07:13,092 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Начало парсинга данных аналогов', 'progress': 10, 'stage': 'parsing_start'}
2025-09-05 02:07:13,094 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2268840C2
2025-09-05 02:07:13,094 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка патента RU2268840C2', 'progress': 20, 'stage': 'processing_patent'}
2025-09-05 02:07:13,096 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2239027C1
2025-09-05 02:07:13,096 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка патента RU2239027C1', 'progress': 30, 'stage': 'processing_patent'}
2025-09-05 02:07:13,097 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2006671C1
2025-09-05 02:07:13,098 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка патента RU2006671C1', 'progress': 40, 'stage': 'processing_patent'}
2025-09-05 02:07:13,099 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU195243U1
2025-09-05 02:07:13,100 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка патента RU195243U1', 'progress': 50, 'stage': 'processing_patent'}
2025-09-05 02:07:13,101 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2654879C1
2025-09-05 02:07:13,101 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка патента RU2654879C1', 'progress': 60, 'stage': 'processing_patent'}
2025-09-05 02:07:13,102 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента SU335192A1
2025-09-05 02:07:13,103 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка патента SU335192A1', 'progress': 70, 'stage': 'processing_patent'}
2025-09-05 02:07:13,104 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Форматирование результатов
2025-09-05 02:07:13,105 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Форматирование результатов', 'progress': 90, 'stage': 'formatting_results'}
2025-09-05 02:07:13,106 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:07:13,107 - core.ws_messenger - DEBUG - [ws_messenger.py:47 - handle_message()] - Completed message received: {'status': 'completed', 'message': {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}, 'stage': 'completed'}
2025-09-05 02:07:13,120 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка при генерации данных аналогов: 'AbstractClaimsGenerator' object has no attribute '_send_websocket_update'", 'stage': 'failed'}
2025-09-05 02:07:13,122 - app.services.analog.raw_data_generator.abstract_claims_generator - ERROR - [abstract_claims_generator.py:97 - generate_data()] - Error in _generate_analog_data: 'AbstractClaimsGenerator' object has no attribute '_send_websocket_update'
2025-09-05 02:07:13,128 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:07:13,128 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 6 соединений
2025-09-05 02:07:13,129 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:08:06,560 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:08:06,561 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:08:06,562 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 5 соединений
2025-09-05 02:08:06,562 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:08:06,563 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:08:06,564 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:08:06,565 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 4 соединений
2025-09-05 02:08:06,565 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:08:06,566 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:08:06,567 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:08:06,568 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 3 соединений
2025-09-05 02:08:06,568 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:08:06,569 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:08:06,571 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:08:06,571 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 02:08:06,572 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:08:06,573 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:08:06,573 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:08:06,574 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:08:06,575 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:08:06,576 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:08:06,577 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 02:08:06,577 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:08:28,051 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 02:08:47,966 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:08:47,975 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 02:08:47,975 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:08:47,976 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:08:47,979 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:08:47,980 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 02:08:55,730 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:08:55,732 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 02:08:55,733 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:08:55,733 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:08:55,735 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:08:55,735 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:08:55,736 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 02:08:55,737 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Загрузка данных аналогов из базы', 'progress': 10, 'stage': 'loading_analog_data'}
2025-09-05 02:08:55,737 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,738 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,739 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 02:08:55,740 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:08:55,741 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:08:55,742 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка данных аналогов', 'progress': 30, 'stage': 'processing_analog_data'}
2025-09-05 02:08:55,743 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,744 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,744 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 02:08:55,745 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Генерация финальных данных аналогов', 'progress': 50, 'stage': 'generating_analog_data'}
2025-09-05 02:08:55,746 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,747 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,747 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-05 02:08:55,748 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 02:08:55,751 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 02:08:55,791 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 02:08:55,792 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 02:08:55,792 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Готовимся начать парсинг', 'progress': 5, 'stage': 'initialization'}
2025-09-05 02:08:55,793 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,794 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,795 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-05 02:08:55,795 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга данных аналогов
2025-09-05 02:08:55,796 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Начало парсинга данных аналогов', 'progress': 10, 'stage': 'parsing_start'}
2025-09-05 02:08:55,796 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,797 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,798 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-05 02:08:55,799 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2268840C2
2025-09-05 02:08:55,799 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка патента RU2268840C2', 'progress': 20, 'stage': 'processing_patent'}
2025-09-05 02:08:55,800 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,801 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,801 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-05 02:08:55,802 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2239027C1
2025-09-05 02:08:55,802 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка патента RU2239027C1', 'progress': 30, 'stage': 'processing_patent'}
2025-09-05 02:08:55,803 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,804 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,804 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 7
2025-09-05 02:08:55,805 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2006671C1
2025-09-05 02:08:55,806 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка патента RU2006671C1', 'progress': 40, 'stage': 'processing_patent'}
2025-09-05 02:08:55,806 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,807 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,808 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 8
2025-09-05 02:08:55,808 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU195243U1
2025-09-05 02:08:55,809 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка патента RU195243U1', 'progress': 50, 'stage': 'processing_patent'}
2025-09-05 02:08:55,809 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,810 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,811 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 9
2025-09-05 02:08:55,811 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2654879C1
2025-09-05 02:08:55,812 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка патента RU2654879C1', 'progress': 60, 'stage': 'processing_patent'}
2025-09-05 02:08:55,813 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,813 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,814 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 10
2025-09-05 02:08:55,815 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента SU335192A1
2025-09-05 02:08:55,815 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка патента SU335192A1', 'progress': 70, 'stage': 'processing_patent'}
2025-09-05 02:08:55,816 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,817 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,817 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 11
2025-09-05 02:08:55,818 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Форматирование результатов
2025-09-05 02:08:55,818 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Форматирование результатов', 'progress': 90, 'stage': 'formatting_results'}
2025-09-05 02:08:55,819 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,820 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,821 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 12
2025-09-05 02:08:55,821 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:08:55,822 - core.ws_messenger - DEBUG - [ws_messenger.py:47 - handle_message()] - Completed message received: {'status': 'completed', 'message': {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}, 'stage': 'completed'}
2025-09-05 02:08:55,823 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Сохранение данных аналогов', 'progress': 70, 'stage': 'saving_analog_data'}
2025-09-05 02:08:55,823 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,824 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,825 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 13
2025-09-05 02:08:55,825 - app.services.db - DEBUG - [db.py:53 - save_in_db_json()] - The beginning of saving json to the database
2025-09-05 02:08:55,826 - app.services.db - DEBUG - [db.py:81 - check_and_create_storage()] - We check the availability of the database or create
2025-09-05 02:08:55,828 - app.services.db - DEBUG - [db.py:99 - check_and_create_storage()] - Verification or creation was successful
2025-09-05 02:08:55,830 - app.services.db - DEBUG - [db.py:59 - save_in_db_json()] - Saving the analog in the database was successful
2025-09-05 02:08:55,830 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'completed', 'message': 'Ссылки на аналоги получены и сохранены', 'stage': 'completed'}
2025-09-05 02:08:55,831 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:08:55,832 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:08:55,832 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 14
2025-09-05 02:08:55,889 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:08:55,890 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:08:55,890 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 02:08:55,891 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 14 сообщений
2025-09-05 02:08:55,891 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x00000193FEE59970>, <core.connection_manager.BufferedMessage object at 0x00000193FEE6E8A0>, <core.connection_manager.BufferedMessage object at 0x00000193FEECA8A0>, <core.connection_manager.BufferedMessage object at 0x00000193FE994F80>, <core.connection_manager.BufferedMessage object at 0x00000193FE98AEA0>, <core.connection_manager.BufferedMessage object at 0x00000193FE9834D0>, <core.connection_manager.BufferedMessage object at 0x00000193FE9A0590>, <core.connection_manager.BufferedMessage object at 0x00000193FEECA930>, <core.connection_manager.BufferedMessage object at 0x00000193FEECA7E0>, <core.connection_manager.BufferedMessage object at 0x00000193FEECA990>, <core.connection_manager.BufferedMessage object at 0x00000193FEECAA20>, <core.connection_manager.BufferedMessage object at 0x00000193FEECAA80>, <core.connection_manager.BufferedMessage object at 0x00000193FEC1C6B0>, <core.connection_manager.BufferedMessage object at 0x00000193FE982630>], maxlen=50)
2025-09-05 02:08:55,892 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (14 messages)
2025-09-05 02:08:55,894 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 14 messages for 1830913972
2025-09-05 02:08:55,894 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:09:03,933 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:09:03,934 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 02:09:03,934 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:09:08,239 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:09:08,241 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to get analog_abstract_claims
2025-09-05 02:09:08,242 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:09:08,242 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:09:08,243 - app.services.analog.table_generator - INFO - [table_generator.py:277 - generate_analogs_abstract_claims_xlsx()] - Star generate_analogs_abstract_claims_xlsx
2025-09-05 02:09:08,244 - app.services.analog.table_generator - INFO - [table_generator.py:65 - _generate_analogs_abstract_claims()] - Start generate_analogs_abstract_claims
2025-09-05 02:09:08,245 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:09:08,247 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:09:08,248 - app.services.analog.table_generator - ERROR - [table_generator.py:82 - _generate_analogs_abstract_claims()] - 'list' object has no attribute 'get'
2025-09-05 02:21:03,769 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:21:03,770 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to get analog_abstract_claims
2025-09-05 02:21:03,771 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:21:03,772 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:21:03,772 - app.services.analog.table_generator - INFO - [table_generator.py:277 - generate_analogs_abstract_claims_xlsx()] - Star generate_analogs_abstract_claims_xlsx
2025-09-05 02:21:03,773 - app.services.analog.table_generator - INFO - [table_generator.py:65 - _generate_analogs_abstract_claims()] - Start generate_analogs_abstract_claims
2025-09-05 02:21:03,774 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:21:03,776 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:21:03,777 - app.services.analog.table_generator - ERROR - [table_generator.py:82 - _generate_analogs_abstract_claims()] - 'list' object has no attribute 'get'
2025-09-05 02:30:56,233 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 02:31:17,201 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:31:17,211 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 02:31:17,212 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:31:17,213 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:31:17,216 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:31:17,217 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 02:31:25,763 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:31:25,765 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 02:31:25,765 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:31:25,766 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:31:25,767 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:31:25,768 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:31:25,769 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 02:31:25,769 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Загрузка данных аналогов из базы', 'progress': 10, 'stage': 'loading_analog_data'}
2025-09-05 02:31:25,770 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:31:25,771 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:31:25,772 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 02:31:25,772 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:31:25,774 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:31:25,775 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка данных аналогов', 'progress': 30, 'stage': 'processing_analog_data'}
2025-09-05 02:31:25,775 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:31:25,776 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:31:25,777 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 02:31:25,777 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Генерация финальных данных аналогов', 'progress': 50, 'stage': 'generating_analog_data'}
2025-09-05 02:31:25,778 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:31:25,779 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:31:25,779 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-05 02:31:25,780 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 02:31:25,784 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 02:31:25,827 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 02:31:25,828 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 02:31:25,829 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:31:25,830 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:31:25,831 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:31:25,832 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:31:25,832 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-05 02:31:25,833 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга данных аналогов
2025-09-05 02:31:25,834 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:31:25,835 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:31:25,835 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:31:25,836 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:31:25,837 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-05 02:31:25,837 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2268840C2
2025-09-05 02:31:25,838 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:31:25,839 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:31:25,839 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:31:25,840 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:31:25,841 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-05 02:31:25,841 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2239027C1
2025-09-05 02:31:25,842 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:31:25,843 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:31:25,844 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:31:25,844 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:31:25,845 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 7
2025-09-05 02:31:25,846 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2006671C1
2025-09-05 02:31:25,846 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:31:25,847 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:31:25,848 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:31:25,849 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:31:25,849 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 8
2025-09-05 02:31:25,850 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU195243U1
2025-09-05 02:31:25,851 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:31:25,852 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:31:25,852 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:31:25,853 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:31:25,854 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 9
2025-09-05 02:31:25,854 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2654879C1
2025-09-05 02:31:25,855 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:31:25,856 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:31:25,856 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:31:25,857 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:31:25,858 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 10
2025-09-05 02:31:25,858 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента SU335192A1
2025-09-05 02:31:25,859 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:31:25,860 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:31:25,860 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:31:25,861 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:31:25,862 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 11
2025-09-05 02:31:25,862 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Форматирование результатов
2025-09-05 02:31:25,863 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:31:25,864 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:31:25,864 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:31:25,865 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:31:25,866 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 12
2025-09-05 02:31:25,866 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:31:25,867 - core.ws_messenger - DEBUG - [ws_messenger.py:57 - handle_message()] - Completed message received: {'status': 'completed', 'message': {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}, 'stage': 'completed'}
2025-09-05 02:31:25,868 - core.ws_messenger - ERROR - [ws_messenger.py:64 - handle_message()] - Invalid result data or future already done: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:31:25,870 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:31:25,871 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:31:25,871 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 02:31:25,872 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 12 сообщений
2025-09-05 02:31:25,873 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x00000178FF661FA0>, <core.connection_manager.BufferedMessage object at 0x00000178FFBB6930>, <core.connection_manager.BufferedMessage object at 0x00000178FFBB69F0>, <core.connection_manager.BufferedMessage object at 0x00000178FFB4D5E0>, <core.connection_manager.BufferedMessage object at 0x00000178FFBB6900>, <core.connection_manager.BufferedMessage object at 0x00000178FFBB6960>, <core.connection_manager.BufferedMessage object at 0x00000178FFBB6AE0>, <core.connection_manager.BufferedMessage object at 0x00000178FFBB6B40>, <core.connection_manager.BufferedMessage object at 0x00000178FFBB6BA0>, <core.connection_manager.BufferedMessage object at 0x00000178FFBB6C00>, <core.connection_manager.BufferedMessage object at 0x00000178FFBB6C60>, <core.connection_manager.BufferedMessage object at 0x00000178FFBB6CC0>], maxlen=50)
2025-09-05 02:31:25,873 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (12 messages)
2025-09-05 02:31:25,875 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 12 messages for 1830913972
2025-09-05 02:31:25,875 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:31:29,872 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:31:29,873 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 02:31:29,874 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:31:33,551 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:31:33,551 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:31:33,552 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:34:12,833 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 02:34:58,678 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:34:58,680 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 02:34:58,680 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:34:58,681 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:34:58,684 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:34:58,685 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 02:35:15,431 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:35:15,434 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 02:35:15,435 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:35:15,435 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:35:15,437 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:35:15,437 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:35:15,438 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 02:35:15,439 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Загрузка данных аналогов из базы', 'progress': 10, 'stage': 'loading_analog_data'}
2025-09-05 02:35:15,439 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:35:15,440 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:35:15,441 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 02:35:15,441 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:35:15,443 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:35:15,444 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка данных аналогов', 'progress': 30, 'stage': 'processing_analog_data'}
2025-09-05 02:35:15,445 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:35:15,446 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:35:15,446 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 02:35:15,447 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Генерация финальных данных аналогов', 'progress': 50, 'stage': 'generating_analog_data'}
2025-09-05 02:35:15,450 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:35:15,451 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:35:15,451 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-05 02:35:15,452 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 02:35:15,497 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 02:35:15,535 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 02:35:15,536 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 02:35:15,537 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:35:15,538 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:35:15,538 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:35:15,539 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:35:15,540 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-05 02:35:15,540 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга данных аналогов
2025-09-05 02:35:15,541 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:35:15,542 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:35:15,542 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:35:15,544 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:35:15,544 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-05 02:35:15,545 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2268840C2
2025-09-05 02:35:15,545 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:35:15,546 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:35:15,547 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:35:15,548 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:35:15,549 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-05 02:35:15,549 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2239027C1
2025-09-05 02:35:15,550 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:35:15,551 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:35:15,552 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:35:15,552 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:35:15,553 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 7
2025-09-05 02:35:15,554 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2006671C1
2025-09-05 02:35:15,554 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:35:15,555 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:35:15,556 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:35:15,556 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:35:15,557 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 8
2025-09-05 02:35:15,557 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU195243U1
2025-09-05 02:35:15,558 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:35:15,559 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:35:15,560 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:35:15,560 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:35:15,561 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 9
2025-09-05 02:35:15,562 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2654879C1
2025-09-05 02:35:15,562 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:35:15,563 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:35:15,573 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:35:15,574 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:35:15,574 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 10
2025-09-05 02:35:15,576 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента SU335192A1
2025-09-05 02:35:15,577 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:35:15,578 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:35:15,578 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:35:15,579 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:35:15,580 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 11
2025-09-05 02:35:15,580 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Форматирование результатов
2025-09-05 02:35:15,581 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:35:15,582 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:35:15,582 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:35:15,583 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:35:15,584 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 12
2025-09-05 02:35:15,584 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:35:15,585 - core.ws_messenger - DEBUG - [ws_messenger.py:57 - handle_message()] - Completed message received: {'status': 'completed', 'message': {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}, 'stage': 'completed'}
2025-09-05 02:35:15,585 - core.ws_messenger - ERROR - [ws_messenger.py:64 - handle_message()] - Invalid result data or future already done: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:35:15,587 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:35:15,587 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:35:15,588 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 02:35:15,589 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 12 сообщений
2025-09-05 02:35:15,589 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000001C5206ECC50>, <core.connection_manager.BufferedMessage object at 0x000001C51EB7D3D0>, <core.connection_manager.BufferedMessage object at 0x000001C520B52CC0>, <core.connection_manager.BufferedMessage object at 0x000001C5206F4080>, <core.connection_manager.BufferedMessage object at 0x000001C520B52B40>, <core.connection_manager.BufferedMessage object at 0x000001C520B52C00>, <core.connection_manager.BufferedMessage object at 0x000001C520B52B70>, <core.connection_manager.BufferedMessage object at 0x000001C520B52DE0>, <core.connection_manager.BufferedMessage object at 0x000001C520B52ED0>, <core.connection_manager.BufferedMessage object at 0x000001C520B52F30>, <core.connection_manager.BufferedMessage object at 0x000001C520B52F90>, <core.connection_manager.BufferedMessage object at 0x000001C5209F3F20>], maxlen=50)
2025-09-05 02:35:15,590 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (12 messages)
2025-09-05 02:35:15,592 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 12 messages for 1830913972
2025-09-05 02:35:15,592 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:35:19,563 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:35:19,564 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 02:35:19,564 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:35:23,264 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:35:23,265 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:35:23,265 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:36:27,212 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 1.0s... (Attempt 1/5)
2025-09-05 02:36:27,213 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: cannot access local variable 'result_data' where it is not associated with a value
2025-09-05 02:36:27,214 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: cannot access local variable 'result_data' where it is not associated with a value", 'stage': 'failed'}
2025-09-05 02:36:29,909 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 02:36:56,032 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 02:37:13,870 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:37:13,879 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 02:37:13,880 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:37:13,880 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:37:13,883 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:37:13,884 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 02:37:21,706 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:37:21,708 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 02:37:21,709 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:37:21,709 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:37:21,711 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:37:21,711 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:37:21,712 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 02:37:21,713 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Загрузка данных аналогов из базы', 'progress': 10, 'stage': 'loading_analog_data'}
2025-09-05 02:37:21,713 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:37:21,714 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:37:21,715 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 02:37:21,715 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:37:21,717 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:37:21,718 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка данных аналогов', 'progress': 30, 'stage': 'processing_analog_data'}
2025-09-05 02:37:21,719 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:37:21,720 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:37:21,721 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 02:37:21,721 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Генерация финальных данных аналогов', 'progress': 50, 'stage': 'generating_analog_data'}
2025-09-05 02:37:21,722 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:37:21,723 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:37:21,724 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-05 02:37:21,724 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 02:37:21,728 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 02:37:21,768 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 02:37:21,769 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 02:37:21,770 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:37:21,771 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:37:21,771 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:37:21,772 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:37:21,773 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-05 02:37:21,773 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга данных аналогов
2025-09-05 02:37:21,774 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:37:21,775 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:37:21,775 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:37:21,776 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:37:21,777 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-05 02:37:21,777 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2268840C2
2025-09-05 02:37:21,778 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:37:21,779 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:37:21,779 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:37:21,780 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:37:21,781 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-05 02:37:21,782 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2239027C1
2025-09-05 02:37:21,782 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:37:21,783 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:37:21,784 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:37:21,785 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:37:21,785 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 7
2025-09-05 02:37:21,786 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2006671C1
2025-09-05 02:37:21,786 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:37:21,787 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:37:21,788 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:37:21,789 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:37:21,789 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 8
2025-09-05 02:37:21,790 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU195243U1
2025-09-05 02:37:21,790 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:37:21,791 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:37:21,792 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:37:21,793 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:37:21,793 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 9
2025-09-05 02:37:21,794 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2654879C1
2025-09-05 02:37:21,794 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:37:21,795 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:37:21,796 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:37:21,797 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:37:21,797 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 10
2025-09-05 02:37:21,798 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента SU335192A1
2025-09-05 02:37:21,798 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:37:21,799 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:37:21,800 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:37:21,801 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:37:21,801 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 11
2025-09-05 02:37:21,802 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Форматирование результатов
2025-09-05 02:37:21,802 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:37:21,803 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:37:21,804 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:37:21,804 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:37:21,805 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 12
2025-09-05 02:37:21,806 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:37:21,806 - core.ws_messenger - DEBUG - [ws_messenger.py:57 - handle_message()] - Completed message received: {'status': 'completed', 'message': {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}, 'stage': 'completed'}
2025-09-05 02:37:21,807 - core.ws_messenger - ERROR - [ws_messenger.py:64 - handle_message()] - Invalid result data or future already done: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:37:21,842 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:37:21,842 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:37:21,843 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 02:37:21,843 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 12 сообщений
2025-09-05 02:37:21,844 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x0000027342FD16D0>, <core.connection_manager.BufferedMessage object at 0x000002734351AAE0>, <core.connection_manager.BufferedMessage object at 0x000002734351ABA0>, <core.connection_manager.BufferedMessage object at 0x0000027342FC58B0>, <core.connection_manager.BufferedMessage object at 0x000002734351A870>, <core.connection_manager.BufferedMessage object at 0x0000027314501BE0>, <core.connection_manager.BufferedMessage object at 0x000002734351A9F0>, <core.connection_manager.BufferedMessage object at 0x000002734351AC60>, <core.connection_manager.BufferedMessage object at 0x000002734351ACC0>, <core.connection_manager.BufferedMessage object at 0x000002734351AD20>, <core.connection_manager.BufferedMessage object at 0x000002734351AD80>, <core.connection_manager.BufferedMessage object at 0x000002734351ADE0>], maxlen=50)
2025-09-05 02:37:21,845 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (12 messages)
2025-09-05 02:37:21,846 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 12 messages for 1830913972
2025-09-05 02:37:21,847 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:37:25,899 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:37:25,900 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 02:37:25,900 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:37:29,618 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:37:29,618 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:37:29,619 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:40:48,262 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 02:41:18,402 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:41:18,419 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 02:41:18,419 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:41:18,420 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:41:18,428 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:41:18,429 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 02:41:32,779 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:41:32,781 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 02:41:32,782 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:41:32,782 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:41:32,783 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:41:32,784 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:41:32,785 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 02:41:32,785 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Загрузка данных аналогов из базы', 'progress': 10, 'stage': 'loading_analog_data'}
2025-09-05 02:41:32,786 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:41:32,787 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:41:32,788 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 02:41:32,788 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:41:32,790 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:41:32,791 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка данных аналогов', 'progress': 30, 'stage': 'processing_analog_data'}
2025-09-05 02:41:32,792 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:41:32,793 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:41:32,793 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 02:41:32,794 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Генерация финальных данных аналогов', 'progress': 50, 'stage': 'generating_analog_data'}
2025-09-05 02:41:32,794 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:41:32,795 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:41:32,796 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-05 02:41:32,796 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 02:41:32,800 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 02:41:32,871 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:41:32,871 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:41:32,872 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 02:41:32,872 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 3 сообщений
2025-09-05 02:41:32,873 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x0000020BF7DCD0A0>, <core.connection_manager.BufferedMessage object at 0x0000020BF7DCEB70>, <core.connection_manager.BufferedMessage object at 0x0000020BF7E2ABD0>], maxlen=50)
2025-09-05 02:41:32,873 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (3 messages)
2025-09-05 02:41:32,875 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 3 messages for 1830913972
2025-09-05 02:41:32,876 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:41:32,896 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 02:41:32,897 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 02:41:32,897 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:41:32,898 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:41:32,899 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга данных аналогов
2025-09-05 02:41:32,899 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:41:32,900 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:41:32,963 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2268840C2
2025-09-05 02:41:32,963 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:41:32,964 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:41:32,965 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2239027C1
2025-09-05 02:41:32,966 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:41:32,967 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:41:32,968 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2006671C1
2025-09-05 02:41:32,968 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:41:32,969 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:41:32,970 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU195243U1
2025-09-05 02:41:32,970 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:41:32,971 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:41:32,972 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2654879C1
2025-09-05 02:41:32,973 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:41:32,974 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:41:32,974 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента SU335192A1
2025-09-05 02:41:32,975 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:41:32,976 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:41:32,977 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Форматирование результатов
2025-09-05 02:41:32,977 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:41:32,978 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:41:32,979 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:41:32,979 - core.ws_messenger - DEBUG - [ws_messenger.py:57 - handle_message()] - Completed message received: {'status': 'completed', 'message': {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}, 'stage': 'completed'}
2025-09-05 02:41:32,980 - core.ws_messenger - ERROR - [ws_messenger.py:64 - handle_message()] - Invalid result data or future already done: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:41:36,850 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:41:36,852 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 02:41:36,853 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:41:40,571 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:41:40,571 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:41:40,572 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:45:33,283 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 1.0s... (Attempt 1/5)
2025-09-05 02:45:33,285 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: cannot access local variable 'result_data' where it is not associated with a value
2025-09-05 02:45:33,286 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: cannot access local variable 'result_data' where it is not associated with a value", 'stage': 'failed'}
2025-09-05 02:45:38,352 - app.clients.ws_client - ERROR - [ws_client.py:73 - _connect_and_listen()] - Failed to connect to Patent WebSocket
2025-09-05 02:45:38,353 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': 'Failed to connect to Patent WebSocket', 'stage': 'failed'}
2025-09-05 02:45:38,354 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 2.0s... (Attempt 2/5)
2025-09-05 02:45:38,355 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: cannot access local variable 'result_data' where it is not associated with a value
2025-09-05 02:45:38,356 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: cannot access local variable 'result_data' where it is not associated with a value", 'stage': 'failed'}
2025-09-05 02:45:42,430 - app.clients.ws_client - ERROR - [ws_client.py:73 - _connect_and_listen()] - Failed to connect to Patent WebSocket
2025-09-05 02:45:42,431 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': 'Failed to connect to Patent WebSocket', 'stage': 'failed'}
2025-09-05 02:45:42,432 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 4.0s... (Attempt 3/5)
2025-09-05 02:45:42,433 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: cannot access local variable 'result_data' where it is not associated with a value
2025-09-05 02:45:42,434 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: cannot access local variable 'result_data' where it is not associated with a value", 'stage': 'failed'}
2025-09-05 02:45:48,476 - app.clients.ws_client - ERROR - [ws_client.py:73 - _connect_and_listen()] - Failed to connect to Patent WebSocket
2025-09-05 02:45:48,477 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': 'Failed to connect to Patent WebSocket', 'stage': 'failed'}
2025-09-05 02:45:48,478 - app.clients.ws_client - INFO - [ws_client.py:104 - _connect_and_listen()] - 🔄 Reconnecting to WebSocket for user 1830913972 in 8.0s... (Attempt 4/5)
2025-09-05 02:45:48,479 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: cannot access local variable 'result_data' where it is not associated with a value
2025-09-05 02:45:48,480 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: cannot access local variable 'result_data' where it is not associated with a value", 'stage': 'failed'}
2025-09-05 02:45:58,034 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 02:45:59,120 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:45:59,122 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 02:45:59,123 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:45:59,124 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:45:59,125 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:45:59,126 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:45:59,126 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 02:45:59,127 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Загрузка данных аналогов из базы', 'progress': 10, 'stage': 'loading_analog_data'}
2025-09-05 02:45:59,128 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:45:59,130 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:45:59,131 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка данных аналогов', 'progress': 30, 'stage': 'processing_analog_data'}
2025-09-05 02:45:59,131 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Генерация финальных данных аналогов', 'progress': 50, 'stage': 'generating_analog_data'}
2025-09-05 02:45:59,132 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 02:45:59,135 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 02:45:59,137 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 02:45:59,138 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:45:59,139 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:45:59,140 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга данных аналогов
2025-09-05 02:45:59,140 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:45:59,141 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:45:59,142 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2268840C2
2025-09-05 02:45:59,143 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:45:59,144 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:45:59,145 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2239027C1
2025-09-05 02:45:59,146 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:45:59,147 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:45:59,154 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2006671C1
2025-09-05 02:45:59,155 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:45:59,156 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:45:59,157 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU195243U1
2025-09-05 02:45:59,158 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:45:59,159 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:45:59,160 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2654879C1
2025-09-05 02:45:59,161 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:45:59,162 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:45:59,164 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента SU335192A1
2025-09-05 02:45:59,164 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:45:59,165 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:45:59,167 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Форматирование результатов
2025-09-05 02:45:59,167 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:45:59,168 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:45:59,169 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:45:59,170 - core.ws_messenger - DEBUG - [ws_messenger.py:57 - handle_message()] - Completed message received: {'status': 'completed', 'message': {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}, 'stage': 'completed'}
2025-09-05 02:45:59,170 - core.ws_messenger - ERROR - [ws_messenger.py:64 - handle_message()] - Invalid result data or future already done: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:45:59,175 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 02:45:59,217 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:45:59,218 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 02:45:59,219 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:46:03,209 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:46:03,210 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:46:03,210 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:46:03,211 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:46:06,905 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:46:06,906 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 2 соединений
2025-09-05 02:46:06,907 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:54:49,783 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 02:56:02,115 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:56:02,124 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 02:56:02,125 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:56:02,126 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:56:02,129 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:56:02,130 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 02:56:09,035 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:56:09,037 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 02:56:09,038 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:56:09,039 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:56:09,040 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:56:09,041 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 02:56:09,041 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 02:56:09,042 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Загрузка данных аналогов из базы', 'progress': 10, 'stage': 'loading_analog_data'}
2025-09-05 02:56:09,043 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:56:09,044 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:56:09,045 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 02:56:09,045 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:56:09,047 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:56:09,048 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка данных аналогов', 'progress': 30, 'stage': 'processing_analog_data'}
2025-09-05 02:56:09,048 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:56:09,049 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:56:09,050 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 02:56:09,050 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Генерация финальных данных аналогов', 'progress': 50, 'stage': 'generating_analog_data'}
2025-09-05 02:56:09,051 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:56:09,052 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:56:09,052 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-05 02:56:09,053 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 02:56:09,057 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 02:56:09,105 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 02:56:09,105 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 02:56:09,106 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:56:09,107 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:56:09,107 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:56:09,108 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:56:09,109 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-05 02:56:09,110 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга данных аналогов
2025-09-05 02:56:09,110 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:56:09,111 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:56:09,112 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:56:09,113 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:56:09,113 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-05 02:56:09,114 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2268840C2
2025-09-05 02:56:09,114 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:56:09,115 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:56:09,116 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:56:09,116 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:56:09,117 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-05 02:56:09,118 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2239027C1
2025-09-05 02:56:09,118 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:56:09,119 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:56:09,120 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:56:09,120 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:56:09,121 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 7
2025-09-05 02:56:09,122 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2006671C1
2025-09-05 02:56:09,122 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:56:09,123 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:56:09,124 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:56:09,125 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:56:09,125 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 8
2025-09-05 02:56:09,126 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU195243U1
2025-09-05 02:56:09,127 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:56:09,127 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:56:09,128 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:56:09,129 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:56:09,129 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 9
2025-09-05 02:56:09,130 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2654879C1
2025-09-05 02:56:09,130 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:56:09,131 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:56:09,132 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:56:09,133 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:56:09,133 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 10
2025-09-05 02:56:09,134 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента SU335192A1
2025-09-05 02:56:09,134 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:56:09,135 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:56:09,136 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:56:09,137 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:56:09,137 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 11
2025-09-05 02:56:09,138 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Форматирование результатов
2025-09-05 02:56:09,138 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 02:56:09,139 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 02:56:09,140 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 02:56:09,141 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 02:56:09,141 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 12
2025-09-05 02:56:09,142 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:56:09,142 - core.ws_messenger - DEBUG - [ws_messenger.py:57 - handle_message()] - Completed message received: {'status': 'completed', 'message': {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}, 'stage': 'completed'}
2025-09-05 02:56:09,143 - core.ws_messenger - ERROR - [ws_messenger.py:64 - handle_message()] - Invalid result data or future already done: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 02:56:09,145 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:56:09,146 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:56:09,146 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 02:56:09,147 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 12 сообщений
2025-09-05 02:56:09,147 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x00000157F87B6660>, <core.connection_manager.BufferedMessage object at 0x00000157FEC9A960>, <core.connection_manager.BufferedMessage object at 0x00000157FEC9AAB0>, <core.connection_manager.BufferedMessage object at 0x00000157FE762600>, <core.connection_manager.BufferedMessage object at 0x00000157FEA42360>, <core.connection_manager.BufferedMessage object at 0x00000157FEA42270>, <core.connection_manager.BufferedMessage object at 0x00000157FEC9A930>, <core.connection_manager.BufferedMessage object at 0x00000157FEC3EBA0>, <core.connection_manager.BufferedMessage object at 0x00000157FEC9ACC0>, <core.connection_manager.BufferedMessage object at 0x00000157FEC9AD20>, <core.connection_manager.BufferedMessage object at 0x00000157FEC9AD80>, <core.connection_manager.BufferedMessage object at 0x00000157FEC9ADE0>], maxlen=50)
2025-09-05 02:56:09,148 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (12 messages)
2025-09-05 02:56:09,150 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 12 messages for 1830913972
2025-09-05 02:56:09,150 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:56:13,075 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 02:56:13,077 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 02:56:13,077 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 02:56:16,781 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 02:56:16,781 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 02:56:16,782 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 02:59:38,833 - asyncio - DEBUG - [proactor_events.py:634 - __init__()] - Using proactor: IocpProactor
2025-09-05 02:59:44,166 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 02:59:44,175 - app.http.routes.patent - DEBUG - [patent.py:41 - get_patent()] - Request to get a patents
2025-09-05 02:59:44,175 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 02:59:44,176 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 02:59:44,179 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 02:59:44,180 - app.services.patent.patent - DEBUG - [patent.py:84 - get_patents()] - Patents loaded from DB and cached
2025-09-05 03:00:03,628 - core.token_manager.token_manager_jwt_user - WARNING - [token_manager_jwt_user.py:26 - _read_secret_key()] - Reading jwt secret key
2025-09-05 03:00:03,630 - app.http.routes.route_methods - INFO - [route_methods.py:23 - reg()] - Request to create analog link
2025-09-05 03:00:03,631 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 03:00:03,631 - app.http.routes.route_methods - DEBUG - [route_methods.py:25 - reg()] - {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 03:00:03,633 - app.services.patent.patent - DEBUG - [patent.py:51 - get_patents()] - Get patents request
2025-09-05 03:00:03,633 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:41 - _initialize()] - user_uid: 0198f566-3d4a-78a9-972f-db581c58f6f4, patents: {'0198f566-5c15-75f4-bbfb-0a5b98b98a40': {'name': 'aaaaaaaaaaaaaaaaaaaaaaaa', 'search_query': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ С ПЕДАЛЬНЫМ ПРИВОДОМ', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '019913b8-c6f4-7723-9106-8e371d1dfa4e': {'name': 'ГЕНЕРАТОР ЭЛЕКТРИЧЕСКОГО ТОКА ДЛЯ ТРАНСПОРТНЫХ СРЕДСТВ\nС ПЕДАЛЬНЫМ ПРИВОДОМ', 'search_query': 'велосипед AND электрический AND генератор AND конденсатор AND светодиод', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}, '0199167d-b61c-7d3e-a5a3-f95a272be9bb': {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}}
2025-09-05 03:00:03,634 - app.services.analog.raw_data_generator.base_raw_data_generator - DEBUG - [base_raw_data_generator.py:52 - _initialize()] - Patent data loaded: {'name': 'Катамаран-Экскаватор', 'search_query': 'катамаран AND экскаватор AND ковш', 'appointment': None, 'construction': None, 'operation_principle': None, 'technical_area': None, 'technical_result': None}
2025-09-05 03:00:03,635 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Загрузка данных аналогов из базы', 'progress': 10, 'stage': 'loading_analog_data'}
2025-09-05 03:00:03,636 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 03:00:03,637 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 03:00:03,637 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 1
2025-09-05 03:00:03,638 - app.services.db - DEBUG - [db.py:14 - get_from_db_json()] - Start reading json analog from DB
2025-09-05 03:00:03,640 - app.services.db - DEBUG - [db.py:24 - get_from_db_json()] - Successfully read json from DB
2025-09-05 03:00:03,641 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Обработка данных аналогов', 'progress': 30, 'stage': 'processing_analog_data'}
2025-09-05 03:00:03,641 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 03:00:03,643 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 03:00:03,643 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 2
2025-09-05 03:00:03,644 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'processing', 'message': 'Генерация финальных данных аналогов', 'progress': 50, 'stage': 'generating_analog_data'}
2025-09-05 03:00:03,644 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 03:00:03,645 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 03:00:03,646 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 3
2025-09-05 03:00:03,647 - core.token_manager.service_client.parser - WARNING - [parser.py:26 - _read_secret_key()] - Reading Parser Service secret key
2025-09-05 03:00:03,650 - app.clients.ws_client - INFO - [ws_client.py:39 - _connect_and_listen()] - 🔗 Connecting to: ws://127.0.0.1:8009/api/v1/ws/parser/1830913972
2025-09-05 03:00:03,697 - app.clients.ws_client - DEBUG - [ws_client.py:45 - _connect_and_listen()] - ✅ Connected to Patent WS for user 1830913972
2025-09-05 03:00:03,697 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Готовимся начать парсинг
2025-09-05 03:00:03,698 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 03:00:03,699 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 03:00:03,700 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 03:00:03,700 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 03:00:03,701 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 4
2025-09-05 03:00:03,702 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Начало парсинга данных аналогов
2025-09-05 03:00:03,702 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 03:00:03,703 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 03:00:03,704 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 03:00:03,705 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 03:00:03,705 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 5
2025-09-05 03:00:03,706 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2268840C2
2025-09-05 03:00:03,706 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 03:00:03,707 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 03:00:03,708 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 03:00:03,709 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 03:00:03,709 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 6
2025-09-05 03:00:03,710 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2239027C1
2025-09-05 03:00:03,710 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 03:00:03,711 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 03:00:03,712 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 03:00:03,713 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 03:00:03,713 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 7
2025-09-05 03:00:03,714 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2006671C1
2025-09-05 03:00:03,714 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 03:00:03,715 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 03:00:03,716 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 03:00:03,717 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 03:00:03,717 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 8
2025-09-05 03:00:03,718 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU195243U1
2025-09-05 03:00:03,718 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 03:00:03,719 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 03:00:03,720 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 03:00:03,721 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 03:00:03,721 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 9
2025-09-05 03:00:03,722 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента RU2654879C1
2025-09-05 03:00:03,722 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 03:00:03,723 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 03:00:03,724 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 03:00:03,725 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 03:00:03,725 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 10
2025-09-05 03:00:03,726 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Обработка патента SU335192A1
2025-09-05 03:00:03,726 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 03:00:03,727 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 03:00:03,728 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 03:00:03,729 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 03:00:03,729 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 11
2025-09-05 03:00:03,730 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: Форматирование результатов
2025-09-05 03:00:03,730 - core.ws_messenger - ERROR - [ws_messenger.py:77 - handle_message()] - Error in handle_parser_message: name 'progress' is not defined
2025-09-05 03:00:03,731 - core.connection_manager - DEBUG - [connection_manager.py:52 - send_message()] - Sending message to 1830913972, message: {'status': 'error', 'message': "Ошибка обработки сообщения: name 'progress' is not defined", 'stage': 'failed'}
2025-09-05 03:00:03,732 - core.connection_manager - ERROR - [connection_manager.py:65 - _try_send_to_active_connections()] - Нет активных подключений для chat_id: 1830913972
2025-09-05 03:00:03,733 - core.connection_manager - DEBUG - [connection_manager.py:66 - _try_send_to_active_connections()] - Активные подключения: {}
2025-09-05 03:00:03,733 - core.connection_manager - DEBUG - [connection_manager.py:101 - _add_to_buffer()] - Buffered message for 1830913972. Buffer size: 12
2025-09-05 03:00:03,734 - app.clients.ws_client - DEBUG - [ws_client.py:52 - _connect_and_listen()] - ws message: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 03:00:03,734 - core.ws_messenger - DEBUG - [ws_messenger.py:57 - handle_message()] - Completed message received: {'status': 'completed', 'message': {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}, 'stage': 'completed'}
2025-09-05 03:00:03,735 - core.ws_messenger - ERROR - [ws_messenger.py:64 - handle_message()] - Invalid result data or future already done: {'RU2268840C2': [], 'RU2239027C1': [], 'RU2006671C1': [], 'RU195243U1': [], 'RU2654879C1': [], 'SU335192A1': []}
2025-09-05 03:00:03,738 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 03:00:03,738 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 03:00:03,739 - core.connection_manager - DEBUG - [connection_manager.py:166 - print_active_connections()] - 📦 Буферизованные сообщения:
2025-09-05 03:00:03,739 - core.connection_manager - DEBUG - [connection_manager.py:168 - print_active_connections()] -   1830913972: 12 сообщений
2025-09-05 03:00:03,740 - core.connection_manager - DEBUG - [connection_manager.py:169 - print_active_connections()] - buffer: deque([<core.connection_manager.BufferedMessage object at 0x000001C9144FA7B0>, <core.connection_manager.BufferedMessage object at 0x000001C9146A67B0>, <core.connection_manager.BufferedMessage object at 0x000001C9146A6870>, <core.connection_manager.BufferedMessage object at 0x000001C91415E240>, <core.connection_manager.BufferedMessage object at 0x000001C9141640B0>, <core.connection_manager.BufferedMessage object at 0x000001C91415ECF0>, <core.connection_manager.BufferedMessage object at 0x000001C914164DA0>, <core.connection_manager.BufferedMessage object at 0x000001C9141675F0>, <core.connection_manager.BufferedMessage object at 0x000001C914166330>, <core.connection_manager.BufferedMessage object at 0x000001C9146A66C0>, <core.connection_manager.BufferedMessage object at 0x000001C9146A64B0>, <core.connection_manager.BufferedMessage object at 0x000001C9146A6930>], maxlen=50)
2025-09-05 03:00:03,740 - core.connection_manager - DEBUG - [connection_manager.py:109 - _flush_buffer()] - Flushing buffer for 1830913972 (12 messages)
2025-09-05 03:00:03,742 - core.connection_manager - DEBUG - [connection_manager.py:129 - _flush_buffer()] - Flushed 12 messages for 1830913972
2025-09-05 03:00:03,743 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 03:00:07,704 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 03:00:07,705 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 03:00:07,706 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
2025-09-05 03:00:11,412 - core.connection_manager - DEBUG - [connection_manager.py:161 - print_active_connections()] - 🔌 Активные подключения:
2025-09-05 03:00:11,412 - core.connection_manager - DEBUG - [connection_manager.py:163 - print_active_connections()] -   1830913972: 1 соединений
2025-09-05 03:00:11,413 - app.http.routes.web_socket - INFO - [web_socket.py:21 - websocket_patent_analogues()] - User 1830913972 connected successfully
2025-09-05 03:06:01,759 - app.http.routes.web_socket - INFO - [web_socket.py:28 - websocket_patent_analogues()] - User 1830913972 disconnected
2025-09-05 03:06:01,760 - core.connection_manager - DEBUG - [connection_manager.py:159 - print_active_connections()] - 📭 Нет активных подключений
2025-09-05 03:06:01,761 - app.http.routes.web_socket - INFO - [web_socket.py:33 - websocket_patent_analogues()] - User 1830913972 cleanup completed
